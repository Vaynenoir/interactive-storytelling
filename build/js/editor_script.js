$(document).ready(function(){function t(t){var e=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"50",contentAlign:"flex-start",checkboxState:"false",defaultOption:"false",UserOption:"false",StartIcon:"",RouteStartIconColor:"rgba(0, 0, 0, 1)",RouteStartIconSize:"10"};if(e[t])return e[t]}function e(e){e.addEventListener("load",function(){function o(t){t.addEventListener("load",function(){for(var e=t.contentDocument.documentElement,o=e.getElementsByTagName("path"),a=new XMLSerializer,r=document.getElementById("iconTest"),l=[],s=0;s<o.length;s++){o[s].style.fill=n.RouteStartIconColor;var i=a.serializeToString(o[s]);console.log(i),l.push(i)}console.log(l),localStorage.setItem("StartRouteIcon",JSON.stringify(l)),$("input[name=RouteStartIconColor]").change(function(t){$("option:selected",this);var e=this.value,a=this.name;n[a]=e;for(var r=0;r<o.length;r++)o[r].style.fill=n.RouteStartIconColor;localStorage.setItem("Settings",JSON.stringify(n))}),$("input[name = RouteStartIconSize]").change(function(){$("option:selected",this);var t=this.value,o=this.name;n[o]=t,$("#iconTest").attr({width:n.RouteStartIconSize,height:n.RouteStartIconSize}),e.setAttribute("width",$(r).attr("width")),e.setAttribute("height",$(r).attr("height")),console.log(e),console.log(n)})})}var a=e.contentDocument;console.log(a);var r=a.documentElement.getElementById("mapPaths").getElementsByTagName("path"),n=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"50",contentAlign:"flex-start",checkboxState:"false",defaultOption:"false",UserOption:"false",StartIcon:"",RouteStartIconColor:"rgba(0, 0, 0, 1)",RouteStartIconSize:"2"},l=JSON.parse(localStorage.getItem("mapStyleProperties"))||{transform:""},s=1,i=0,c=0;if(""!=l.transform.length){transformString=l.transform;var g=transformString.match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)});console.log(g),s=g[0],i=g[1],c=g[2],console.log(s,i,c),$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)")}var d={zoom:0,e:0,f:0};console.log(l),$("#plus").bind("click",function(){s+=.1,$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+"    "+c+")",localStorage.setItem("mapStyleProperties",JSON.stringify(l)),localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("zoom",JSON.stringify(s))}),$("#minus").bind("click",function(){(s-=.3)<1.1&&(s=1),$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+" "+c+")",localStorage.setItem("zoom",JSON.stringify(s)),localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("mapStyleProperties",JSON.stringify(l))}),$("#moveLeft").bind("click",function(){i+=10,$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+" "+c+")",localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("mapStyleProperties",JSON.stringify(l))}),$("#moveRight").bind("click",function(){i-=10,$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+" "+c+")",localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("mapStyleProperties",JSON.stringify(l))}),$("#moveTop").bind("click",function(){c+=10,$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+" "+c+")",localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("mapStyleProperties",JSON.stringify(l))}),$("#moveBottom").bind("click",function(){c-=10,$("#map_bg").css("transform","scale("+s+") translate("+i+"px,"+c+"px)"),l.transform="scale("+s+") translate("+i+" "+c+")",localStorage.setItem("SreenCTM",JSON.stringify(d)),localStorage.setItem("mapStyleProperties",JSON.stringify(l))});var m=document.getElementById("mapColorPicker"),p=document.getElementById("mapStrokeColorPicker"),S=document.getElementById("mapPointsColorPicker"),u=document.getElementById("mapPointsBorderColorPicker"),f=document.getElementById("mapRouteColorPicker"),h=document.getElementById("bodyColorPicker"),y=$(".colorPicker");$("#color_change");m.style.display="block",p.style.display="block",S.style.display="block",u.style.display="block",f.style.display="block",h.style.display="block",m.value=t("mapColor"),p.value=t("mapStrokeColor"),S.value=t("mapPointsColor"),u.value=t("mapPointsBorderColor"),f.value=t("mapRouteColor"),h.value=t("bodyBackgroundColor"),$("#PathStartIconColor").val(t("RouteStartIconColor")),$("#test6").value=2*t("pointsRadius");for(var b=0;b<r.length;b++)r[b].style.fill=t("mapColor"),r[b].style.stroke=t("mapStrokeColor");$("#circle_example").css({width:2*t("pointsRadius"),height:2*t("pointsRadius"),"background-color":t("mapPointsColor"),border:t("pointsBorderWidth")+"solid"+t("mapPointsBorderColor")}),$(".routeExample").css({height:t("routeBorderWidth"),"background-color":t("mapRouteColor")}),$("#iconTest").attr({width:t("RouteStartIconSize"),height:t("RouteStartIconSize")});var I=$("input[type=range]"),k=$("input[type=checkbox]"),v=document.getElementById("mapSettings"),C=JSON.parse(localStorage.getItem("map"));if($("#mapSettings").attr("data",C),v.addEventListener("load",function(){var e=v.contentDocument.documentElement.getElementsByTagName("path");$(".map_settings_block").css("background-color",t("bodyBackgroundColor"));for(var o=0;o<e.length;o++)e[o].style.fill=t("mapColor"),e[o].style.stroke=t("mapStrokeColor");$(I).change(function(t){$("option:selected",this);var e=this.value,o=this.name;n[o]=e;for(var a=JSON.parse(localStorage.getItem("circlesCoords")),r=0;r<a.length;r++)a[r].r=n.pointsRadius;$("#circle_example").css({width:2*n.pointsRadius,height:2*n.pointsRadius,border:n.pointsBorderWidth+"px solid "+n.mapPointsBorderColor}),$(".routeExample").css("height",n.routeBorderWidth),$(".content_block").css("width",n.contentWidth+"%"),localStorage.setItem("circlesCoords",JSON.stringify(a)),localStorage.setItem("Settings",JSON.stringify(n))}),$("input[name = contentAlign]").on("click",function(){$(this).prop("checked",!0)[0].id;console.log($(this).val()),$(".test_block").css("justify-content",$(this).val()),n.contentAlign=$(this).val(),localStorage.setItem("Settings",JSON.stringify(n))}),$(y).minicolors({opacity:!0,format:"rgb",rgbaString:!1,change:function(t,e){var o="rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")";console.log(o)},swatches:["rgba(154, 9, 173, 1)","rgba(240, 17, 17, 1)","rgba(0, 255, 21, 1)","rgba(15, 43, 255, 1)","rgba(255, 239, 13, 1)"],showSpeed:100}),$(y).minicolors("rgbaString"),$(y).change(function(t){$("option:selected",this);var o=this.value,a=this.name;n[a]=o;for(var l=0;l<r.length;l++)r[l].style.fill=n.mapColor,r[l].style.stroke=n.mapStrokeColor;for(var s=0;s<e.length;s++)e[s].style.fill=n.mapColor,e[s].style.stroke=n.mapStrokeColor;$(".map_settings_block").css("background-color",n.bodyBackgroundColor),$("#circle_example").css({border:n.pointsBorderWidth+"px solid "+n.mapPointsBorderColor,"background-color":n.mapPointsColor}),$(".routeExample").css("background-color",n.mapRouteColor),$(".wrap_map").css("background-color",n.bodyBackgroundColor),localStorage.setItem("Settings",JSON.stringify(n))})}),$(k).attr("checked",JSON.parse(t("checkboxState"))),$("#defaultOption").attr("checked",JSON.parse(t("defaultOption"))),$("#UserOption").attr("checked",JSON.parse(t("UserOption"))),$(k).is(":checked"))if($(".centered_form").show().css("display","flex"),$("#UserOption").is(":checked")){$(".additional_settings").show();var O=""+t("StartIcon"),N=document.getElementById("iconTest");O.length>0?($("#iconTest").attr("data",O),o(N)):$("#iconTest").attr("data","")}else $("#defaultOption").is(":checked")&&$(".additional_settings").hide();else $(".additional_settings").hide(),$(".centered_form").hide();$(k).on("click",function(){$(this).is(":checked")?(n.checkboxState="true",localStorage.setItem("Settings",JSON.stringify(n)),console.log(n),$(".centered_form").show().css("display","flex")):($(".centered_form").hide(),n.checkboxState="false",$(".additional_settings").hide(),localStorage.setItem("Settings",JSON.stringify(n)))}),$("#UserOption").on("click",function(){n.UserOption="true",n.defaultOption="false",localStorage.setItem("Settings",JSON.stringify(n)),$(".additional_settings").show();var e=document.getElementById("iconTest");$("#iconTest").attr("data",t("StartIcon")),o(e)}),$("#defaultOption").on("click",function(){n.UserOption="false",n.defaultOption="true",n.StartIcon="",localStorage.setItem("StartRouteIcon",JSON.stringify([])),localStorage.setItem("Settings",JSON.stringify(n)),$(".additional_settings").hide()}),$(".icon_gallery__item").on("click",function(){var t=$(this).attr("src");console.log(t);var e=document.getElementById("iconTest");$("#iconTest").attr("data",t),o(e),n.StartIcon=t,localStorage.setItem("Settings",JSON.stringify(n))})})}(o=new bezierEditor("bezier-canvas")).draw(),$("#clear").bind("click",function(){console.log(o.clearBezier()),$("#dataMap").attr("data",""),localStorage.clear(),o.draw(),window.location.reload()}),$("#redraw").bind("click",function(){o.draw(),Materialize.toast("Editor redrawn!",2e3)}),$("#screen").bind("click",function(){goFullScreen(),o.draw()}),$("#export").bind("click",function(){o.draw();var t=o.ReturnSavedPath();localStorage.setItem("SavedCurves",JSON.stringify(t));var e=JSON.parse(localStorage.getItem("path"));if(e){var a=o.exportBezier();e+=a=a.slice(1),localStorage.setItem("path",JSON.stringify(e)),console.log(a),console.log(e)}else{var r=o.exportBezier();localStorage.setItem("path",JSON.stringify(r))}console.log(styleProps),localStorage.setItem("mapStyleProperties",JSON.stringify(styleProps))});var o=new bezierEditor("bezier-canvas");$(".img_item").bind("click",function(){var t=$(this).attr("src"),o=document.getElementById("dataMap");$("#dataMap").attr("data",t),e(o),localStorage.setItem("map",JSON.stringify(t)),Materialize.toast("Map is selected!",2e3),$(".button-collapse").sideNav("hide")}),o.draw(),console.log(JSON.parse(localStorage.getItem("Settings")));var a=JSON.parse(localStorage.getItem("map"))||[];if(a){var r=document.getElementById("dataMap");$("#dataMap").attr("data",a),e(r);var n=JSON.parse(localStorage.getItem("mapStyleProperties"))||[];document.getElementById("mapbg");n&&$.each(n,function(t,e){$("#map_bg").css(t,e)})}}),$(document).ready(function(){$(".modal").modal(),$("select").material_select();var t=JSON.parse(localStorage.getItem("ProjectInfo"))||{projectName:"",projectDescription:""};$(".modal2").modal({dismissable:!1,ready:function(e,o){t&&($("#projectName").val(t.projectName),$("#projectDescription").val(t.projectDescription))},complete:function(){var e=$("#projectName").val(),o=$("#projectDescription").val();e.length>0&&o.length>0?(t.projectName=e,t.projectDescription=o):(t.projectName="",t.projectDescription=""),localStorage.setItem("ProjectInfo",JSON.stringify(t))}}),$(".button-collapse").sideNav({menuWidth:1200,edge:"left",closeOnClick:!0,draggable:!0}),$("#menu").on("click",function(){$(this).hasClass(".active")?($(this).removeClass("active"),$(".tap-target").tapTarget("close")):($(this).addClass("active"),$(".tap-target").tapTarget("open"))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRvcl9zY3JpcHQuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJnZXRTZXR0aW5nRnJvbVN0b3JhZ2UiLCJzZXR0aW5nIiwiU2V0dGluZ3NPYmplY3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibWFwQ29sb3IiLCJtYXBTdHJva2VDb2xvciIsIm1hcFBvaW50c0NvbG9yIiwibWFwUG9pbnRzQm9yZGVyQ29sb3IiLCJtYXBSb3V0ZUNvbG9yIiwiYm9keUJhY2tncm91bmRDb2xvciIsInJvdXRlQm9yZGVyV2lkdGgiLCJwb2ludHNSYWRpdXMiLCJwb2ludHNCb3JkZXJXaWR0aCIsImNvbnRlbnRXaWR0aCIsImNvbnRlbnRBbGlnbiIsImNoZWNrYm94U3RhdGUiLCJkZWZhdWx0T3B0aW9uIiwiVXNlck9wdGlvbiIsIlN0YXJ0SWNvbiIsIlJvdXRlU3RhcnRJY29uQ29sb3IiLCJSb3V0ZVN0YXJ0SWNvblNpemUiLCJsb2FkTWFwIiwibWFwX2NvbnRhaW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsb2FkSWNvbiIsImljb25fY29udGFpbmVyIiwic3ZnUm9vdCIsImNvbnRlbnREb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInBhdGhzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiWE1MU2VyaWFsaXplciIsImljb25PYmoiLCJnZXRFbGVtZW50QnlJZCIsImljb25QYXRoc0FycmF5IiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZmlsbCIsIlNldHRpbmdzT2JqIiwicGF0aERpciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiY2hhbmdlIiwiZWwiLCJ0aGlzIiwidmFsdWVTZWxlY3RlZCIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJ3aWR0aCIsImhlaWdodCIsInNldEF0dHJpYnV0ZSIsInN2Z0RvYyIsIlBhdGhzQXJyYXkiLCJzdHlsZVByb3BzIiwidHJhbnNmb3JtIiwic2NhbGVJbWciLCJtb3ZlTGVmdCIsIm1vdmVUb3AiLCJ0cmFuc2Zvcm1TdHJpbmciLCJTdHJpbmdWYWx1ZXMiLCJtYXRjaCIsIm1hcCIsInYiLCJwYXJzZUZsb2F0IiwiY3NzIiwib3B0aW9uc0NUTSIsInpvb20iLCJlIiwiZiIsImJpbmQiLCJNYXBDb2xvciIsIk1hcFN0cm9rZUNvbG9yIiwiTWFwUG9pbnRzQ29sb3IiLCJNYXBQb2ludHNCb3JkZXJDb2xvciIsIk1hcFJvdXRlQ29sb3IiLCJQYWdlQm9keUNvbG9yIiwiQ29sb3JDb2xsZWN0aW9uIiwiZGlzcGxheSIsInZhbCIsInN0cm9rZSIsImJhY2tncm91bmQtY29sb3IiLCJib3JkZXIiLCJSYW5nZUlucHV0cyIsIlJvdXRlU3RhcnRDaGVja2JveCIsIm1hcEZvclNldHRpbmdzIiwiY3VycmVudE1hcCIsImNoYW5nZWRNYXAiLCJjaXJjbGVzQXJyYXkiLCJyIiwib24iLCJwcm9wIiwiaWQiLCJtaW5pY29sb3JzIiwib3BhY2l0eSIsImZvcm1hdCIsInJnYmFTdHJpbmciLCJoc2wiLCJyZ2IiLCJnIiwiYiIsImEiLCJzd2F0Y2hlcyIsInNob3dTcGVlZCIsImoiLCJpcyIsInNob3ciLCJpY29uIiwiaWNvbl9jb250IiwiaGlkZSIsImljb25TUkMiLCJlZGl0b3IiLCJiZXppZXJFZGl0b3IiLCJkcmF3IiwiY2xlYXJCZXppZXIiLCJjbGVhciIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiTWF0ZXJpYWxpemUiLCJ0b2FzdCIsImdvRnVsbFNjcmVlbiIsIlBhdGhDdXJ2ZXMiLCJSZXR1cm5TYXZlZFBhdGgiLCJGaXJzdFJvdXRlIiwibmV3Um91dGUiLCJleHBvcnRCZXppZXIiLCJzbGljZSIsIkRyYXduUGF0aCIsInNyYyIsInN2Z01hcCIsInNpZGVOYXYiLCJzYXZlZE1hcCIsIldyYXBwZXJQcm9wcyIsImVhY2giLCJtb2RhbCIsIm1hdGVyaWFsX3NlbGVjdCIsInByb2plY3RJbmZvIiwicHJvamVjdE5hbWUiLCJwcm9qZWN0RGVzY3JpcHRpb24iLCJkaXNtaXNzYWJsZSIsInRyaWdnZXIiLCJjb21wbGV0ZSIsIk5hbWVJbnB1dCIsIkRlc2NyaXB0aW9uSW5wdXQiLCJtZW51V2lkdGgiLCJlZGdlIiwiY2xvc2VPbkNsaWNrIiwiZHJhZ2dhYmxlIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInRhcFRhcmdldCIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFBUUEsRUFBRUMsVUFBVUMsTUFBTSxXQUdkLFNBQVNDLEVBQXNCQyxHQUMzQixJQUFJQyxFQUFpQkMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxlQUNqREMsU0FBVSx5QkFDVkMsZUFBZ0IsbUJBQ2hCQyxlQUFnQixxQkFDaEJDLHFCQUFzQixtQkFDdEJDLGNBQWUsbUJBQ2ZDLG9CQUFxQix5QkFDckJDLGlCQUFrQixJQUNsQkMsYUFBYyxJQUNkQyxrQkFBbUIsSUFDbkJDLGFBQWMsS0FDZEMsYUFBYyxhQUNkQyxjQUFlLFFBQ2ZDLGNBQWUsUUFDZkMsV0FBWSxRQUNaQyxVQUFXLEdBQ1hDLG9CQUFxQixtQkFDckJDLG1CQUFvQixNQUl4QixHQUFJckIsRUFBZUQsR0FDZixPQUFPQyxFQUFlRCxHQXFGOUIsU0FBU3VCLEVBQVFDLEdBQ2JBLEVBQWNDLGlCQUFpQixPQUFRLFdBa2FuQyxTQUFTQyxFQUFTQyxHQUNkQSxFQUFlRixpQkFBaUIsT0FBUSxXQVNwQyxJQUFLLElBUERHLEVBRFNELEVBQWVFLGdCQUNQQyxnQkFDakJDLEVBQVFILEVBQVFJLHFCQUFxQixRQUNyQ0MsRUFBSSxJQUFJQyxjQUVSQyxFQUFVdEMsU0FBU3VDLGVBQWUsWUFFbENDLEtBQ0tDLEVBQUksRUFBR0EsRUFBSVAsRUFBTVEsT0FBUUQsSUFBSyxDQUNuQ1AsRUFBTU8sR0FBR0UsTUFBTUMsS0FBT0MsRUFBWXJCLG9CQUNsQyxJQUFJc0IsRUFBVVYsRUFBRVcsa0JBQWtCYixFQUFNTyxJQUN4Q08sUUFBUUMsSUFBSUgsR0FDWk4sRUFBZVUsS0FBS0osR0FH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RixJQUFJMEQsRUFBWUMsYUFDbEN0SixFQUFFLHVCQUF1QjJGLElBQUkwRCxFQUFZRSxzQkFJakRHLFNBQVUsV0FDTixJQUFJQyxFQUFZM0osRUFBRSxnQkFBZ0IyRixNQUM5QmlFLEVBQW1CNUosRUFBRSx1QkFBdUIyRixNQUM1Q2dFLEVBQVVoSCxPQUFTLEdBQUtpSCxFQUFpQmpILE9BQVMsR0FDbEQwRyxFQUFZQyxZQUFjSyxFQUMxQk4sRUFBWUUsbUJBQXFCSyxJQUVqQ1AsRUFBWUMsWUFBYyxHQUMxQkQsRUFBWUUsbUJBQXFCLElBRXJDL0ksYUFBYTRDLFFBQVEsY0FBZTlDLEtBQUsrQyxVQUFVZ0csT0FPM0RySixFQUFFLG9CQUFvQitJLFNBQ2xCYyxVQUFXLEtBQ1hDLEtBQU0sT0FDTkMsY0FBYyxFQUNkQyxXQUFXLElBR2ZoSyxFQUFFLFNBQVNzRyxHQUFHLFFBQVMsV0FDZHRHLEVBQUV3RCxNQUFNeUcsU0FBUyxZQUlsQmpLLEVBQUV3RCxNQUFNMEcsWUFBWSxVQUNwQmxLLEVBQUUsZUFBZW1LLFVBQVUsV0FKM0JuSyxFQUFFd0QsTUFBTTRHLFNBQVMsVUFDakJwSyxFQUFFLGVBQWVtSyxVQUFVIiwiZmlsZSI6ImVkaXRvcl9zY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNldHRpbmdGcm9tU3RvcmFnZShzZXR0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgU2V0dGluZ3NPYmplY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiU2V0dGluZ3NcIikpIHx8IHsgICAgICAvLyBnZXQgZWRpdG9yIHNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwQ29sb3I6IFwicmdiYSgyNTUsIDIwNCwgMTI4LCAxKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcFN0cm9rZUNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICAgICAgICAgICAgICBtYXBQb2ludHNDb2xvcjogXCJyZ2JhKDAsIDAsIDI1NSwgMSlcIixcclxuICAgICAgICAgICAgICAgICAgICBtYXBQb2ludHNCb3JkZXJDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwUm91dGVDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9keUJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI0MywgMjI5LCAyNDUsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVCb3JkZXJXaWR0aDogXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzUmFkaXVzOiBcIjhcIixcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHNCb3JkZXJXaWR0aDogXCIxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFdpZHRoOiBcIjUwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEFsaWduOiBcImZsZXgtc3RhcnRcIixcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveFN0YXRlOiBcImZhbHNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE9wdGlvbjogXCJmYWxzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFVzZXJPcHRpb246IFwiZmFsc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBTdGFydEljb246IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVTdGFydEljb25Db2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVTdGFydEljb25TaXplOiBcIjEwXCJcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTZXR0aW5nc09iamVjdFtzZXR0aW5nXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc09iamVjdFtzZXR0aW5nXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGVkaXRvciA9IG5ldyBiZXppZXJFZGl0b3IoXCJiZXppZXItY2FudmFzXCIpOyBcclxuICAgICAgICAgICAgZWRpdG9yLmRyYXcoKTsgLy8gZHJhdyBjYW52YXNcclxuXHJcblxyXG4gICAgICAgICAgICAkKCcjY2xlYXInKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAgICAgICAgICAgICAvL2NsZWFyIGNhbnZhcyBhbmQgbG9jYWxzdG9yYWdlXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZWRpdG9yLmNsZWFyQmV6aWVyKCkpO1xyXG4gICAgICAgICAgICAgICAgJChcIiNkYXRhTWFwXCIpLmF0dHIoXCJkYXRhXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjcmVkcmF3JykuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyAgICAgICAgICAvL3JlZHJhdyBjYW52YXNcclxuXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0VkaXRvciByZWRyYXduIScsIDIwMDApO1xyXG5cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICQoJyNzY3JlZW4nKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAgICAgICAgICAgIC8vIGZ1bGwgc2NyZWVuIHJlZ3ltZVxyXG4gICAgICAgICAgICAgICAgZ29GdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuZHJhdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgJCgnI2V4cG9ydCcpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHsgICAgICAgICAgICAgLy8gZXhwb3J0IHBhdGgsIHNhdmUgYWxsIHNldHRpbmcgdG8gbG9jYWxzdG9yYWdlIGFuZCBnbyB0byB0aGUgbmV4dCBwYWdlXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuZHJhdygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBQYXRoQ3VydmVzID0gZWRpdG9yLlJldHVyblNhdmVkUGF0aCgpOyAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTYXZlZEN1cnZlcycsIEpTT04uc3RyaW5naWZ5KFBhdGhDdXJ2ZXMpKTtcclxuICAgICAgICAgICAgICAgIHZhciBGaXJzdFJvdXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGF0aCcpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEZpcnN0Um91dGUpIHsgICAvL2NoZWNrIGlmIHBhdGggd2FzIGFscmVhZHkgZHJhd25cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Um91dGUgPSBlZGl0b3IuZXhwb3J0QmV6aWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Um91dGUgPSBuZXdSb3V0ZS5zbGljZSgxKTtcclxuICAgICAgICAgICAgICAgICAgICBGaXJzdFJvdXRlICs9IG5ld1JvdXRlOyAgLy8gaWYgcGF0aCB3YXMgcmVkcmF3biB0aGVuIGNvbm5lY3QgMiBwYXRoc1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXRoJywgSlNPTi5zdHJpbmdpZnkoRmlyc3RSb3V0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld1JvdXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhGaXJzdFJvdXRlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIERyYXduUGF0aCA9IGVkaXRvci5leHBvcnRCZXppZXIoKTsgLy9jb25zdHJ1Y3RvciBtZXRob2QsIHRvIGV4cG9ydCByb3V0ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGF0aCcsIEpTT04uc3RyaW5naWZ5KERyYXduUGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0eWxlUHJvcHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibWFwU3R5bGVQcm9wZXJ0aWVzXCIsIEpTT04uc3RyaW5naWZ5KHN0eWxlUHJvcHMpKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVkaXRvciA9IG5ldyBiZXppZXJFZGl0b3IoXCJiZXppZXItY2FudmFzXCIpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmltZ19pdGVtJykuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgIHZhciBzcmMgPSAkKHRoaXMpLmF0dHIoJ3NyYycpOyAgICAgICAgICAgICAgIC8vc2F2ZSBjaG9vc2VuIG1hcCB1cmxcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdmdNYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGFNYXBcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2RhdGFNYXBcIikuYXR0cihcImRhdGFcIiwgc3JjKTtcclxuICAgICAgICAgICAgICAgIGxvYWRNYXAoc3ZnTWFwKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtYXAnLCBKU09OLnN0cmluZ2lmeShzcmMpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ01hcCBpcyBzZWxlY3RlZCEnLCAyMDAwKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlZGl0b3IuZHJhdygpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNldHRpbmdzXCIpKSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBsb2FkTWFwKG1hcF9jb250YWluZXIpIHsgXHJcbiAgICAgICAgICAgICAgICBtYXBfY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkgeyAgICAgICAgICAgLy9sb2FkIGNob29zZW4gcGF0aFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdmdEb2MgPSBtYXBfY29udGFpbmVyLmNvbnRlbnREb2N1bWVudDsgLy9nZXQgdGhlIGlubmVyIERPTSBvZiBhbHBoYS5zdmdcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdmdEb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdmdSb290ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTWFwUGF0aHNHcm91cCA9IHN2Z1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJtYXBQYXRoc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgUGF0aHNBcnJheSA9IE1hcFBhdGhzR3JvdXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhQYXRoc0FycmF5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFNldHRpbmdzT2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNldHRpbmdzXCIpKSB8fCB7ICAvL3BhZ2Ugc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwQ29sb3I6IFwicmdiYSgyNTUsIDIwNCwgMTI4LCAxKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBTdHJva2VDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFBvaW50c0NvbG9yOiBcInJnYmEoMCwgMCwgMjU1LCAxKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBQb2ludHNCb3JkZXJDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFJvdXRlQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAxKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5QmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjQzLCAyMjksIDI0NSwgMSlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVCb3JkZXJXaWR0aDogXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1JhZGl1czogXCI4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c0JvcmRlcldpZHRoOiBcIjFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFdpZHRoOiBcIjUwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBbGlnbjogXCJmbGV4LXN0YXJ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94U3RhdGU6IFwiZmFsc2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE9wdGlvbjogXCJmYWxzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBVc2VyT3B0aW9uOiBcImZhbHNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0SWNvbjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVTdGFydEljb25Db2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlU3RhcnRJY29uU2l6ZTogXCIyXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIFdyYXBwZXJQcm9wcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21hcFN0eWxlUHJvcGVydGllcycpKSB8fCB7dHJhbnNmb3JtOiBcIlwifTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKFdyYXBwZXJQcm9wcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgJC5lYWNoKFdyYXBwZXJQcm9wcywgZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICQoTWFwUGF0aHNHcm91cCkuY3NzKHByb3AsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZVByb3BzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1hcFN0eWxlUHJvcGVydGllc1wiKSkgfHwge1xyXG4gICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwiXCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlSW1nID0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlTGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZVRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZUxlZnREZWZhdWx0ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlVG9wRGVmYXVsdCA9IDA7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBpZigoc3R5bGVQcm9wcy50cmFuc2Zvcm0pLmxlbmd0aCAhPSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIC8vIHNjYWxlSW1nID0gc3R5bGVQcm9wcy50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0cmluZyA9IChzdHlsZVByb3BzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzY2FsZUltZyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSAvWystXT9cXGQrKFxcLlxcZCspPy9nO1xyXG4gICAgICAgICAgICAgICAgdmFyIFN0cmluZ1ZhbHVlcyA9IHRyYW5zZm9ybVN0cmluZy5tYXRjaChyZWdleCkubWFwKGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2KTsgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFN0cmluZ1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2NhbGVJbWcgPSBTdHJpbmdWYWx1ZXNbMF07XHJcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdCA9IFN0cmluZ1ZhbHVlc1sxXSxcclxuICAgICAgICAgICAgICAgIG1vdmVUb3AgPSBTdHJpbmdWYWx1ZXNbMl07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggc2NhbGVJbWcsIG1vdmVMZWZ0LCBtb3ZlVG9wKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiI21hcF9iZ1wiKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wicHgsXCIgKyBtb3ZlVG9wKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZihzdHlsZVByb3BzLnRvcC5sZW5ndGggPiAwIHx8IHN0eWxlUHJvcHMubGVmdC5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vICAgICBtb3ZlTGVmdCA9IHBhcnNlSW50KHN0eWxlUHJvcHMubGVmdCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtb3ZlVG9wID0gcGFyc2VJbnQoc3R5bGVQcm9wcy50b3ApO1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2cobW92ZUxlZnQpO1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coc2NhbGVJbWcpO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW9uc0NUTSA9IHtcclxuICAgICAgICAgICAgICAgIHpvb206IDAsXHJcbiAgICAgICAgICAgICAgICBlOiAwLCBcclxuICAgICAgICAgICAgICAgIGY6IDBcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0eWxlUHJvcHMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJChcIiNwbHVzXCIpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7ICAgICAvL3pvb20gbWFwXHJcbiAgICAgICAgICAgICAgICBzY2FsZUltZyArPSAwLjE7XHJcbiAgICAgICAgICAgICAgICAkKCcjbWFwX2JnJykuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIrIG1vdmVMZWZ0ICtcInB4LFwiICsgbW92ZVRvcCsgXCJweClcIik7XHJcbiAgICAgICAgICAgICAgICBzdHlsZVByb3BzLnRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIrIG1vdmVMZWZ0ICtcIiAgICBcIiArIG1vdmVUb3ArIFwiKVwiO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHZhciBjdHggPSBlZGl0b3IuY3R4O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGN0eC50cmFuc2Zvcm0oc2NhbGVJbWcsIDAsIDAsIHNjYWxlSW1nLCBtb3ZlTGVmdCwgbW92ZVRvcCk7XHJcbiAgICAgICAgICAgICAgICAvLyBlZGl0b3IuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIiwgSlNPTi5zdHJpbmdpZnkoc3R5bGVQcm9wcykpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTcmVlbkNUTVwiLCBKU09OLnN0cmluZ2lmeShvcHRpb25zQ1RNKSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnem9vbScsIEpTT04uc3RyaW5naWZ5KHNjYWxlSW1nKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiI21pbnVzXCIpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNjYWxlSW1nIC09IDAuMztcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZUltZyA8IDEuMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlSW1nID0gMS4wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQoJyNtYXBfYmcnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wicHgsXCIgKyBtb3ZlVG9wKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wiIFwiICsgbW92ZVRvcCsgXCIpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vICQoJ2NhbnZhcycpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlKFwiICsgc2NhbGVJbWcgKyBcIikgdHJhbnNsYXRlKFwiKyBtb3ZlTGVmdCArXCIgXCIgKyBtb3ZlVG9wKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnem9vbScsIEpTT04uc3RyaW5naWZ5KHNjYWxlSW1nKSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlNyZWVuQ1RNXCIsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnNDVE0pKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibWFwU3R5bGVQcm9wZXJ0aWVzXCIsIEpTT04uc3RyaW5naWZ5KHN0eWxlUHJvcHMpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgJChcIiNtb3ZlTGVmdFwiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAvLyBtb3ZlIG1hcCBsZWZ0XHJcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdCArPSAxMDtcclxuICAgICAgICAgICAgICAgICQoJyNtYXBfYmcnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wicHgsXCIgKyBtb3ZlVG9wKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wiIFwiICsgbW92ZVRvcCsgXCIpXCI7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU3JlZW5DVE1cIiwgSlNPTi5zdHJpbmdpZnkob3B0aW9uc0NUTSkpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIiwgSlNPTi5zdHJpbmdpZnkoc3R5bGVQcm9wcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNtb3ZlUmlnaHRcIikuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyAgIC8vIG1vdmUgbWFwIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdCAtPSAxMDtcclxuICAgICAgICAgICAgICAgICQoJyNtYXBfYmcnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wicHgsXCIgKyBtb3ZlVG9wKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wiIFwiICsgbW92ZVRvcCsgXCIpXCI7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU3JlZW5DVE1cIiwgSlNPTi5zdHJpbmdpZnkob3B0aW9uc0NUTSkpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIiwgSlNPTi5zdHJpbmdpZnkoc3R5bGVQcm9wcykpO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICQoXCIjbW92ZVRvcFwiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAgIC8vIG1vdmUgbWFwIHRvcFxyXG4gICAgICAgICAgICAgICAgbW92ZVRvcCArPSAxMDtcclxuICAgICAgICAgICAgICAgICQoJyNtYXBfYmcnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wicHgsXCIgKyBtb3ZlVG9wKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgbW92ZUxlZnQgK1wiIFwiICsgbW92ZVRvcCsgXCIpXCI7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU3JlZW5DVE1cIiwgSlNPTi5zdHJpbmdpZnkob3B0aW9uc0NUTSkpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIiwgSlNPTi5zdHJpbmdpZnkoc3R5bGVQcm9wcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNtb3ZlQm90dG9tXCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHsgLy8gbW92ZSBtYXAgYm90dG9tXHJcbiAgICAgICAgICAgICAgICBtb3ZlVG9wIC09IDEwO1xyXG4gICAgICAgICAgICAgICAgJCgnI21hcF9iZycpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlKFwiICsgc2NhbGVJbWcgKyBcIikgdHJhbnNsYXRlKFwiKyBtb3ZlTGVmdCArXCJweCxcIiArIG1vdmVUb3ArIFwicHgpXCIpO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVQcm9wcy50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGVJbWcgKyBcIikgdHJhbnNsYXRlKFwiKyBtb3ZlTGVmdCArXCIgXCIgKyBtb3ZlVG9wKyBcIilcIjtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTcmVlbkNUTVwiLCBKU09OLnN0cmluZ2lmeShvcHRpb25zQ1RNKSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1hcFN0eWxlUHJvcGVydGllc1wiLCBKU09OLnN0cmluZ2lmeShzdHlsZVByb3BzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE1hcENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBDb2xvclBpY2tlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTWFwU3Ryb2tlQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFN0cm9rZUNvbG9yUGlja2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBNYXBQb2ludHNDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwUG9pbnRzQ29sb3JQaWNrZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE1hcFBvaW50c0JvcmRlckNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBQb2ludHNCb3JkZXJDb2xvclBpY2tlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTWFwUm91dGVDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwUm91dGVDb2xvclBpY2tlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgUGFnZUJvZHlDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9keUNvbG9yUGlja2VyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgQ29sb3JDb2xsZWN0aW9uID0gJChcIi5jb2xvclBpY2tlclwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yX2NoYW5nZSA9ICQoXCIjY29sb3JfY2hhbmdlXCIpO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBNYXBDb2xvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIE1hcFN0cm9rZUNvbG9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgTWFwUG9pbnRzQ29sb3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgICAgICBNYXBQb2ludHNCb3JkZXJDb2xvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIE1hcFJvdXRlQ29sb3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgICAgICBQYWdlQm9keUNvbG9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE1hcENvbG9yLnZhbHVlID0gZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgTWFwU3Ryb2tlQ29sb3IudmFsdWUgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBTdHJva2VDb2xvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICBNYXBQb2ludHNDb2xvci52YWx1ZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0NvbG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1hcFBvaW50c0JvcmRlckNvbG9yLnZhbHVlID0gZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgTWFwUm91dGVDb2xvci52YWx1ZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFJvdXRlQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZUJvZHlDb2xvci52YWx1ZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcImJvZHlCYWNrZ3JvdW5kQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNQYXRoU3RhcnRJY29uQ29sb3JcIikudmFsKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uQ29sb3JcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdDYnKS52YWx1ZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInBvaW50c1JhZGl1c1wiKSAqIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aHNBcnJheS5sZW5ndGg7IGkrKykgeyAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2UgbWFwIGNvbG9yIGFuZCBtYXAgc3Ryb2tlIGNvbG9yIGR1ZSB0byBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLmZpbGwgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBDb2xvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGF0aHNBcnJheVtpXS5zdHlsZS5zdHJva2UgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBTdHJva2VDb2xvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCcjY2lyY2xlX2V4YW1wbGUnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicG9pbnRzUmFkaXVzXCIpICogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNSYWRpdXNcIikgKiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtY29sb3JcIjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicG9pbnRzQm9yZGVyV2lkdGhcIikgKyBcInNvbGlkXCIgKyBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNCb3JkZXJDb2xvclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKFwiLnJvdXRlRXhhbXBsZVwiKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInJvdXRlQm9yZGVyV2lkdGhcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1jb2xvclwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBSb3V0ZUNvbG9yXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjaWNvblRlc3RcIikuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvblNpemVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBSYW5nZUlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPXJhbmdlXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgUm91dGVTdGFydENoZWNrYm94ID0gJChcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcEZvclNldHRpbmdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBTZXR0aW5nc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE1hcCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYXBcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjbWFwU2V0dGluZ3NcIikuYXR0cihcImRhdGFcIiwgY3VycmVudE1hcCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBtYXBGb3JTZXR0aW5ncy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN2Z0RvYyA9IG1hcEZvclNldHRpbmdzLmNvbnRlbnREb2N1bWVudDsgLy9nZXQgdGhlIGlubmVyIERPTSBvZiBhbHBoYS5zdmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN2Z1Jvb3QgPSBzdmdEb2MuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZE1hcCA9IHN2Z1Jvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKTs7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5tYXBfc2V0dGluZ3NfYmxvY2tcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJib2R5QmFja2dyb3VuZENvbG9yXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlZE1hcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZE1hcFtpXS5zdHlsZS5maWxsID0gZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkTWFwW2ldLnN0eWxlLnN0cm9rZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFN0cm9rZUNvbG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJChSYW5nZUlucHV0cykuY2hhbmdlKGZ1bmN0aW9uKGVsKSB7ICAgICAgICAgICAgICAgICAgLy91c2VyIHJhbmdlIHNldHRpbmdzIGNob2ljZSB2aXp1YWxpemF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uU2VsZWN0ZWQgPSAkKFwib3B0aW9uOnNlbGVjdGVkXCIsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlU2VsZWN0ZWQgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09ialtuYW1lXSA9IHZhbHVlU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNpcmNsZXNBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NpcmNsZXNDb29yZHMnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaXJjbGVzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGVzQXJyYXlbaV0uciA9IFNldHRpbmdzT2JqLnBvaW50c1JhZGl1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjY2lyY2xlX2V4YW1wbGUnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBTZXR0aW5nc09iai5wb2ludHNSYWRpdXMgKiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogU2V0dGluZ3NPYmoucG9pbnRzUmFkaXVzICogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFNldHRpbmdzT2JqLnBvaW50c0JvcmRlcldpZHRoICsgXCJweCBzb2xpZCBcIiArIFNldHRpbmdzT2JqLm1hcFBvaW50c0JvcmRlckNvbG9yLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIucm91dGVFeGFtcGxlXCIpLmNzcyhcImhlaWdodFwiLCBTZXR0aW5nc09iai5yb3V0ZUJvcmRlcldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuY29udGVudF9ibG9ja1wiKS5jc3MoXCJ3aWR0aFwiLCBTZXR0aW5nc09iai5jb250ZW50V2lkdGggKyBcIiVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NpcmNsZXNDb29yZHMnLCBKU09OLnN0cmluZ2lmeShjaXJjbGVzQXJyYXkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSA9IGNvbnRlbnRBbGlnbl0nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyAgICAgICAgLy9jaG9vc2UgdGV4dCBhbGlnbiBvbiAzcmQgc3RlcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRSYWRpbyA9ICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsaWduQ2xhc3MgPSBjaGVja2VkUmFkaW9bMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy50ZXN0X2Jsb2NrJykuY3NzKFwianVzdGlmeS1jb250ZW50XCIsICQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NPYmouY29udGVudEFsaWduID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoQ29sb3JDb2xsZWN0aW9uKS5taW5pY29sb3JzKHsgICAgIC8vanF1ZXJ5LW1pbmljb2xvcnMgcGx1Z2luIHNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcInJnYlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmdiYVN0cmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKGhzbCwgcmdiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJnYmFTdHJpbmcgPSAncmdiYSgnICsgcmdiLnIgKyAnLCAnICsgcmdiLmcgKyAnLCAnICsgcmdiLmIgKyAnLCAnICsgcmdiLmEgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmdiYVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dhdGNoZXM6IFsncmdiYSgxNTQsIDksIDE3MywgMSknLCdyZ2JhKDI0MCwgMTcsIDE3LCAxKScsJ3JnYmEoMCwgMjU1LCAyMSwgMSknLCdyZ2JhKDE1LCA0MywgMjU1LCAxKScsJ3JnYmEoMjU1LCAyMzksIDEzLCAxKSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NwZWVkOiAxMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJChDb2xvckNvbGxlY3Rpb24pLm1pbmljb2xvcnMoXCJyZ2JhU3RyaW5nXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJChDb2xvckNvbGxlY3Rpb24pLmNoYW5nZShmdW5jdGlvbihlbCkgeyAgICAgICAgICAgICAgICAgICAgLy91c2VyIGNvbG9yIHNldHRpbmdzIGNob2ljZSB2aXp1YWxpemF0aW9uIGFuZCBzYXZpbmcgdG8gbG9jYWxzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uU2VsZWN0ZWQgPSAkKFwib3B0aW9uOnNlbGVjdGVkXCIsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlU2VsZWN0ZWQgPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzT2JqW25hbWVdID0gdmFsdWVTZWxlY3RlZDtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXRoc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF0aHNBcnJheVtpXS5zdHlsZS5maWxsID0gU2V0dGluZ3NPYmoubWFwQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF0aHNBcnJheVtpXS5zdHlsZS5zdHJva2UgPSBTZXR0aW5nc09iai5tYXBTdHJva2VDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hhbmdlZE1hcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRNYXBbal0uc3R5bGUuZmlsbCA9IFNldHRpbmdzT2JqLm1hcENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRNYXBbal0uc3R5bGUuc3Ryb2tlID0gU2V0dGluZ3NPYmoubWFwU3Ryb2tlQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLm1hcF9zZXR0aW5nc19ibG9ja1wiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIFNldHRpbmdzT2JqLmJvZHlCYWNrZ3JvdW5kQ29sb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjaXJjbGVfZXhhbXBsZScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIlwiICsgU2V0dGluZ3NPYmoucG9pbnRzQm9yZGVyV2lkdGggKyBcInB4IHNvbGlkIFwiICsgU2V0dGluZ3NPYmoubWFwUG9pbnRzQm9yZGVyQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFNldHRpbmdzT2JqLm1hcFBvaW50c0NvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIucm91dGVFeGFtcGxlXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgU2V0dGluZ3NPYmoubWFwUm91dGVDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLndyYXBfbWFwXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgU2V0dGluZ3NPYmouYm9keUJhY2tncm91bmRDb2xvcik7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoUm91dGVTdGFydENoZWNrYm94KS5hdHRyKFwiY2hlY2tlZFwiLCBKU09OLnBhcnNlKGdldFNldHRpbmdGcm9tU3RvcmFnZShcImNoZWNrYm94U3RhdGVcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI2RlZmF1bHRPcHRpb25cIikuYXR0cihcImNoZWNrZWRcIiwgSlNPTi5wYXJzZShnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJkZWZhdWx0T3B0aW9uXCIpKSk7ICAgICAgIC8vZGVmYXVsdCBSb3V0ZSBTdGFydCBzdHlsZVxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjVXNlck9wdGlvblwiKS5hdHRyKFwiY2hlY2tlZFwiLCBKU09OLnBhcnNlKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlVzZXJPcHRpb25cIikpKTsgICAgICAgICAgICAgLy9Vc2VyJ3MgY2hvaWNlIG9mIFJvdXRlIFN0YXJ0IHN0eWxlXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoUm91dGVTdGFydENoZWNrYm94KS5pcyhcIjpjaGVja2VkXCIpKSB7ICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5jZW50ZXJlZF9mb3JtXCIpLnNob3coKS5jc3MoJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkKFwiI1VzZXJPcHRpb25cIikuaXMoXCI6Y2hlY2tlZFwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuYWRkaXRpb25hbF9zZXR0aW5nc1wiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IFwiXCIgKyBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJTdGFydEljb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbl9jb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpY29uVGVzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNpY29uVGVzdFwiKS5hdHRyKFwiZGF0YVwiLCBpY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkSWNvbihpY29uX2NvbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2ljb25UZXN0XCIpLmF0dHIoXCJkYXRhXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoXCIjZGVmYXVsdE9wdGlvblwiKS5pcyhcIjpjaGVja2VkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmFkZGl0aW9uYWxfc2V0dGluZ3NcIikuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuYWRkaXRpb25hbF9zZXR0aW5nc1wiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuY2VudGVyZWRfZm9ybVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoUm91dGVTdGFydENoZWNrYm94KS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5jaGVja2JveFN0YXRlID0gXCJ0cnVlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnU2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShTZXR0aW5nc09iaikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coU2V0dGluZ3NPYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5jZW50ZXJlZF9mb3JtXCIpLnNob3coKS5jc3MoJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuY2VudGVyZWRfZm9ybVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5jaGVja2JveFN0YXRlID0gXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5hZGRpdGlvbmFsX3NldHRpbmdzXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNVc2VyT3B0aW9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAgICAgICAgICAvL2Nob29zZSB1c2VyIG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5Vc2VyT3B0aW9uID0gXCJ0cnVlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzT2JqLmRlZmF1bHRPcHRpb24gPSBcImZhbHNlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU2V0dGluZ3NcIiwgSlNPTi5zdHJpbmdpZnkoU2V0dGluZ3NPYmopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5hZGRpdGlvbmFsX3NldHRpbmdzXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljb25fY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpY29uVGVzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNpY29uVGVzdFwiKS5hdHRyKFwiZGF0YVwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJTdGFydEljb25cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkSWNvbihpY29uX2NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNkZWZhdWx0T3B0aW9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7ICAgICAgICAvL2Nob29zZSBkZWZhdWx0IG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5Vc2VyT3B0aW9uID0gXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5kZWZhdWx0T3B0aW9uID0gXCJ0cnVlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc09iai5TdGFydEljb24gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlN0YXJ0Um91dGVJY29uXCIsIEpTT04uc3RyaW5naWZ5KFtdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU2V0dGluZ3NcIiwgSlNPTi5zdHJpbmdpZnkoU2V0dGluZ3NPYmopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5hZGRpdGlvbmFsX3NldHRpbmdzXCIpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5pY29uX2dhbGxlcnlfX2l0ZW1cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHsgICAgICAgLy9jaG9vc2UgaWNvbiBvZiBSb3V0ZSBTdGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvblNSQyA9ICQodGhpcykuYXR0cihcInNyY1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWNvblNSQyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY29uX2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaWNvblRlc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjaWNvblRlc3RcIikuYXR0cihcImRhdGFcIiwgaWNvblNSQyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRJY29uKGljb25fY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NPYmouU3RhcnRJY29uID0gaWNvblNSQztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTZXR0aW5nc1wiLCBKU09OLnN0cmluZ2lmeShTZXR0aW5nc09iaikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2FkSWNvbihpY29uX2NvbnRhaW5lcikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBpY29uIHRvIHNob3cgZXhhbXBsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdmdEb2MgPSBpY29uX2NvbnRhaW5lci5jb250ZW50RG9jdW1lbnQ7IC8vZ2V0IHRoZSBpbm5lciBET00gb2YgYWxwaGEuc3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ZnUm9vdCA9IHN2Z0RvYy5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aHMgPSBzdmdSb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGF0aFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbk9iaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaWNvblRlc3RcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljb25QYXRoc0FycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHNbaV0uc3R5bGUuZmlsbCA9IFNldHRpbmdzT2JqLlJvdXRlU3RhcnRJY29uQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGhEaXIgPSBzLnNlcmlhbGl6ZVRvU3RyaW5nKHBhdGhzW2ldKTsgICAgICAgIC8vY29udmVydCBodG1sIGVsZW1lbnQgdG8gc3RyaW5nIHdpdGggWE1MU2VyaWFsaXplclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhdGhEaXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25QYXRoc0FycmF5LnB1c2gocGF0aERpcik7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWNvblBhdGhzQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTdGFydFJvdXRlSWNvblwiLCBKU09OLnN0cmluZ2lmeShpY29uUGF0aHNBcnJheSkpOyAgICAgICAgIC8vIHNhdmUgcm91dGUgc3RhcnQgaWNvbiB0byBsb2NhbHN0b3JhZ2Ugc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPVJvdXRlU3RhcnRJY29uQ29sb3JdXCIpLmNoYW5nZShmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25TZWxlY3RlZCA9ICQoXCJvcHRpb246c2VsZWN0ZWRcIiwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlU2VsZWN0ZWQgPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NPYmpbbmFtZV0gPSB2YWx1ZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHNbaV0uc3R5bGUuZmlsbCA9IFNldHRpbmdzT2JqLlJvdXRlU3RhcnRJY29uQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlNldHRpbmdzXCIsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFNldHRpbmdzT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lID0gUm91dGVTdGFydEljb25TaXplXVwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7ICAgICAgLy8gdXNlciBjaG9pY2Ugb2Ygcm91dGUgc3RhcnQgaWNvbiBzaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvblNlbGVjdGVkID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVTZWxlY3RlZCA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NPYmpbbmFtZV0gPSB2YWx1ZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjaWNvblRlc3RcIikuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBTZXR0aW5nc09iai5Sb3V0ZVN0YXJ0SWNvblNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogU2V0dGluZ3NPYmouUm91dGVTdGFydEljb25TaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnUm9vdC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCAkKGljb25PYmopLmF0dHIoXCJ3aWR0aFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnUm9vdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgJChpY29uT2JqKS5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdmdSb290KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhTZXR0aW5nc09iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBzYXZlZE1hcCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21hcCcpKSB8fCBbXTsgLy8gZ2V0IG1hcCBmcm9tIGxzIGlmIGl0IGV4aXN0c1xyXG5cclxuICAgICAgICAgICAgaWYgKHNhdmVkTWFwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3ZnTWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRhTWFwXCIpO1xyXG4gICAgICAgICAgICAgICAgJChcIiNkYXRhTWFwXCIpLmF0dHIoXCJkYXRhXCIsIHNhdmVkTWFwKTtcclxuICAgICAgICAgICAgICAgIGxvYWRNYXAoc3ZnTWFwKTsgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBtYXAgaWYgaXQncyBzYXZlZCBpbiBsb2NhbHN0b3JhZ2VcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgV3JhcHBlclByb3BzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWFwU3R5bGVQcm9wZXJ0aWVzJykpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcEJnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBiZ1wiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFdyYXBwZXJQcm9wcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goV3JhcHBlclByb3BzLCBmdW5jdGlvbihwcm9wLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI21hcF9iZ1wiKS5jc3MocHJvcCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgeyAvL01hdGVyaWFsaXplLmpzIHBsdWdpbnNcclxuICAgICAgICAgICAgJCgnLm1vZGFsJykubW9kYWwoKTtcclxuICAgICAgICAgICAgJCgnc2VsZWN0JykubWF0ZXJpYWxfc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvamVjdEluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdEluZm9cIikpIHx8IHtcclxuICAgICAgICAgICAgICAgIHByb2plY3ROYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcHJvamVjdERlc2NyaXB0aW9uOiBcIlwiXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkKCcubW9kYWwyJykubW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgZGlzbWlzc2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVhZHk6IGZ1bmN0aW9uKG1vZGFsLCB0cmlnZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2plY3RJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcHJvamVjdE5hbWVcIikudmFsKHByb2plY3RJbmZvLnByb2plY3ROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwcm9qZWN0RGVzY3JpcHRpb25cIikudmFsKHByb2plY3RJbmZvLnByb2plY3REZXNjcmlwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTmFtZUlucHV0ID0gJChcIiNwcm9qZWN0TmFtZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgRGVzY3JpcHRpb25JbnB1dCA9ICQoXCIjcHJvamVjdERlc2NyaXB0aW9uXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChOYW1lSW5wdXQubGVuZ3RoID4gMCAmJiBEZXNjcmlwdGlvbklucHV0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdEluZm8ucHJvamVjdE5hbWUgPSBOYW1lSW5wdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJbmZvLnByb2plY3REZXNjcmlwdGlvbiA9IERlc2NyaXB0aW9uSW5wdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdEluZm8ucHJvamVjdE5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SW5mby5wcm9qZWN0RGVzY3JpcHRpb24gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RJbmZvXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RJbmZvKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoe1xyXG4gICAgICAgICAgICAgICAgbWVudVdpZHRoOiAxMjAwLFxyXG4gICAgICAgICAgICAgICAgZWRnZTogJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJChcIiNtZW51XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJy5hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnRhcC10YXJnZXQnKS50YXBUYXJnZXQoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudGFwLXRhcmdldCcpLnRhcFRhcmdldCgnY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIH0pOyJdfQ==
