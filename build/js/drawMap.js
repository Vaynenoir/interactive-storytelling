$(document).ready(function(){function t(t){var e=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"100",contentAlign:"flex-start",checkboxState:"false",defaultOption:"false",UserOption:"false",StartIcon:"",RouteStartIconColor:"rgba(0, 0, 0, 1)",RouteStartIconSize:"8"};if(e[t])return e[t]}function e(t,e){return t.id-e.id}function o(t,e){return t.pointId-e.pointId}$("ul.tabs").tabs("select_tab","tab_2"),$("#menu").on("click",function(){$(this).hasClass(".active")?($(this).removeClass("active"),$(".tap-target").tapTarget("close")):($(this).addClass("active"),$(".tap-target").tapTarget("open"))}),$(".button-collapse").sideNav({menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0,onOpen:function(){},onClose:function(){$("#slide-out").css("transform","translateX(-100%)"),$("div").remove("#sidenav-overlay"),$(".button-collapse").sideNav("hide"),$("#slide-out").css("transform","translateX(-100%)"),console.log("kek")}}),$(".collapsible").collapsible(),$(".side-nav").resizable({handles:"e",maxWidth:1200,minWidth:300});var a=document.getElementById("map"),n=JSON.parse(localStorage.getItem("map"));$("#map").attr("data",n),a.addEventListener("load",function(){for(var n=a.contentDocument,r=n.documentElement,l=r.getElementById("mapPaths").getElementsByTagName("path"),s=(JSON.parse(localStorage.getItem("SavedMapColors")),0);s<l.length;s++)l[s].style.fill=t("mapColor"),l[s].style.stroke=t("mapStrokeColor");var i=JSON.parse(localStorage.getItem("path"));if(i){var c=document.createElementNS("http://www.w3.org/2000/svg","path");$(c).attr("d",i),$(c).attr("fill","transparent"),$(c).attr("stroke",t("mapRouteColor")),$(c).attr("stroke-width",t("routeBorderWidth")),$(c).attr("stroke-linecap","round")}Snap.plugin(function(t,e,o,a){o.prototype.circlePath=function(t,e,o){var a="M"+t+","+e;return a+="m"+-o+",0",a+="a"+o+","+o+" 0 1,0 "+2*o+",0",a+="a"+o+","+o+" 0 1,0 "+-2*o+",0",this.path(a,t,e)}});var p=document.createElementNS("http://www.w3.org/2000/svg","g");p.id="pathGroup",p.append(c),r.append(p);var d=Snap(p),g=JSON.parse(localStorage.getItem("circlesCoords")),m=c.getTotalLength(),h=(JSON.parse(localStorage.getItem("StartRouteIcon")),JSON.parse(localStorage.getItem("StartRouteIcon")));console.log(h);var f=(new DOMParser).parseFromString(h,"text/xml");console.log(f.documentElement);var u=f.documentElement,v=$(u).attr("data-offset-x"),S=$(u).attr("data-offset-y"),I=$(u).attr("data-scale"),y=document.createElementNS("http://www.w3.org/2000/svg","g");"true"==t("UserOption")&&t("StartIcon").length>0&&($(u).attr({fill:t("RouteStartIconColor"),transform:I}),console.log(u)),$(y).attr("transform","translate("+(c.getPointAtLength(1).x-t("RouteStartIconSize")/v)+" "+(c.getPointAtLength(1).y-t("RouteStartIconSize")/S)+") scale("+t("RouteStartIconSize")/100+")"),y.append(u),r.append(y);for(var b=[],N=(JSON.parse(localStorage.getItem("PointsContent")),0);N<g.length;N++)b[N]=g[N];var C=1;for(s=0;s<m;s++)for(var k=(U=c.getPointAtLength(s)).x,E=U.y,w=0;w<b.length;w++)if(Math.abs(Math.round(k-b[w].cx))<=8&&Math.abs(Math.round(E-b[w].cy))<=8){for(var x=0;x<g.length;x++)Math.abs(Math.round(g[x].cx-b[w].cx))<=4&&Math.abs(Math.round(g[x].cy-b[w].cy))<=4&&(g[x].id=C++);b.splice(w,1)}g.sort(e),localStorage.setItem("circlesCoords",JSON.stringify(g));g=JSON.parse(localStorage.getItem("circlesCoords"));var B=[];$.each(g,function(e,o){var a={cx:0,cy:0,r:1},n=d.circlePath(this.cx,this.cy,this.r).attr({fill:t("mapPointsColor"),stroke:t("mapPointsBorderColor"),"stroke-width":t("pointsBorderWidth"),id:o.id,"data-time":o.time}),r=Snap.path.intersection(n,$(c).attr("d"));0==r.length?(alert("Please, return to the previous step and draw points right on the route line"),document.location.replace("http://127.0.0.1:8080/")):(a.cx=r[0].x,a.cy=r[0].y),B.push(a),r.forEach(function(t){d.circle(t.x,t.y,1)}),localStorage.setItem("points",JSON.stringify(B))});var P=n.getElementsByTagName("circle");for(s=0;s<P.length;s++)P[s].style.fill="transparent";if("true"==t("checkboxState")&&"true"==t("defaultOption")){var O=document.createElementNS("http://www.w3.org/2000/svg","circle");$(O).attr({cx:c.getPointAtLength(1).x,cy:c.getPointAtLength(1).y,r:t("pointsRadius"),stroke:t("mapPointsBorderColor"),fill:t("mapPointsColor"),"stroke-width":t("pointsBorderWidth")}),console.log($(O)),r.append(O)}if(null!=localStorage.getItem("PointsContent"))var z=JSON.parse(localStorage.getItem("PointsContent"));else z=[];for(s=0;s<g.length;s++){var M=n.getElementById(g[s].id),R=document.createElementNS("http://www.w3.org/2000/svg","g"),J=document.createElementNS("http://www.w3.org/2000/svg","text");$(J).attr({x:g[s].cx,y:g[s].cy+20,"font-size":12,"font-style":"italic",fill:"#ccccccc",class:"cityName"}),R.append(M),R.append(J),r.append(R);var L=g[s].time;for(w=0;w<z.length;w++){var T=z[w].data;if(z[w].pointId==L){z[w].pointId;if(0!=T.length){var W=n.getElementById(g[s].id),A=$(W).parent().find("text");console.log(A),z[w].cityName&&(console.log(z[w].cityName),$(A).text(z[w].cityName)),console.log(g[s].id),$(W).css("fill","#990033")}}}$(M).addClass("button-collapse"),$(M).attr("data-activates","slide-out"),$(M).attr("href","#"),M.style.cursor="pointer",$(M).mouseenter(function(){$(this).css("transition","0.5s"),$(this).css("stroke-width","6px"),$(this).css("stroke",t("mapPointsBorderColor"))}).mouseout(function(){$(this).css("transition","0.5s"),$(this).css("stroke-width","3px"),$(this).css("stroke",t("mapPointsBorderColor"))});var D={zoom:100,top:0,bottom:0,left:0,right:0};console.log(z);var F=JSON.parse(localStorage.getItem("mapStyleProperties"))||{};F.top=parseInt(F.top),F.left=parseInt(F.left),console.log(F.top,F.left),M.addEventListener("click",function(){$(".button-collapse").sideNav("show"),$(".button-collapse").off("click").sideNav();var e=parseInt(this.id),a=$(this).attr("data-time");document.getElementById("pointIndex").innerHTML=e;var n=this,r=$(this).attr("data-time"),l=JSON.parse(localStorage.getItem("PointsContent"))||[];if(l[e-1])console.log(l[e-1].cityName),s=l[e-1].zoom,F.top=l[e-1].top,F.left=l[e-1].left;else{var s=100;F.top=0,F.left=0,$("#pointName").html(""),$(".mapbg").animate({zoom:s+"%",top:F.top+"%",left:F.left+"%"})}if(D.zoom=s,D.top=F.top,D.left=F.left,$("#plus").bind("click",function(){s+=3,D.zoom=s,$(".mapbg").css("zoom",s+"%")}),$("#minus").bind("click",function(){(s-=3)<=100&&(s=100),D.zoom=s,$(".mapbg").css("zoom",s+"%")}),$("#moveLeft").bind("click",function(){F.left+=2,D.left=F.left,$(".mapbg").css("left",F.left+"%")}),$("#moveRight").bind("click",function(){F.left-=2,D.left=F.left,$(".mapbg").css("left",F.left+"%")}),$("#moveTop").bind("click",function(){F.top+=2,D.top=F.top,$(".mapbg").css("top",F.top+"%")}),$("#moveBottom").bind("click",function(){F.top-=2,D.top=F.top,$(".mapbg").css("top",F.top+"%")}),null!=localStorage.getItem("PointsContent")){for(var i,c=0;c<l.length;c++){var p=l[c].pointId==a;if(l[c].pointId==a){$("#pointZoom").val(l[c].zoom),$("#pointTop").val(l[c].top),$("#pointBottom").val(l[c].bottom),$("#pointLeft").val(l[c].left),$("#pointRight").val(l[c].right),$(".mapbg").animate({zoom:l[c].zoom+"%",top:l[c].top+"%",left:l[c].left+"%"});var d=l[c].cityName}p&&(i=l[c].data)}$("#pointName").val(d),editor.setData(i)}document.getElementById("SavePointContent").onclick=function(){var e={pointId:0,cityName:"",zoom:D.zoom,top:D.top,left:D.left,data:""},a=(parseInt(document.getElementById("pointZoom").value),parseInt(document.getElementById("pointTop").value),parseInt(document.getElementById("pointBottom").value),parseInt(document.getElementById("pointLeft").value),parseInt(document.getElementById("pointRight").value),$("#pointName").val());e.pointId=r,e.cityName=a,e.data=editor.getData();for(var l=0;l<z.length;l++)z[l].pointId==r&&z.splice(l,1);if(0==e.data.length)Materialize.toast("No data in point!",2e3);else{console.log(e),z.push(e);var s=$(n).parent().find("text");$(s).text(a),Materialize.toast("Your data is saved!",2e3)}z.sort(o),localStorage.setItem("PointsContent",JSON.stringify(z));var i=$("#sidenav-overlay");$(i).css("background-color","none"),$(i).remove(),e.data.length>0?$(n).css("fill","#990033"):0==e.data.length&&$(n).css("fill",t("mapPointsColor")),$(".button-collapse").sideNav("hide")}})}m=c.getTotalLength();var H=[];for(s=0;s<m;s++){var U;for(k=(U=c.getPointAtLength(s)).x,E=U.y,w=0;w<B.length;w++)Math.abs(Math.round(k-B[w].cx))<=0&&Math.abs(Math.round(E-B[w].cy))<=0&&H.push(s)}if(H.length!=B.length)for(s=0;s<H.length;s++)H[s+1]-H[s]==1&&H.splice(s,1);localStorage.setItem("stopsAtLength",JSON.stringify(H)),B.length!==H.length?console.log("HERE IS THE DIFFERENCE: 1st array length = "+B.length+", 2nd arr length= "+H.length):console.log("no DIFFERENCE between arr lengths")},!1);var r=JSON.parse(localStorage.getItem("mapStyleProperties"));$(".mapbg").css("background-color",t("bodyBackgroundColor")),$("body").css("background-color",t("bodyBackgroundColor")),$.each(r,function(t,e){$(".mapbg").css(t,e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYXdNYXAuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJnZXRTZXR0aW5nRnJvbVN0b3JhZ2UiLCJzZXR0aW5nIiwiU2V0dGluZ3NPYmplY3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibWFwQ29sb3IiLCJtYXBTdHJva2VDb2xvciIsIm1hcFBvaW50c0NvbG9yIiwibWFwUG9pbnRzQm9yZGVyQ29sb3IiLCJtYXBSb3V0ZUNvbG9yIiwiYm9keUJhY2tncm91bmRDb2xvciIsInJvdXRlQm9yZGVyV2lkdGgiLCJwb2ludHNSYWRpdXMiLCJwb2ludHNCb3JkZXJXaWR0aCIsImNvbnRlbnRXaWR0aCIsImNvbnRlbnRBbGlnbiIsImNoZWNrYm94U3RhdGUiLCJkZWZhdWx0T3B0aW9uIiwiVXNlck9wdGlvbiIsIlN0YXJ0SWNvbiIsIlJvdXRlU3RhcnRJY29uQ29sb3IiLCJSb3V0ZVN0YXJ0SWNvblNpemUiLCJjb21wYXJlSWQiLCJvYmpBIiwib2JqQiIsImlkIiwiY29tcGFyZVRpbWUiLCJwb2ludElkIiwidGFicyIsIm9uIiwidGhpcyIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ0YXBUYXJnZXQiLCJhZGRDbGFzcyIsInNpZGVOYXYiLCJtZW51V2lkdGgiLCJlZGdlIiwiY2xvc2VPbkNsaWNrIiwiZHJhZ2dhYmxlIiwib25PcGVuIiwib25DbG9zZSIsImNzcyIsInJlbW92ZSIsImNvbnNvbGUiLCJsb2ciLCJjb2xsYXBzaWJsZSIsInJlc2l6YWJsZSIsImhhbmRsZXMiLCJtYXhXaWR0aCIsIm1pbldpZHRoIiwiYSIsImdldEVsZW1lbnRCeUlkIiwibWFwX3VybCIsImF0dHIiLCJhZGRFdmVudExpc3RlbmVyIiwic3ZnRG9jIiwiY29udGVudERvY3VtZW50Iiwic3ZnUm9vdCIsImRvY3VtZW50RWxlbWVudCIsIlBhdGhzQXJyYXkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImkiLCJsZW5ndGgiLCJzdHlsZSIsImZpbGwiLCJzdHJva2UiLCJQYXRoRGlyZWN0aW9uIiwicGF0aCIsImNyZWF0ZUVsZW1lbnROUyIsIlNuYXAiLCJwbHVnaW4iLCJFbGVtZW50IiwiUGFwZXIiLCJnbG9iYWwiLCJwcm90b3R5cGUiLCJjaXJjbGVQYXRoIiwiY3giLCJjeSIsInIiLCJwIiwicGF0aEdyb3VwIiwiYXBwZW5kIiwicyIsImNpcmNsZXNBcnJheSIsInBhdGhMZW5ndGgiLCJnZXRUb3RhbExlbmd0aCIsInBhdGhTdGFydEljb24iLCJvRE9NIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwicGFyc2VkUGF0aFN0YXJ0SWNvbiIsImljb25PZmZzZXRYIiwiaWNvbk9mZnNldFkiLCJpY29uU2NhbGUiLCJncm91cCIsInRyYW5zZm9ybSIsImdldFBvaW50QXRMZW5ndGgiLCJ4IiwieSIsIkNpcmNsZXNBcnJheUNsb25lIiwiayIsImNpcmNsZXNDb3VudGVyIiwicG9pbnRYIiwicGF0aExlbmd0aEF0UG9pbnQiLCJwb2ludFkiLCJqIiwiTWF0aCIsImFicyIsInJvdW5kIiwibCIsInNwbGljZSIsInNvcnQiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwicG9pbnRzQXJyYXkiLCJlYWNoIiwiaW5kZXgiLCJlbCIsInBvaW50c09iaiIsImNpcmNsZSIsInN0cm9rZS13aWR0aCIsImRhdGEtdGltZSIsInRpbWUiLCJpbnRlcnNlY3RzIiwiaW50ZXJzZWN0aW9uIiwiYWxlcnQiLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJwdXNoIiwiZm9yRWFjaCIsImludGVyc2VjdGlvbkNpcmNsZXMiLCJzdGFydENpcmNsZSIsInBvaW50c0RhdGFDb250ZW50QXJyYXkiLCJwYXRocyIsImNpcmNsZUdyb3VwIiwidGV4dCIsImZvbnQtc2l6ZSIsImZvbnQtc3R5bGUiLCJjbGFzcyIsImVxdWFsVGltZUF0dHIiLCJwb2ludFRleHQiLCJkYXRhIiwiRmlsbGVkQ29udGVudFBhdGhzIiwiQ2xvc2VzdFRleHRGaWVsZCIsInBhcmVudCIsImZpbmQiLCJjaXR5TmFtZSIsImN1cnNvciIsIm1vdXNlZW50ZXIiLCJtb3VzZW91dCIsIkRpc3BsYWNlbWVudE9iaiIsInpvb20iLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJzYXZlZERpc3BsYWNlbWVudCIsInBhcnNlSW50Iiwib2ZmIiwiTnBvaW50IiwiZGF0YVRpbWUiLCJpbm5lckhUTUwiLCJjdXJyZW50UGF0aCIsInBvaW50RGF0YVRpbWUiLCJnZXRQb2ludERhdGEiLCJzYXZlZFpvb20iLCJodG1sIiwiYW5pbWF0ZSIsImJpbmQiLCJQb2ludExhc3REYXRhIiwiY291bnQiLCJ2YWwiLCJQb2ludENpdHlOYW1lIiwiZWRpdG9yIiwic2V0RGF0YSIsIm9uY2xpY2siLCJwb2ludHNEYXRhQ29udGVudCIsIlBvaW50TmFtZSIsInZhbHVlIiwiZ2V0RGF0YSIsIk1hdGVyaWFsaXplIiwidG9hc3QiLCJ0ZXh0RmllbGQiLCJvdmVybGF5Iiwic3RvcHNBdExlbmd0aCIsIldyYXBwZXJQcm9wcyIsInByb3AiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBRWQsU0FBU0MsRUFBc0JDLEdBQzNCLElBQUlDLEVBQWlCQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGVBQ3JEQyxTQUFVLHlCQUNWQyxlQUFnQixtQkFDaEJDLGVBQWdCLHFCQUNoQkMscUJBQXNCLG1CQUN0QkMsY0FBZSxtQkFDZkMsb0JBQXFCLHlCQUNyQkMsaUJBQWtCLElBQ2xCQyxhQUFjLElBQ2RDLGtCQUFtQixJQUNuQkMsYUFBYyxNQUNkQyxhQUFjLGFBQ2RDLGNBQWUsUUFDZkMsY0FBZSxRQUNmQyxXQUFZLFFBQ1pDLFVBQVcsR0FDWEMsb0JBQXFCLG1CQUNyQkMsbUJBQW9CLEtBRXBCLEdBQUdyQixFQUFlRCxHQUNkLE9BQU9DLEVBQWVELEdBaUQ5QixTQUFTdUIsRUFBVUMsRUFBTUMsR0FDckIsT0FBT0QsRUFBS0UsR0FBS0QsRUFBS0MsR0FFMUIsU0FBU0MsRUFBWUgsRUFBS0MsR0FDdEIsT0FBT0Qs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QUFRRCxJQUMzQjJILEVBQWMzSCxFQUFFLEdBQUsySCxFQUFjM0gsSUFBTSxHQUFJMkgsRUFBYzFFLE9BQU9qRCxFQUFFLEdBSW5GM0QsYUFBYThHLFFBQVEsZ0JBQWlCaEgsS0FBS2lILFVBQVV1RSxJQUVqRHRFLEVBQVlwRCxTQUFXMEgsRUFBYzFILE9BQ3JDbkIsUUFBUUMsSUFBSSw4Q0FBZ0RzRSxFQUFZcEQsT0FBUyxxQkFBdUIwSCxFQUFjMUgsUUFFdEhuQixRQUFRQyxJQUFJLHVDQU9qQixHQUdILElBQUk2SSxFQUFlekwsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSx1QkFHL0NULEVBQUUsVUFBVStDLElBQUksbUJBQW9CNUMsRUFBc0Isd0JBQzFESCxFQUFFLFFBQVErQyxJQUFJLG1CQUFvQjVDLEVBQXNCLHdCQUc1REgsRUFBRXlILEtBQUtzRSxFQUFjLFNBQVNDLEVBQU1SLEdBQ2hDeEwsRUFBRSxVQUFVK0MsSUFBSWlKLEVBQU1SIiwiZmlsZSI6ImRyYXdNYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2Uoc2V0dGluZyl7XHJcbiAgICAgICAgdmFyIFNldHRpbmdzT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNldHRpbmdzXCIpKSB8fCB7XHJcbiAgICAgICAgbWFwQ29sb3I6IFwicmdiYSgyNTUsIDIwNCwgMTI4LCAxKVwiLFxyXG4gICAgICAgIG1hcFN0cm9rZUNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICBtYXBQb2ludHNDb2xvcjogXCJyZ2JhKDAsIDAsIDI1NSwgMSlcIixcclxuICAgICAgICBtYXBQb2ludHNCb3JkZXJDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgbWFwUm91dGVDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgYm9keUJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI0MywgMjI5LCAyNDUsIDEpXCIsXHJcbiAgICAgICAgcm91dGVCb3JkZXJXaWR0aDogXCI0XCIsXHJcbiAgICAgICAgcG9pbnRzUmFkaXVzOiBcIjhcIixcclxuICAgICAgICBwb2ludHNCb3JkZXJXaWR0aDogXCIxXCIsXHJcbiAgICAgICAgY29udGVudFdpZHRoOiBcIjEwMFwiLFxyXG4gICAgICAgIGNvbnRlbnRBbGlnbjogXCJmbGV4LXN0YXJ0XCIsXHJcbiAgICAgICAgY2hlY2tib3hTdGF0ZTogXCJmYWxzZVwiLFxyXG4gICAgICAgIGRlZmF1bHRPcHRpb246IFwiZmFsc2VcIixcclxuICAgICAgICBVc2VyT3B0aW9uOiBcImZhbHNlXCIsXHJcbiAgICAgICAgU3RhcnRJY29uOiBcIlwiLFxyXG4gICAgICAgIFJvdXRlU3RhcnRJY29uQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAxKVwiLFxyXG4gICAgICAgIFJvdXRlU3RhcnRJY29uU2l6ZTogXCI4XCJcclxuICAgIH07XHJcbiAgICAgICAgaWYoU2V0dGluZ3NPYmplY3Rbc2V0dGluZ10pe1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NPYmplY3Rbc2V0dGluZ107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdmdQb2ludFBvc2l0aW9uKHN0cmluZyl7XHJcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKDEpO1xyXG4gICAgICAgIHN0cmluZyA9IHN0cmluZy5zcGxpdChcImNcIik7XHJcbiAgICAgICAgdmFyIHN1YnN0cmluZyA9IHN0cmluZy5zcGxpY2UoMSk7XHJcbiAgICAgICAgc3Vic3RyaW5nID0gc3Vic3RyaW5nLmpvaW4oXCJjXCIpO1xyXG4gICAgICAgIHJldHVybiBzdWJzdHJpbmc7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICQoJ3VsLnRhYnMnKS50YWJzKCdzZWxlY3RfdGFiJywgJ3RhYl8yJyk7XHJcbiAgICAgICAgJChcIiNtZW51XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgIGlmKCEkKHRoaXMpLmhhc0NsYXNzKCcuYWN0aXZlJykpe1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICQoJy50YXAtdGFyZ2V0JykudGFwVGFyZ2V0KCdvcGVuJyk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICQoJy50YXAtdGFyZ2V0JykudGFwVGFyZ2V0KCdjbG9zZScpO1xyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoe1xyXG4gICAgICBtZW51V2lkdGg6IDMwMCxcclxuICAgICAgZWRnZTogJ2xlZnQnLCBcclxuICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZSwgXHJcbiAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgb25PcGVuOiBmdW5jdGlvbigpe30sXHJcbiAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNzbGlkZS1vdXRcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlWCgtMTAwJSlcIik7XHJcbiAgICAgICAgJChcImRpdlwiKS5yZW1vdmUoXCIjc2lkZW5hdi1vdmVybGF5XCIpO1xyXG4gICAgICAgICQoJy5idXR0b24tY29sbGFwc2UnKS5zaWRlTmF2KCdoaWRlJyk7XHJcbiAgICAgICAgJChcIiNzbGlkZS1vdXRcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlWCgtMTAwJSlcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJrZWtcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSgpO1xyXG5cclxuICAgICAkKFwiLnNpZGUtbmF2XCIpLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgaGFuZGxlczogJ2UnLFxyXG4gICAgICAgIG1heFdpZHRoOiAxMjAwLFxyXG4gICAgICAgIG1pbldpZHRoOiAzMDBcclxuICAgIH0pOyAgICAgICBcclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVJZChvYmpBLCBvYmpCKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iakEuaWQgLSBvYmpCLmlkO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY29tcGFyZVRpbWUob2JqQSxvYmpCKXtcclxuICAgICAgICByZXR1cm4gb2JqQS5wb2ludElkIC0gb2JqQi5wb2ludElkO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgdmFyIGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XHJcbiAgICB2YXIgbWFwX3VybCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21hcCcpKTtcclxuICAgICQoJyNtYXAnKS5hdHRyKCdkYXRhJywgbWFwX3VybCk7XHJcbiAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzdmdEb2MgPSBhLmNvbnRlbnREb2N1bWVudDtcclxuICAgICAgICB2YXIgc3ZnUm9vdCA9IHN2Z0RvYy5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIE1hcFBhdGhzR3JvdXAgPSBzdmdSb290LmdldEVsZW1lbnRCeUlkKFwibWFwUGF0aHNcIik7XHJcbiAgICAgICAgdmFyIFBhdGhzQXJyYXkgPSBNYXBQYXRoc0dyb3VwLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXRoJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIENvbG9yTWFwRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1NhdmVkTWFwQ29sb3JzJykpIHx8IFtdO1xyXG5cclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IFBhdGhzQXJyYXkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLmZpbGwgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBDb2xvclwiKTtcclxuICAgICAgICAgICAgUGF0aHNBcnJheVtpXS5zdHlsZS5zdHJva2UgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBTdHJva2VDb2xvclwiKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgUGF0aERpcmVjdGlvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhdGgnKSk7XHJcblxyXG4gICAgICAgIGlmIChQYXRoRGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcblxyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoJ2QnLCBQYXRoRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKCdmaWxsJywgJ3RyYW5zcGFyZW50Jyk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignc3Ryb2tlJywgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUm91dGVDb2xvclwiKSk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignc3Ryb2tlLXdpZHRoJywgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicm91dGVCb3JkZXJXaWR0aFwiKSk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cihcInN0cm9rZS1saW5lY2FwXCIsXCJyb3VuZFwiKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIFNuYXAucGx1Z2luKGZ1bmN0aW9uKFNuYXAsIEVsZW1lbnQsIFBhcGVyLCBnbG9iYWwpIHtcclxuICAgICAgICAgICAgUGFwZXIucHJvdG90eXBlLmNpcmNsZVBhdGggPSBmdW5jdGlvbihjeCwgY3ksIHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gXCJNXCIgKyBjeCArIFwiLFwiICsgY3k7XHJcbiAgICAgICAgICAgICAgICBwICs9IFwibVwiICsgLXIgKyBcIiwwXCI7XHJcbiAgICAgICAgICAgICAgICBwICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMSwwIFwiICsgKHIgKiAyKSArIFwiLDBcIjtcclxuICAgICAgICAgICAgICAgIHAgKz0gXCJhXCIgKyByICsgXCIsXCIgKyByICsgXCIgMCAxLDAgXCIgKyAtKHIgKiAyKSArIFwiLDBcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGgocCwgY3gsIGN5KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHBhdGhHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgICAgIHBhdGhHcm91cC5pZCA9IFwicGF0aEdyb3VwXCI7XHJcbiAgICAgICAgcGF0aEdyb3VwLmFwcGVuZChwYXRoKTtcclxuICAgICAgICBzdmdSb290LmFwcGVuZChwYXRoR3JvdXApO1xyXG4gICAgICAgIHZhciBzID0gU25hcChwYXRoR3JvdXApO1xyXG5cclxuICAgICAgICB2YXIgY2lyY2xlc0FycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2lyY2xlc0Nvb3JkcycpKTtcclxuICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHBhdGguZ2V0VG90YWxMZW5ndGgoKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBzdGFydFJvdXRlRmxhZyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTdGFydFJvdXRlSWNvblwiKSk7XHJcblxyXG5cclxuXHJcbiAgICB2YXIgcGF0aFN0YXJ0SWNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTdGFydFJvdXRlSWNvblwiKSk7XHJcbiAgICBjb25zb2xlLmxvZyhwYXRoU3RhcnRJY29uKTtcclxuICAgIHZhciBvUGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgdmFyIG9ET00gPSBvUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhwYXRoU3RhcnRJY29uLCBcInRleHQveG1sXCIpO1xyXG4gICAgY29uc29sZS5sb2cob0RPTS5kb2N1bWVudEVsZW1lbnQpO1xyXG5cclxuICAgIHZhciBwYXJzZWRQYXRoU3RhcnRJY29uID0gb0RPTS5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICB2YXIgaWNvbk9mZnNldFggPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLW9mZnNldC14XCIpO1xyXG4gICAgdmFyIGljb25PZmZzZXRZID0gJChwYXJzZWRQYXRoU3RhcnRJY29uKS5hdHRyKFwiZGF0YS1vZmZzZXQteVwiKTtcclxuICAgIHZhciBpY29uU2NhbGUgPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLXNjYWxlXCIpO1xyXG5cclxuICAgIHZhciBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG5cclxuICAgICAgICBpZihnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJVc2VyT3B0aW9uXCIpID09IFwidHJ1ZVwiICYmIGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlN0YXJ0SWNvblwiKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBmaWxsOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvbkNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBpY29uU2NhbGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcnNlZFBhdGhTdGFydEljb24pO1xyXG4gXHJcbiAgICAgICAgfVxyXG5cclxuJChncm91cCkuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIisocGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnggLSAoZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpL2ljb25PZmZzZXRYKSkgKyBcIiBcIiArIChwYXRoLmdldFBvaW50QXRMZW5ndGgoMSkueSAtIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvblNpemVcIikvaWNvbk9mZnNldFkpICkrXCIpIFwiICsgXCJzY2FsZShcIitnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvblNpemVcIikvMTAwK1wiKVwiKTtcclxuZ3JvdXAuYXBwZW5kKHBhcnNlZFBhdGhTdGFydEljb24pO1xyXG5zdmdSb290LmFwcGVuZChncm91cCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIENpcmNsZXNBcnJheUNsb25lID0gW107XHJcbiAgICAgICAgdmFyIGNvbnRlbnRPZlBvaW50cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1BvaW50c0NvbnRlbnQnKSkgfHwgW107XHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNpcmNsZXNBcnJheS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBDaXJjbGVzQXJyYXlDbG9uZVtrXSA9IGNpcmNsZXNBcnJheVtrXTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgY2lyY2xlc0NvdW50ZXIgPSAxO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGF0aExlbmd0aEF0UG9pbnQgPSBwYXRoLmdldFBvaW50QXRMZW5ndGgoaSk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludFggPSBwYXRoTGVuZ3RoQXRQb2ludC54O1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRZID0gcGF0aExlbmd0aEF0UG9pbnQueTtcclxuXHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IENpcmNsZXNBcnJheUNsb25lLmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKE1hdGgucm91bmQocG9pbnRYIC0gQ2lyY2xlc0FycmF5Q2xvbmVbal0uY3gpKSA8PSA4ICYmIE1hdGguYWJzKE1hdGgucm91bmQocG9pbnRZIC0gQ2lyY2xlc0FycmF5Q2xvbmVbal0uY3kpKSA8PSA4KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgY2lyY2xlc0FycmF5Lmxlbmd0aDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhNYXRoLnJvdW5kKGNpcmNsZXNBcnJheVtsXS5jeCAtIENpcmNsZXNBcnJheUNsb25lW2pdLmN4KSkgPD00ICYmIE1hdGguYWJzKE1hdGgucm91bmQoY2lyY2xlc0FycmF5W2xdLmN5IC0gQ2lyY2xlc0FycmF5Q2xvbmVbal0uY3kpKSA8PTQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGVzQXJyYXlbbF0uaWQgPSBjaXJjbGVzQ291bnRlcisrO1xyXG4gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbkNpcmNsZXNBcnJheUNsb25lLnNwbGljZShqLCAxKTtcclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2lyY2xlc0FycmF5LnNvcnQoY29tcGFyZUlkKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2lyY2xlc0Nvb3JkcycsIEpTT04uc3RyaW5naWZ5KGNpcmNsZXNBcnJheSkpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBjaXJjbGVzQXJyYXkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaXJjbGVzQ29vcmRzJykpO1xyXG4gICAgICAgIHZhciBwb2ludHNBcnJheSA9IFtdO1xyXG4gICAgICAgIHZhciBzdHJpbmdBcnIgPSAnJztcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICQuZWFjaChjaXJjbGVzQXJyYXksIGZ1bmN0aW9uKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRzT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgY3g6IDAsXHJcbiAgICAgICAgICAgICAgICBjeTogMCxcclxuICAgICAgICAgICAgICAgIHI6IDFcclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gcy5jaXJjbGVQYXRoKHRoaXMuY3gsIHRoaXMuY3ksIHRoaXMucikuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBmaWxsOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNDb2xvclwiKSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNCb3JkZXJXaWR0aFwiKSxcclxuICAgICAgICAgICAgICAgIGlkOiBlbC5pZCxcclxuICAgICAgICAgICAgICAgIFwiZGF0YS10aW1lXCI6IGVsLnRpbWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgaW50ZXJzZWN0cyA9IFNuYXAucGF0aC5pbnRlcnNlY3Rpb24oY2lyY2xlLCAkKHBhdGgpLmF0dHIoJ2QnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihpbnRlcnNlY3RzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlLCByZXR1cm4gdG8gdGhlIHByZXZpb3VzIHN0ZXAgYW5kIGRyYXcgcG9pbnRzIHJpZ2h0IG9uIHRoZSByb3V0ZSBsaW5lXCIpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShcImh0dHA6Ly8xMjcuMC4wLjE6ODA4MC9cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHBvaW50c09iai5jeCA9IGludGVyc2VjdHNbMF0ueDtcclxuICAgICAgICAgICAgICAgIHBvaW50c09iai5jeSA9IGludGVyc2VjdHNbMF0ueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHBvaW50c0FycmF5LnB1c2gocG9pbnRzT2JqKTtcclxuXHJcbiAgICAgICAgICAgIGludGVyc2VjdHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHMuY2lyY2xlKGVsLngsIGVsLnksIDEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwb2ludHMnLCBKU09OLnN0cmluZ2lmeShwb2ludHNBcnJheSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uQ2lyY2xlcyA9IHN2Z0RvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNpcmNsZVwiKTtcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxpbnRlcnNlY3Rpb25DaXJjbGVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uQ2lyY2xlc1tpXS5zdHlsZS5maWxsID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJjaGVja2JveFN0YXRlXCIpID09IFwidHJ1ZVwiICYmIGdldFNldHRpbmdGcm9tU3RvcmFnZShcImRlZmF1bHRPcHRpb25cIikgPT0gXCJ0cnVlXCIpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0Q2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcclxuICAgICAgICAgICAgICAgICQoc3RhcnRDaXJjbGUpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN4OiBwYXRoLmdldFBvaW50QXRMZW5ndGgoMSkueCxcclxuICAgICAgICAgICAgICAgICAgICBjeTogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnksXHJcbiAgICAgICAgICAgICAgICAgICAgcjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicG9pbnRzUmFkaXVzXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicG9pbnRzQm9yZGVyV2lkdGhcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJChzdGFydENpcmNsZSkpO1xyXG4gICAgICAgICAgICAgICAgIHN2Z1Jvb3QuYXBwZW5kKHN0YXJ0Q2lyY2xlKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgXHJcblxyXG5cclxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1BvaW50c0NvbnRlbnQnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHNEYXRhQ29udGVudEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUG9pbnRzQ29udGVudCcpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRzRGF0YUNvbnRlbnRBcnJheSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNpcmNsZXNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGF0aHMgPSBzdmdEb2MuZ2V0RWxlbWVudEJ5SWQoY2lyY2xlc0FycmF5W2ldLmlkKTtcclxuICAgICAgICAgICAgdmFyIGNpcmNsZUdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgICAgICAgICAgJCh0ZXh0KS5hdHRyKHtcclxuICAgICAgICAgICAgICAgIHg6IGNpcmNsZXNBcnJheVtpXS5jeCxcclxuICAgICAgICAgICAgICAgIHk6IGNpcmNsZXNBcnJheVtpXS5jeSArIDIwLFxyXG4gICAgICAgICAgICAgICAgXCJmb250LXNpemVcIjogMTIsXHJcbiAgICAgICAgICAgICAgICBcImZvbnQtc3R5bGVcIjogXCJpdGFsaWNcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6IFwiI2NjY2NjY2NcIixcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcImNpdHlOYW1lXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaXJjbGVHcm91cC5hcHBlbmQocGF0aHMpO1xyXG4gICAgICAgICAgICBjaXJjbGVHcm91cC5hcHBlbmQodGV4dCk7XHJcbiAgICAgICAgICAgIHN2Z1Jvb3QuYXBwZW5kKGNpcmNsZUdyb3VwKTsgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGVxdWFsVGltZUF0dHIgPSBjaXJjbGVzQXJyYXlbaV0udGltZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzRGF0YUNvbnRlbnRBcnJheS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50VGV4dCAgPSBwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzRGF0YUNvbnRlbnRBcnJheVtqXS5wb2ludElkID09IGVxdWFsVGltZUF0dHIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLnBvaW50SWQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihwb2ludFRleHQubGVuZ3RoICE9IDAgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBGaWxsZWRDb250ZW50UGF0aHMgPSBzdmdEb2MuZ2V0RWxlbWVudEJ5SWQoY2lyY2xlc0FycmF5W2ldLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIENsb3Nlc3RUZXh0RmllbGQgPSAkKEZpbGxlZENvbnRlbnRQYXRocykucGFyZW50KCkuZmluZChcInRleHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKENsb3Nlc3RUZXh0RmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLmNpdHlOYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChDbG9zZXN0VGV4dEZpZWxkKS50ZXh0KHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaXJjbGVzQXJyYXlbaV0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKEZpbGxlZENvbnRlbnRQYXRocykuY3NzKFwiZmlsbFwiLCBcIiM5OTAwMzNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAkKHBhdGhzKS5hZGRDbGFzcygnYnV0dG9uLWNvbGxhcHNlJyk7XHJcbiAgICAgICAgICAgICQocGF0aHMpLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJywgXCJzbGlkZS1vdXRcIik7XHJcbiAgICAgICAgICAgICQocGF0aHMpLmF0dHIoJ2hyZWYnLCBcIiNcIik7XHJcbiAgICAgICAgICAgIHBhdGhzLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICAgICAgICAkKHBhdGhzKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJ0cmFuc2l0aW9uXCIsIFwiMC41c1wiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwic3Ryb2tlLXdpZHRoXCIsIFwiNnB4XCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJzdHJva2VcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIikpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0pLm1vdXNlb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJ0cmFuc2l0aW9uXCIsIFwiMC41c1wiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwic3Ryb2tlLXdpZHRoXCIsIFwiM3B4XCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJzdHJva2VcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgRGlzcGxhY2VtZW50T2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb206IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9pbnRzRGF0YUNvbnRlbnRBcnJheSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBzYXZlZERpc3BsYWNlbWVudCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIikpIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNhdmVkRGlzcGxhY2VtZW50LnRvcCA9IHBhcnNlSW50KHNhdmVkRGlzcGxhY2VtZW50LnRvcCk7XHJcbiAgICAgICAgICAgICAgICBzYXZlZERpc3BsYWNlbWVudC5sZWZ0ID0gcGFyc2VJbnQoc2F2ZWREaXNwbGFjZW1lbnQubGVmdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzYXZlZERpc3BsYWNlbWVudC50b3AsIHNhdmVkRGlzcGxhY2VtZW50LmxlZnQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgcGF0aHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICQoXCIuYnV0dG9uLWNvbGxhcHNlXCIpLm9mZignY2xpY2snKS5zaWRlTmF2KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIE5wb2ludCA9IHBhcnNlSW50KHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFUaW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRpbWUnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRJbmRleFwiKS5pbm5lckhUTUwgPSBOcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50RGF0YVRpbWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGltZScpO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnZXRQb2ludERhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykpIHx8IFtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFnZXRQb2ludERhdGFbTnBvaW50LTFdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzYXZlZFpvb20gPSAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlZERpc3BsYWNlbWVudC50b3AgPSAgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkRGlzcGxhY2VtZW50LmxlZnQgPSAgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnROYW1lXCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubWFwYmcnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBzYXZlZFpvb20gKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHNhdmVkRGlzcGxhY2VtZW50LnRvcCArIFwiJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHNhdmVkRGlzcGxhY2VtZW50LmxlZnQgKyBcIiVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldFBvaW50RGF0YVtOcG9pbnQtMV0uY2l0eU5hbWUpOyAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlZFpvb20gPSBnZXRQb2ludERhdGFbTnBvaW50LTFdLnpvb207XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWREaXNwbGFjZW1lbnQudG9wID0gZ2V0UG9pbnREYXRhW05wb2ludC0xXS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWREaXNwbGFjZW1lbnQubGVmdCA9IGdldFBvaW50RGF0YVtOcG9pbnQtMV0ubGVmdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGFjZW1lbnRPYmouem9vbSA9IHNhdmVkWm9vbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai50b3AgPSBzYXZlZERpc3BsYWNlbWVudC50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGFjZW1lbnRPYmoubGVmdCA9IHNhdmVkRGlzcGxhY2VtZW50LmxlZnQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcGx1c1wiKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkWm9vbSArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai56b29tID0gc2F2ZWRab29tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIubWFwYmdcIikuY3NzKFwiem9vbVwiLCBzYXZlZFpvb20gKyBcIiVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI21pbnVzXCIpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWRab29tIC09IDM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlZFpvb20gPD0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkWm9vbSA9IDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxhY2VtZW50T2JqLnpvb20gPSBzYXZlZFpvb207XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5tYXBiZ1wiKS5jc3MoXCJ6b29tXCIsIHNhdmVkWm9vbSArIFwiJVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI21vdmVMZWZ0XCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWREaXNwbGFjZW1lbnQubGVmdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai5sZWZ0ID0gc2F2ZWREaXNwbGFjZW1lbnQubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLm1hcGJnXCIpLmNzcyhcImxlZnRcIiwgXCJcIiArIHNhdmVkRGlzcGxhY2VtZW50LmxlZnQgKyBcIiVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjbW92ZVJpZ2h0XCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlZERpc3BsYWNlbWVudC5sZWZ0IC09IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxhY2VtZW50T2JqLmxlZnQgPSBzYXZlZERpc3BsYWNlbWVudC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIubWFwYmdcIikuY3NzKFwibGVmdFwiLCBcIlwiICsgc2F2ZWREaXNwbGFjZW1lbnQubGVmdCArIFwiJVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNtb3ZlVG9wXCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlZERpc3BsYWNlbWVudC50b3AgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGFjZW1lbnRPYmoudG9wID0gc2F2ZWREaXNwbGFjZW1lbnQudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIubWFwYmdcIikuY3NzKFwidG9wXCIsIFwiXCIgKyBzYXZlZERpc3BsYWNlbWVudC50b3AgKyBcIiVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjbW92ZUJvdHRvbVwiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWREaXNwbGFjZW1lbnQudG9wIC09IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxhY2VtZW50T2JqLnRvcCA9IHNhdmVkRGlzcGxhY2VtZW50LnRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLm1hcGJnXCIpLmNzcyhcInRvcFwiLCBcIlwiICsgc2F2ZWREaXNwbGFjZW1lbnQudG9wICsgXCIlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBQb2ludExhc3REYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdldFBvaW50RGF0YS5sZW5ndGg7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gZ2V0UG9pbnREYXRhW2pdLnBvaW50SWQgPT0gZGF0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRQb2ludERhdGFbal0ucG9pbnRJZCA9PSBkYXRhVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50Wm9vbVwiKS52YWwoZ2V0UG9pbnREYXRhW2pdLnpvb20pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50VG9wXCIpLnZhbChnZXRQb2ludERhdGFbal0udG9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnRCb3R0b21cIikudmFsKGdldFBvaW50RGF0YVtqXS5ib3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwb2ludExlZnRcIikudmFsKGdldFBvaW50RGF0YVtqXS5sZWZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnRSaWdodFwiKS52YWwoZ2V0UG9pbnREYXRhW2pdLnJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1hcGJnJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogZ2V0UG9pbnREYXRhW2pdLnpvb20gKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGdldFBvaW50RGF0YVtqXS50b3AgKyBcIiVcIixcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogZ2V0UG9pbnREYXRhW2pdLmxlZnQgKyBcIiVcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBQb2ludENpdHlOYW1lID0gZ2V0UG9pbnREYXRhW2pdLmNpdHlOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9pbnRMYXN0RGF0YSA9IGdldFBvaW50RGF0YVtqXS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50TmFtZVwiKS52YWwoUG9pbnRDaXR5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldERhdGEoUG9pbnRMYXN0RGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTYXZlUG9pbnRDb250ZW50XCIpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50c0RhdGFDb250ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludElkOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaXR5TmFtZTogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogRGlzcGxhY2VtZW50T2JqLnpvb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogRGlzcGxhY2VtZW50T2JqLnRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogRGlzcGxhY2VtZW50T2JqLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBJbnB1dFpvb21WYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRab29tXCIpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgSW5wdXRUb3BWYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRUb3BcIikudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBJbnB1dEJvdHRvbVZhbHVlID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2ludEJvdHRvbVwiKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIElucHV0TGVmdFZhbHVlID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2ludExlZnRcIikudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBJbnB1dFJpZ2h0VmFsdWUgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9pbnRSaWdodCcpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFBvaW50TmFtZSA9ICQoXCIjcG9pbnROYW1lXCIpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwb2ludHNEYXRhQ29udGVudC5wb2ludElkID0gcG9pbnREYXRhVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzRGF0YUNvbnRlbnQuY2l0eU5hbWUgPSBQb2ludE5hbWU7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzRGF0YUNvbnRlbnQuZGF0YSA9IGVkaXRvci5nZXREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzRGF0YUNvbnRlbnRBcnJheS5sZW5ndGg7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0ucG9pbnRJZCA9PSBwb2ludERhdGFUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNEYXRhQ29udGVudEFycmF5LnNwbGljZShqLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50c0RhdGFDb250ZW50LmRhdGEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ05vIGRhdGEgaW4gcG9pbnQhJywgMjAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9pbnRzRGF0YUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNEYXRhQ29udGVudEFycmF5LnB1c2gocG9pbnRzRGF0YUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dEZpZWxkID0gJChjdXJyZW50UGF0aCkucGFyZW50KCkuZmluZChcInRleHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0ZXh0RmllbGQpLnRleHQoUG9pbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCQodGV4dEZpZWxkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdZb3VyIGRhdGEgaXMgc2F2ZWQhJywgMjAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50c0RhdGFDb250ZW50QXJyYXkuc29ydChjb21wYXJlVGltZSlcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnUG9pbnRzQ29udGVudCcsIEpTT04uc3RyaW5naWZ5KHBvaW50c0RhdGFDb250ZW50QXJyYXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheSA9ICQoJyNzaWRlbmF2LW92ZXJsYXknKTtcclxuICAgICAgICAgICAgICAgICAgICAkKG92ZXJsYXkpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQob3ZlcmxheSkucmVtb3ZlKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHNEYXRhQ29udGVudC5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50UGF0aCkuY3NzKFwiZmlsbFwiLCBcIiM5OTAwMzNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwb2ludHNEYXRhQ29udGVudC5kYXRhLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoY3VycmVudFBhdGgpLmNzcyhcImZpbGxcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQ29sb3JcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBwYXRoTGVuZ3RoID0gcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xyXG5cclxuICAgICAgICB2YXIgc3RvcHNBdExlbmd0aCA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGF0aExlbmd0aEF0UG9pbnQgPSBwYXRoLmdldFBvaW50QXRMZW5ndGgoaSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9pbnRYID0gcGF0aExlbmd0aEF0UG9pbnQueDtcclxuICAgICAgICAgICAgdmFyIHBvaW50WSA9IHBhdGhMZW5ndGhBdFBvaW50Lnk7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwb2ludHNBcnJheS5sZW5ndGg7IGorKykge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoTWF0aC5yb3VuZChwb2ludFggLSBwb2ludHNBcnJheVtqXS5jeCkpIDw9IDAgJiYgTWF0aC5hYnMoTWF0aC5yb3VuZChwb2ludFkgLSBwb2ludHNBcnJheVtqXS5jeSkpIDw9IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcHNBdExlbmd0aC5wdXNoKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHN0b3BzQXRMZW5ndGgubGVuZ3RoICE9IHBvaW50c0FycmF5Lmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPCBzdG9wc0F0TGVuZ3RoLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihzdG9wc0F0TGVuZ3RoW2krMV0gLSBzdG9wc0F0TGVuZ3RoW2ldID09IDEgKSBzdG9wc0F0TGVuZ3RoLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN0b3BzQXRMZW5ndGhcIiwgSlNPTi5zdHJpbmdpZnkoc3RvcHNBdExlbmd0aCkpO1xyXG5cclxuICAgICAgICBpZiAocG9pbnRzQXJyYXkubGVuZ3RoICE9PSBzdG9wc0F0TGVuZ3RoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhFUkUgSVMgVEhFIERJRkZFUkVOQ0U6IDFzdCBhcnJheSBsZW5ndGggPSBcIiArIHBvaW50c0FycmF5Lmxlbmd0aCArICcsIDJuZCBhcnIgbGVuZ3RoPSAnICsgc3RvcHNBdExlbmd0aC5sZW5ndGggKyBcIlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm8gRElGRkVSRU5DRSBiZXR3ZWVuIGFyciBsZW5ndGhzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG5cclxuICAgIHZhciBXcmFwcGVyUHJvcHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtYXBTdHlsZVByb3BlcnRpZXMnKSk7XHJcbiAgXHJcbiAgIFxyXG4gICAgICAgICQoXCIubWFwYmdcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJib2R5QmFja2dyb3VuZENvbG9yXCIpKTtcclxuICAgICAgICAkKFwiYm9keVwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIGdldFNldHRpbmdGcm9tU3RvcmFnZShcImJvZHlCYWNrZ3JvdW5kQ29sb3JcIikpO1xyXG4gICAgXHJcblxyXG4gICAgJC5lYWNoKFdyYXBwZXJQcm9wcywgZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcclxuICAgICAgICAkKFwiLm1hcGJnXCIpLmNzcyhwcm9wLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyJdfQ==
