$(document).ready(function(){function t(t){var e=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"50",contentAlign:"flex-start",checkboxState:"false",defaultOption:"false",UserOption:"false",StartIcon:"",RouteStartIconColor:"rgba(0, 0, 0, 1)",RouteStartIconSize:"8"};if(e[t])return e[t]}function e(t,e){return t.id-e.id}function o(t,e){return t.pointId-e.pointId}JSON.parse(localStorage.getItem("Settings"));$(".modal").modal(),$("ul.tabs").tabs("select_tab","tab_2"),$("#menu").on("click",function(){$(this).hasClass(".active")?($(this).removeClass("active"),$(".tap-target").tapTarget("close")):($(this).addClass("active"),$(".tap-target").tapTarget("open"))}),$(".button-collapse").sideNav({menuWidth:323,edge:"left",closeOnClick:!1,draggable:!0,onOpen:function(){},onClose:function(){$("#slide-out").css("transform","translateX(-100%)"),$("div").remove("#sidenav-overlay"),$(".button-collapse").sideNav("hide"),$("#slide-out").css("transform","translateX(-100%)")}}),$(".collapsible").collapsible(),$(".side-nav").resizable({handles:"e",maxWidth:1200,minWidth:300});var a=document.getElementById("map"),n=JSON.parse(localStorage.getItem("map"));$("#map").attr("data",n),a.addEventListener("load",function(){var n=a.contentDocument,r=n.documentElement,l=r.getElementById("mapPaths"),s=l.getElementsByTagName("path"),i=document.createElementNS("http://www.w3.org/2000/svg","g");$(i).attr("id","wholeSvgGroup"),$("input[name=light-trigger]").attr("data-light","lightOff"),$("input[name=light-trigger]").prop("checked",!1);for(var c=0;c<s.length;c++)s[c].style.fill=t("mapColor"),s[c].style.stroke=t("mapStrokeColor");var p=JSON.parse(localStorage.getItem("path"));if(p){var d=document.createElementNS("http://www.w3.org/2000/svg","path");$(d).attr("d",p),$(d).attr("fill","transparent"),$(d).attr("stroke",t("mapRouteColor")),$(d).attr("stroke-width",t("routeBorderWidth")),$(d).attr("stroke-linecap","round")}Snap.plugin(function(t,e,o,a){o.prototype.circlePath=function(t,e,o){var a="M"+t+","+e;return a+="m"+-o+",0",a+="a"+o+","+o+" 0 1,0 "+2*o+",0",a+="a"+o+","+o+" 0 1,0 "+-2*o+",0",this.path(a,t,e)}});var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.id="pathGroup",g.append(d),i.append(g),i.append(l),r.append(i);var m=Snap(g),h=JSON.parse(localStorage.getItem("circlesCoords")),u=d.getTotalLength(),f=(JSON.parse(localStorage.getItem("StartRouteIcon")),JSON.parse(localStorage.getItem("StartRouteIcon"))),v=(new DOMParser).parseFromString(f,"text/xml").documentElement,S=$(v).attr("data-offset-x"),b=$(v).attr("data-offset-y"),I=$(v).attr("data-scale"),y=document.createElementNS("http://www.w3.org/2000/svg","g");"true"==t("UserOption")&&f&&($(v).attr({fill:t("RouteStartIconColor"),transform:I}),$(y).attr("transform","translate("+(d.getPointAtLength(1).x-t("RouteStartIconSize")/S)+" "+(d.getPointAtLength(1).y-t("RouteStartIconSize")/b)+") scale("+t("RouteStartIconSize")/100+")"),y.append(v),g.append(y),i.append(g));for(var N=[],w=(JSON.parse(localStorage.getItem("PointsContent")),0);w<h.length;w++)N[w]=h[w];var k=1;for(c=0;c<u;c++)for(var C=(V=d.getPointAtLength(c)).x,O=V.y,P=0;P<N.length;P++)if(Math.abs(Math.round(C-N[P].cx))<=8&&Math.abs(Math.round(O-N[P].cy))<=8){for(var x=0;x<h.length;x++)Math.abs(Math.round(h[x].cx-N[P].cx))<=4&&Math.abs(Math.round(h[x].cy-N[P].cy))<=4&&(h[x].id=k++);N.splice(P,1)}h.sort(e),console.log(d);var E=d.getPointAtLength(d.getTotalLength()),B=(new Date).getTime();if(console.log(h),h[h.length-1].cx==E.x&&h[h.length-1].cy==E.y)console.log(h[h.length-1]);else{var J={cx:E.x,cy:E.y,id:h.length,r:t("pointsRadius"),time:B};console.log(J),h.push(J)}localStorage.setItem("circlesCoords",JSON.stringify(h));h=JSON.parse(localStorage.getItem("circlesCoords"));var _=[];$.each(h,function(e,o){var a={cx:0,cy:0,r:1},n=m.circlePath(this.cx,this.cy,this.r).attr({fill:t("mapPointsColor"),stroke:t("mapPointsBorderColor"),"stroke-width":t("pointsBorderWidth"),id:o.id,"data-time":o.time}),r=Snap.path.intersection(n,$(d).attr("d"));0==r.length?(alert("Please, return to the previous step and draw points right on the route line"),document.location.replace("http://127.0.0.1:8080/")):(a.cx=r[0].x,a.cy=r[0].y),_.push(a),r.forEach(function(t){m.circle(t.x,t.y,1)}),localStorage.setItem("points",JSON.stringify(_))});var L=n.getElementsByTagName("circle");for(c=0;c<L.length;c++)L[c].style.fill="transparent";if("true"==t("checkboxState")&&"true"==t("defaultOption")){var M=document.createElementNS("http://www.w3.org/2000/svg","circle");$(M).attr({cx:d.getPointAtLength(1).x,cy:d.getPointAtLength(1).y,r:t("pointsRadius"),stroke:t("mapPointsBorderColor"),fill:t("mapPointsColor"),"stroke-width":t("pointsBorderWidth")}),r.append(M)}if(null!=localStorage.getItem("PointsContent"))var z=JSON.parse(localStorage.getItem("PointsContent"));else z=[];for(c=0;c<h.length;c++){var R=n.getElementById(h[c].id),T=document.createElementNS("http://www.w3.org/2000/svg","g"),A=document.createElementNS("http://www.w3.org/2000/svg","text");$(A).attr({x:h[c].cx,y:h[c].cy+20,"font-size":12,"font-style":"italic",fill:"#ccccccc",class:"cityName"}),T.append(R),T.append(A),g.append(T),i.append(g),r.append(i);var W=h[c].time;for(P=0;P<z.length;P++){var j=z[P].data;if(z[P].pointId==W){z[P].pointId;if(0!=j.length){var D=n.getElementById(h[c].id),F=$(D).parent().find("text");z[P].cityName&&$(F).text(z[P].cityName),$(D).css("fill","#990033")}}}$(R).addClass("button-collapse"),$(R).attr("data-activates","slide-out"),$(R).attr("href","#"),R.style.cursor="pointer",$(R).mouseenter(function(){$(this).css("transition","0.5s"),$(this).css("stroke-width","6px"),$(this).css("stroke",t("mapPointsBorderColor"))}).mouseout(function(){$(this).css("transition","0.5s"),$(this).css("stroke-width","3px"),$(this).css("stroke",t("mapPointsBorderColor"))});var X,G,Q={zoom:100,top:0,bottom:0,left:0,right:0},U=Snap(i),q=(Snap(g),JSON.parse(localStorage.getItem("mapStyleProperties"))||{transform:""});if(q.transform){var H=q.transform,Y=H.match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)});scaleImg=Y[0],X=Y[1],G=Y[2],U.attr("transform","scale("+scaleImg+") translate("+X+" "+G+")")}q.top=parseInt(q.top),q.left=parseInt(q.left),R.addEventListener("click",function(){function e(t,e){t.addEventListener("load",function(){for(var o=t.contentDocument.documentElement.querySelector("#transport"),a=new XMLSerializer,n=o.getElementsByTagName("path"),r=0;r<n.length;r++)n[r].style.fill=e;document.getElementById("subPathIconObj");var l=a.serializeToString(o);b.icon=l,console.log(S),$("input[name=color]").change(function(t){$("option:selected",this);var e=this.value,o=this.name;b[o]=e,console.log(b[o]);for(var a=0;a<n.length;a++)n[a].style.fill=b.color})})}$(".button-collapse").sideNav("show"),$(".button-collapse").off("click").sideNav();var a=parseInt(this.id),n=$(this).attr("data-time");document.getElementById("pointIndex").innerHTML=a;var r=this,l=$(this).attr("data-time"),s=JSON.parse(localStorage.getItem("PointsContent"))||[],i=JSON.parse(localStorage.getItem("mapStyleProperties"))||{transform:""};if(i.transform.length>0){var c=(H=i.transform).match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)});p=c[0],g=c[1],d=c[2]}if(s[a-1])p=s[a-1].zoom,d=s[a-1].top,g=s[a-1].left;else{var p=1,d=0,g=0;$("#pointName").html(""),$("#point_name_label").removeClass(),U.animate({transform:"scale("+p+") translate("+d+" "+g+")"},200)}if($("#plus").bind("click",function(){p+=.1,Q.zoom=p,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),$("#minus").bind("click",function(){(p-=.1)<=1&&(p=1),Q.zoom=p,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),$("#moveLeft").bind("click",function(){g+=20,Q.left=g,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),$("#moveRight").bind("click",function(){g-=20,Q.left=g,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),$("#moveTop").bind("click",function(){d+=20,Q.top=d,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),$("#moveBottom").bind("click",function(){d-=20,Q.top=d,U.animate({transform:"scale("+p+") translate("+g+" "+d+")"},300)}),null!=localStorage.getItem("PointsContent")){console.log("kek");for(var m,u=0;u<s.length;u++){var f=s[u].pointId==n;if(s[u].pointId==n){U.animate({transform:"scale("+parseFloat(s[u].zoom)+") translate("+s[u].left+" "+s[u].top+")"},300),console.log(s[u].cityName);var v=s[u].cityName;console.log(v)}f&&(m=s[u].data)}console.log(v),v?($("#pointName").val(v),console.log($("#pointName").closest("label")),$("#point_name_label").addClass("active")):($("#pointName").val(""),$("#point_name_label").removeClass("active")),editor.setData(m)}var S=JSON.parse(localStorage.getItem("subpathIcons"))||[],b={pointId:"",icon:"",color:"",size:5,icon_src:""};$("input[name=showIcon]").prop("checked",!1),$("#settings_btn").attr("disabled","disabled");for(var I=0;I<S.length;I++)if(parseInt(S[I].pointId)==a){$("input[name=showIcon]").prop("checked","checked"),$("#settings_btn").removeAttr("disabled"),console.log($("input[name=showIcon]").attr("checked"));break}$("#icon_switch").on("click",function(){if($("input[name=showIcon]").is(":checked"))$("input[name=showIcon]").attr("checked",!0),$("#settings_btn").removeAttr("disabled");else{$("input[name=showIcon]").attr("checked",!1),$("#settings_btn").attr("disabled","disabled");for(var t=0;t<S.length;t++)parseInt(S[t].pointId)==a&&S.splice(t,1);S.sort(o),localStorage.setItem("subpathIcons",JSON.stringify(S))}}),$("#settings_btn").on("click",function(){$("#modal2").modal("open")}),$(".modal2").modal({ready:function(){var t=JSON.parse(localStorage.getItem("subpathIcons"))||[];if(0!=t.length)for(var o=0;o<t.length;o++){if(parseInt(t[o].pointId)===a){console.log("EQuaLS!"),$("input[name=color]").val(t[o].color);var n=document.getElementById("subPathIconObj");$("#subPathIconObj").attr("data",t[o].icon_src),e(n,t[o].color);break}console.log(" NOT EQuaLS!"),$("input[name=color]").val("rgba(255, 255, 255, 1)"),$("#subPathIconObj").attr("data","")}},complete:function(){if(S.length>0)for(var t=0;t<S.length;t++)S[t].pointId==a&&S.splice(t,1);console.log(a);var e=$("#subPathIconObj").attr("data");e.length>0?(b.icon_src=e,b.color=$("input[name=color]").val(),b.pointId=a,S.push(b),S.sort(o),localStorage.setItem("subpathIcons",JSON.stringify(S)),console.log(S)):Materialize.toast("No icon to this point!",2e3)}}),$("input[name = color]").minicolors({opacity:!0,format:"rgb",rgbaString:!1,change:function(t,e){var o="rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")";console.log(o)},swatches:["rgba(154, 9, 173, 1)","rgba(240, 17, 17, 1)","rgba(0, 255, 21, 1)","rgba(15, 43, 255, 1)","rgba(255, 239, 13, 1)"],showSpeed:100}),$(".icon_gallery__item").on("click",function(){var t=$(this).attr("src");console.log(t);var o=document.getElementById("subPathIconObj");$("#subPathIconObj").attr("data",t),b.pointId=a,b.icon_src=t,e(o)}),document.getElementById("SavePointContent").onclick=function(){var e={pointId:0,cityName:"",zoom:p,left:g,top:d,slider:"false",data:""},a=$("#pointName").val();e.pointId=l,e.cityName=a,e.data=editor.getData();for(var n=0;n<z.length;n++)z[n].pointId==l&&z.splice(n,1);if(0==e.data.length)Materialize.toast("No data in point!",2e3);else{z.push(e);var s=$(r).parent().find("text");$(s).text(a),Materialize.toast("Your data is saved!",2e3)}z.sort(o);var i=$("#sidenav-overlay");$(i).css("background-color","none"),$(i).remove(),console.log(z,h);for(var c=[],m=0;m<h.length;m++)for(n=0;n<z.length;n++)h[m].time==z[n].pointId&&c.push(z[n]);console.log(c),localStorage.setItem("PointsContent",JSON.stringify(c)),e.data.length>0?$(r).css("fill","#990033"):0==e.data.length&&$(r).css("fill",t("mapPointsColor")),$(".button-collapse").sideNav("hide")}})}u=d.getTotalLength();var K=[];for(c=0;c<u;c++){var V;for(C=(V=d.getPointAtLength(c)).x,O=V.y,P=0;P<_.length;P++)Math.abs(Math.round(C-_[P].cx))<=0&&Math.abs(Math.round(O-_[P].cy))<=0&&K.push(c)}if(K.length!=_.length)for(c=0;c<K.length;c++)K[c+1]-K[c]==1&&K.splice(c,1);localStorage.setItem("stopsAtLength",JSON.stringify(K))},!1);JSON.parse(localStorage.getItem("mapStyleProperties"));$("body").css("background-color",t("bodyBackgroundColor"))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYXdNYXAuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJnZXRTZXR0aW5nRnJvbVN0b3JhZ2UiLCJzZXR0aW5nIiwiU2V0dGluZ3NPYmplY3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibWFwQ29sb3IiLCJtYXBTdHJva2VDb2xvciIsIm1hcFBvaW50c0NvbG9yIiwibWFwUG9pbnRzQm9yZGVyQ29sb3IiLCJtYXBSb3V0ZUNvbG9yIiwiYm9keUJhY2tncm91bmRDb2xvciIsInJvdXRlQm9yZGVyV2lkdGgiLCJwb2ludHNSYWRpdXMiLCJwb2ludHNCb3JkZXJXaWR0aCIsImNvbnRlbnRXaWR0aCIsImNvbnRlbnRBbGlnbiIsImNoZWNrYm94U3RhdGUiLCJkZWZhdWx0T3B0aW9uIiwiVXNlck9wdGlvbiIsIlN0YXJ0SWNvbiIsIlJvdXRlU3RhcnRJY29uQ29sb3IiLCJSb3V0ZVN0YXJ0SWNvblNpemUiLCJjb21wYXJlSWQiLCJvYmpBIiwib2JqQiIsImlkIiwiY29tcGFyZVRpbWUiLCJwb2ludElkIiwibW9kYWwiLCJ0YWJzIiwib24iLCJ0aGlzIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInRhcFRhcmdldCIsImFkZENsYXNzIiwic2lkZU5hdiIsIm1lbnVXaWR0aCIsImVkZ2UiLCJjbG9zZU9uQ2xpY2siLCJkcmFnZ2FibGUiLCJvbk9wZW4iLCJvbkNsb3NlIiwiY3NzIiwicmVtb3ZlIiwiY29sbGFwc2libGUiLCJyZXNpemFibGUiLCJoYW5kbGVzIiwibWF4V2lkdGgiLCJtaW5XaWR0aCIsImEiLCJnZXRFbGVtZW50QnlJZCIsIm1hcF91cmwiLCJhdHRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN2Z0RvYyIsImNvbnRlbnREb2N1bWVudCIsInN2Z1Jvb3QiLCJkb2N1bWVudEVsZW1lbnQiLCJNYXBQYXRoc0dyb3VwIiwiUGF0aHNBcnJheSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwid2hvbGVTdmdHcm91cCIsImNyZWF0ZUVsZW1lbnROUyIsInByb3AiLCJpIiwibGVuZ3RoIiwic3R5bGUiLCJmaWxsIiwic3Ryb2tlIiwiUGF0aERpcmVjdGlvbiIsInBhdGgiLCJTbmFwIiwicGx1Z2luIiwiRWxlbWVudCIsIlBhcGVyIiwiZ2xvYmFsIiwicHJvdG90eXBlIiwiY2lyY2xlUGF0aCIsImN4IiwiY3kiLCJyIiwicCIsInBhdGhHcm91cCIsImFwcGVuZCIsInMiLCJjaXJjbGVzQXJyYXkiLCJwYXRoTGVuZ3RoIiwiZ2V0VG90YWxMZW5ndGgiLCJwYXRoU3RhcnRJY29uIiwicGFyc2VkUGF0aFN0YXJ0SWNvbiIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImljb25PZmZzZXRYIiwiaWNvbk9mZnNldFkiLCJpY29uU2NhbGUiLCJncm91cCIsInRyYW5zZm9ybSIsImdldFBvaW50QXRMZW5ndGgiLCJ4IiwieSIsIkNpcmNsZXNBcnJheUNsb25lIiwiayIsImNpcmNsZXNDb3VudGVyIiwicG9pbnRYIiwicGF0aExlbmd0aEF0UG9pbnQiLCJwb2ludFkiLCJqIiwiTWF0aCIsImFicyIsInJvdW5kIiwibCIsInNwbGljZSIsInNvcnQiLCJjb25zb2xlIiwibG9nIiwicGF0aF9lbmRfcG9pbnQiLCJjdXJyZW50VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwibGFzdF9wYXRoX3BvaW50IiwidGltZSIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwicG9pbnRzQXJyYXkiLCJlYWNoIiwiaW5kZXgiLCJlbCIsInBvaW50c09iaiIsImNpcmNsZSIsInN0cm9rZS13aWR0aCIsImRhdGEtdGltZSIsImludGVyc2VjdHMiLCJpbnRlcnNlY3Rpb24iLCJhbGVydCIsImxvY2F0aW9uIiwicmVwbGFjZSIsImZvckVhY2giLCJpbnRlcnNlY3Rpb25DaXJjbGVzIiwic3RhcnRDaXJjbGUiLCJwb2ludHNEYXRhQ29udGVudEFycmF5IiwicGF0aHMiLCJjaXJjbGVHcm91cCIsInRleHQiLCJmb250LXNpemUiLCJmb250LXN0eWxlIiwiY2xhc3MiLCJlcXVhbFRpbWVBdHRyIiwicG9pbnRUZXh0IiwiZGF0YSIsIkZpbGxlZENvbnRlbnRQYXRocyIsIkNsb3Nlc3RUZXh0RmllbGQiLCJwYXJlbnQiLCJmaW5kIiwiY2l0eU5hbWUiLCJjdXJzb3IiLCJtb3VzZWVudGVyIiwibW91c2VvdXQiLCJtb3ZlTGVmdCIsIm1vdmVUb3AiLCJEaXNwbGFjZW1lbnRPYmoiLCJ6b29tIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0IiwiRnVsbE1hcEdyb3VwIiwic2F2ZWREaXNwbGFjZW1lbnQiLCJ0cmFuc2Zvcm1TdHJpbmciLCJTdHJpbmdWYWx1ZXMiLCJtYXRjaCIsIm1hcCIsInYiLCJwYXJzZUZsb2F0Iiwic2NhbGVJbWciLCJwYXJzZUludCIsImxvYWRJY29uIiwiaWNvbl9jb250YWluZXIiLCJpY29uX2NvbG9yIiwicGF0aHNfZ3JvdXAiLCJxdWVyeVNlbGVjdG9yIiwiWE1MU2VyaWFsaXplciIsInBhdGhEaXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInN1YnBhdGhTZXR0aW5nIiwiaWNvbiIsInN1YnBhdGhJY29ucyIsImNoYW5nZSIsInZhbHVlU2VsZWN0ZWQiLCJ2YWx1ZSIsIm5hbWUiLCJjb2xvciIsIm9mZiIsIk5wb2ludCIsImRhdGFUaW1lIiwiaW5uZXJIVE1MIiwiY3VycmVudFBhdGgiLCJwb2ludERhdGFUaW1lIiwiZ2V0UG9pbnREYXRhIiwicG9pbnRzRGVmYXVsdERpc3BsYWNlbWVudCIsImh0bWwiLCJhbmltYXRlIiwiYmluZCIsIlBvaW50TGFzdERhdGEiLCJjb3VudCIsIlBvaW50Q2l0eU5hbWUiLCJ2YWwiLCJjbG9zZXN0IiwiZWRpdG9yIiwic2V0RGF0YSIsInNpemUiLCJpY29uX3NyYyIsInJlbW92ZUF0dHIiLCJpcyIsImljb25fc2V0dGluZ3MiLCJjb21wbGV0ZSIsInNvdXJjZSIsIk1hdGVyaWFsaXplIiwidG9hc3QiLCJtaW5pY29sb3JzIiwib3BhY2l0eSIsImZvcm1hdCIsInJnYmFTdHJpbmciLCJoc2wiLCJyZ2IiLCJnIiwiYiIsInN3YXRjaGVzIiwic2hvd1NwZWVkIiwiaWNvblNSQyIsIm9uY2xpY2siLCJwb2ludHNEYXRhQ29udGVudCIsInNsaWRlciIsIlBvaW50TmFtZSIsImdldERhdGEiLCJ0ZXh0RmllbGQiLCJvdmVybGF5IiwiU29ydGVkRGF0YUFycmF5Iiwic3RvcHNBdExlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FFZCxTQUFTQyxFQUFzQkMsR0FDM0IsSUFBSUMsRUFBaUJDLEtBQUtDLE1BQU1DLGFBQWFDLFFBQVEsZUFDakRDLFNBQVUseUJBQ1ZDLGVBQWdCLG1CQUNoQkMsZUFBZ0IscUJBQ2hCQyxxQkFBc0IsbUJBQ3RCQyxjQUFlLG1CQUNmQyxvQkFBcUIseUJBQ3JCQyxpQkFBa0IsSUFDbEJDLGFBQWMsSUFDZEMsa0JBQW1CLElBQ25CQyxhQUFjLEtBQ2RDLGFBQWMsYUFDZEMsY0FBZSxRQUNmQyxjQUFlLFFBQ2ZDLFdBQVksUUFDWkMsVUFBVyxHQUNYQyxvQkFBcUIsbUJBQ3JCQyxtQkFBb0IsS0FFeEIsR0FBSXJCLEVBQWVELEdBQ2YsT0FBT0MsRUFBZUQsR0FvRDlCLFNBQVN1QixFQUFVQyxFQUFNQyxHQUNyQixPQUFPRCxFQUFLRSxHQUFLRCxFQUFLQyxHQUcxQixTQUFTQyxFQUFZSCxFQUFNQyxHQUN2QixPQUFPRCxFQUFLSSxRQUFVSCxFQUFLRyxRQXREckIxQixLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGFBVzFDVCxFQUFFLFVBQVVpQyxRQUlaakMsRUFBRSxXQUFXa0MsS0FBSyxhQUFjLFNBQ2hDbEMsRUFBRSxTQUFTbUMsR0FBRyxRQUFTLFdBQ2RuQyxFQUFFb0MsTUFBTUMsU0FBUyxZQUlsQnJDLEVBQUVvQyxNQUFNRSxZQUFZLFVBQ3BCdEMsRUFBRSxlQUFldUMsVUFBVSxXQUozQnZDLEVBQUVvQyxNQUFNSSxTQUFTLFVBQ2pCeEMsRUFBRSxlQUFldUMsVUFBVSxXQU9uQ3ZDLEVBQUUsb0JBQW9CeUMsU0FDbEJDLFVB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QUFpQjFILEtBQUsySCxVQUFVa0gsSUFFakROLEVBQWtCbEYsS0FBS3BGLE9BQVMsRUFDaEN2RSxFQUFFME0sR0FBYTFKLElBQUksT0FBUSxXQUNhLEdBQWpDNkwsRUFBa0JsRixLQUFLcEYsUUFDOUJ2RSxFQUFFME0sR0FBYTFKLElBQUksT0FBUTdDLEVBQXNCLG1CQUdyREgsRUFBRSxvQkFBb0J5QyxRQUFRLFdBUXRDbUQsRUFBYWhCLEVBQUtpQixpQkFJakIsSUFGRHVKLEtBRUosSUFBUzlLLEVBQUksRUFBR0EsRUFBSXNCLEVBQVl0QixJQU92QixDQUFBLElBTkR3QyxFQU1KLElBSklELEdBRkFDLEVBQW9CbEMsRUFBSzJCLGlCQUFpQmpDLElBRWZrQyxFQUMzQk8sRUFBU0QsRUFBa0JMLEVBR3RCTyxFQUFJLEVBQUdBLEVBQUlrQixFQUFZM0QsT0FBUXlDLElBR2hDQyxLQUFLQyxJQUFJRCxLQUFLRSxNQUFNTixFQUFTcUIsRUFBWWxCLEdBQUc1QixNQUFRLEdBQUs2QixLQUFLQyxJQUFJRCxLQUFLRSxNQUFNSixFQUFTbUIsRUFBWWxCLEdBQUczQixNQUFRLEdBRTdHK0osRUFBY3JILEtBQUt6RCxHQVUvQixHQUFJOEssRUFBYzdLLFFBQVUyRCxFQUFZM0QsT0FDcEMsSUFBU0QsRUFBSSxFQUFHQSxFQUFJOEssRUFBYzdLLE9BQVFELElBQ2xDOEssRUFBYzlLLEVBQUksR0FBSzhLLEVBQWM5SyxJQUFNLEdBQUc4SyxFQUFjL0gsT0FBTy9DLEVBQUcsR0FJbEY5RCxhQUFhd0gsUUFBUSxnQkFBaUIxSCxLQUFLMkgsVUFBVW1ILE1BV3RELEdBR2dCOU8sS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSx1QkFJbkRULEVBQUUsUUFBUWdELElBQUksbUJBQW9CN0MsRUFBc0IiLCJmaWxlIjoiZHJhd01hcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldFNldHRpbmdGcm9tU3RvcmFnZShzZXR0aW5nKSB7XHJcbiAgICAgICAgdmFyIFNldHRpbmdzT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNldHRpbmdzXCIpKSB8fCB7XHJcbiAgICAgICAgICAgIG1hcENvbG9yOiBcInJnYmEoMjU1LCAyMDQsIDEyOCwgMSlcIixcclxuICAgICAgICAgICAgbWFwU3Ryb2tlQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAxKVwiLFxyXG4gICAgICAgICAgICBtYXBQb2ludHNDb2xvcjogXCJyZ2JhKDAsIDAsIDI1NSwgMSlcIixcclxuICAgICAgICAgICAgbWFwUG9pbnRzQm9yZGVyQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAxKVwiLFxyXG4gICAgICAgICAgICBtYXBSb3V0ZUNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICAgICAgYm9keUJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI0MywgMjI5LCAyNDUsIDEpXCIsXHJcbiAgICAgICAgICAgIHJvdXRlQm9yZGVyV2lkdGg6IFwiNFwiLFxyXG4gICAgICAgICAgICBwb2ludHNSYWRpdXM6IFwiOFwiLFxyXG4gICAgICAgICAgICBwb2ludHNCb3JkZXJXaWR0aDogXCIxXCIsXHJcbiAgICAgICAgICAgIGNvbnRlbnRXaWR0aDogXCI1MFwiLFxyXG4gICAgICAgICAgICBjb250ZW50QWxpZ246IFwiZmxleC1zdGFydFwiLFxyXG4gICAgICAgICAgICBjaGVja2JveFN0YXRlOiBcImZhbHNlXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb246IFwiZmFsc2VcIixcclxuICAgICAgICAgICAgVXNlck9wdGlvbjogXCJmYWxzZVwiLFxyXG4gICAgICAgICAgICBTdGFydEljb246IFwiXCIsXHJcbiAgICAgICAgICAgIFJvdXRlU3RhcnRJY29uQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAxKVwiLFxyXG4gICAgICAgICAgICBSb3V0ZVN0YXJ0SWNvblNpemU6IFwiOFwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoU2V0dGluZ3NPYmplY3Rbc2V0dGluZ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzT2JqZWN0W3NldHRpbmddO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBrZWsgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiU2V0dGluZ3NcIikpXHJcbiAgICAvLyBjb25zb2xlLmxvZyhrZWspO1xyXG4gICAgZnVuY3Rpb24gZ2V0U3ZnUG9pbnRQb3NpdGlvbihzdHJpbmcpIHtcclxuICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMSk7XHJcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnNwbGl0KFwiY1wiKTtcclxuICAgICAgICB2YXIgc3Vic3RyaW5nID0gc3RyaW5nLnNwbGljZSgxKTtcclxuICAgICAgICBzdWJzdHJpbmcgPSBzdWJzdHJpbmcuam9pbihcImNcIik7XHJcbiAgICAgICAgcmV0dXJuIHN1YnN0cmluZztcclxuICAgIH1cclxuXHJcblxyXG4gICAgJCgnLm1vZGFsJykubW9kYWwoKTtcclxuXHJcblxyXG5cclxuICAgICQoJ3VsLnRhYnMnKS50YWJzKCdzZWxlY3RfdGFiJywgJ3RhYl8yJyk7XHJcbiAgICAkKFwiI21lbnVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJy5hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKCcudGFwLXRhcmdldCcpLnRhcFRhcmdldCgnb3BlbicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICQoJy50YXAtdGFyZ2V0JykudGFwVGFyZ2V0KCdjbG9zZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoe1xyXG4gICAgICAgIG1lbnVXaWR0aDogMzIzLFxyXG4gICAgICAgIGVkZ2U6ICdsZWZ0JyxcclxuICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlLFxyXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgICBvbk9wZW46IGZ1bmN0aW9uKCkge30sXHJcbiAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoXCIjc2xpZGUtb3V0XCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVgoLTEwMCUpXCIpO1xyXG4gICAgICAgICAgICAkKFwiZGl2XCIpLnJlbW92ZShcIiNzaWRlbmF2LW92ZXJsYXlcIik7XHJcbiAgICAgICAgICAgICQoJy5idXR0b24tY29sbGFwc2UnKS5zaWRlTmF2KCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoXCIjc2xpZGUtb3V0XCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVgoLTEwMCUpXCIpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImtla1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbiAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSgpO1xyXG5cclxuICAgICQoXCIuc2lkZS1uYXZcIikucmVzaXphYmxlKHtcclxuICAgICAgICBoYW5kbGVzOiAnZScsXHJcbiAgICAgICAgbWF4V2lkdGg6IDEyMDAsXHJcbiAgICAgICAgbWluV2lkdGg6IDMwMFxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFyZUlkKG9iakEsIG9iakIpIHtcclxuICAgICAgICByZXR1cm4gb2JqQS5pZCAtIG9iakIuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFyZVRpbWUob2JqQSwgb2JqQikge1xyXG4gICAgICAgIHJldHVybiBvYmpBLnBvaW50SWQgLSBvYmpCLnBvaW50SWQ7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICB2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcclxuICAgIHZhciBtYXBfdXJsID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWFwJykpO1xyXG4gICAgJCgnI21hcCcpLmF0dHIoJ2RhdGEnLCBtYXBfdXJsKTtcclxuICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHN2Z0RvYyA9IGEuY29udGVudERvY3VtZW50O1xyXG4gICAgICAgIHZhciBzdmdSb290ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgTWFwUGF0aHNHcm91cCA9IHN2Z1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJtYXBQYXRoc1wiKTtcclxuICAgICAgICB2YXIgUGF0aHNBcnJheSA9IE1hcFBhdGhzR3JvdXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKTtcclxuICAgICAgICB2YXIgd2hvbGVTdmdHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgICAgICQod2hvbGVTdmdHcm91cCkuYXR0cihcImlkXCIsIFwid2hvbGVTdmdHcm91cFwiKTtcclxuXHJcbiAgICAgICAgJChcImlucHV0W25hbWU9bGlnaHQtdHJpZ2dlcl1cIikuYXR0cihcImRhdGEtbGlnaHRcIiwgXCJsaWdodE9mZlwiKTtcclxuICAgICAgICAkKFwiaW5wdXRbbmFtZT1saWdodC10cmlnZ2VyXVwiKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aHNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLmZpbGwgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBDb2xvclwiKTtcclxuICAgICAgICAgICAgUGF0aHNBcnJheVtpXS5zdHlsZS5zdHJva2UgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBTdHJva2VDb2xvclwiKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgUGF0aERpcmVjdGlvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhdGgnKSk7XHJcblxyXG4gICAgICAgIGlmIChQYXRoRGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcblxyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoJ2QnLCBQYXRoRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKCdmaWxsJywgJ3RyYW5zcGFyZW50Jyk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignc3Ryb2tlJywgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUm91dGVDb2xvclwiKSk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignc3Ryb2tlLXdpZHRoJywgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicm91dGVCb3JkZXJXaWR0aFwiKSk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cihcInN0cm9rZS1saW5lY2FwXCIsIFwicm91bmRcIilcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBTbmFwLnBsdWdpbihmdW5jdGlvbihTbmFwLCBFbGVtZW50LCBQYXBlciwgZ2xvYmFsKSB7XHJcbiAgICAgICAgICAgIFBhcGVyLnByb3RvdHlwZS5jaXJjbGVQYXRoID0gZnVuY3Rpb24oY3gsIGN5LCByKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IFwiTVwiICsgY3ggKyBcIixcIiArIGN5O1xyXG4gICAgICAgICAgICAgICAgcCArPSBcIm1cIiArIC1yICsgXCIsMFwiO1xyXG4gICAgICAgICAgICAgICAgcCArPSBcImFcIiArIHIgKyBcIixcIiArIHIgKyBcIiAwIDEsMCBcIiArIChyICogMikgKyBcIiwwXCI7XHJcbiAgICAgICAgICAgICAgICBwICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMSwwIFwiICsgLShyICogMikgKyBcIiwwXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRoKHAsIGN4LCBjeSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBwYXRoR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuICAgICAgICBwYXRoR3JvdXAuaWQgPSBcInBhdGhHcm91cFwiO1xyXG4gICAgICAgIHBhdGhHcm91cC5hcHBlbmQocGF0aCk7XHJcbiAgICAgICAgd2hvbGVTdmdHcm91cC5hcHBlbmQocGF0aEdyb3VwKTtcclxuICAgICAgICB3aG9sZVN2Z0dyb3VwLmFwcGVuZChNYXBQYXRoc0dyb3VwKTtcclxuICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB2YXIgcyA9IFNuYXAocGF0aEdyb3VwKTtcclxuXHJcbiAgICAgICAgdmFyIGNpcmNsZXNBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NpcmNsZXNDb29yZHMnKSk7XHJcbiAgICAgICAgdmFyIHBhdGhMZW5ndGggPSBwYXRoLmdldFRvdGFsTGVuZ3RoKCk7XHJcblxyXG5cclxuICAgICAgICB2YXIgc3RhcnRSb3V0ZUZsYWcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiU3RhcnRSb3V0ZUljb25cIikpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBwYXRoU3RhcnRJY29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlN0YXJ0Um91dGVJY29uXCIpKTtcclxuICAgICAgICB2YXIgb1BhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgICAgICB2YXIgb0RPTSA9IG9QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHBhdGhTdGFydEljb24sIFwidGV4dC94bWxcIik7XHJcblxyXG4gICAgICAgIHZhciBwYXJzZWRQYXRoU3RhcnRJY29uID0gb0RPTS5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGljb25PZmZzZXRYID0gJChwYXJzZWRQYXRoU3RhcnRJY29uKS5hdHRyKFwiZGF0YS1vZmZzZXQteFwiKTtcclxuICAgICAgICB2YXIgaWNvbk9mZnNldFkgPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLW9mZnNldC15XCIpO1xyXG4gICAgICAgIHZhciBpY29uU2NhbGUgPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLXNjYWxlXCIpO1xyXG5cclxuICAgICAgICB2YXIgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuXHJcbiAgICAgICAgaWYgKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlVzZXJPcHRpb25cIikgPT0gXCJ0cnVlXCIgJiYgcGF0aFN0YXJ0SWNvbikge1xyXG5cclxuICAgICAgICAgICAgJChwYXJzZWRQYXRoU3RhcnRJY29uKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgIGZpbGw6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGljb25TY2FsZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGFyc2VkUGF0aFN0YXJ0SWNvbik7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICQoZ3JvdXApLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAocGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnggLSAoZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpIC8gaWNvbk9mZnNldFgpKSArIFwiIFwiICsgKHBhdGguZ2V0UG9pbnRBdExlbmd0aCgxKS55IC0gKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uU2l6ZVwiKSAvIGljb25PZmZzZXRZKSkgKyBcIikgXCIgKyBcInNjYWxlKFwiICsgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpIC8gMTAwICsgXCIpXCIpO1xyXG4gICAgICAgICAgICBncm91cC5hcHBlbmQocGFyc2VkUGF0aFN0YXJ0SWNvbik7XHJcblxyXG4gICAgICAgICAgICBwYXRoR3JvdXAuYXBwZW5kKGdyb3VwKTtcclxuICAgICAgICAgICAgd2hvbGVTdmdHcm91cC5hcHBlbmQocGF0aEdyb3VwKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBDaXJjbGVzQXJyYXlDbG9uZSA9IFtdO1xyXG4gICAgICAgIHZhciBjb250ZW50T2ZQb2ludHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykpIHx8IFtdO1xyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjaXJjbGVzQXJyYXkubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgQ2lyY2xlc0FycmF5Q2xvbmVba10gPSBjaXJjbGVzQXJyYXlba107XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIGNpcmNsZXNDb3VudGVyID0gMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHBhdGhMZW5ndGhBdFBvaW50ID0gcGF0aC5nZXRQb2ludEF0TGVuZ3RoKGkpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRYID0gcGF0aExlbmd0aEF0UG9pbnQueDtcclxuICAgICAgICAgICAgdmFyIHBvaW50WSA9IHBhdGhMZW5ndGhBdFBvaW50Lnk7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDaXJjbGVzQXJyYXlDbG9uZS5sZW5ndGg7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhNYXRoLnJvdW5kKHBvaW50WCAtIENpcmNsZXNBcnJheUNsb25lW2pdLmN4KSkgPD0gOCAmJiBNYXRoLmFicyhNYXRoLnJvdW5kKHBvaW50WSAtIENpcmNsZXNBcnJheUNsb25lW2pdLmN5KSkgPD0gOCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGNpcmNsZXNBcnJheS5sZW5ndGg7IGwrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKE1hdGgucm91bmQoY2lyY2xlc0FycmF5W2xdLmN4IC0gQ2lyY2xlc0FycmF5Q2xvbmVbal0uY3gpKSA8PSA0ICYmIE1hdGguYWJzKE1hdGgucm91bmQoY2lyY2xlc0FycmF5W2xdLmN5IC0gQ2lyY2xlc0FycmF5Q2xvbmVbal0uY3kpKSA8PSA0KSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZXNBcnJheVtsXS5pZCA9IGNpcmNsZXNDb3VudGVyKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQ2lyY2xlc0FycmF5Q2xvbmUuc3BsaWNlKGosIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2lyY2xlc0FycmF5KTtcclxuICAgICAgICBjaXJjbGVzQXJyYXkuc29ydChjb21wYXJlSWQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNpcmNsZXNBcnJheSk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbnRlbnRPZlBvaW50cyk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHBhdGgpO1xyXG5cclxuICAgICAgICB2YXIgcGF0aF9lbmRfcG9pbnQgPSBwYXRoLmdldFBvaW50QXRMZW5ndGgocGF0aC5nZXRUb3RhbExlbmd0aCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsYXN0X3BhdGhfcG9pbnQpO1xyXG4gICAgICAgIHZhciBMYXN0UG9pbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBMYXN0UG9pbnREYXRlLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjaXJjbGVzQXJyYXkpO1xyXG5cclxuICAgICAgICBpZiAoY2lyY2xlc0FycmF5W2NpcmNsZXNBcnJheS5sZW5ndGggLSAxXS5jeCA9PSBwYXRoX2VuZF9wb2ludC54ICYmIGNpcmNsZXNBcnJheVtjaXJjbGVzQXJyYXkubGVuZ3RoIC0gMV0uY3kgPT0gcGF0aF9lbmRfcG9pbnQueSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjaXJjbGVzQXJyYXlbY2lyY2xlc0FycmF5Lmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgbGFzdF9wYXRoX3BvaW50ID0geyBjeDogcGF0aF9lbmRfcG9pbnQueCwgY3k6IHBhdGhfZW5kX3BvaW50LnksIGlkOiBjaXJjbGVzQXJyYXkubGVuZ3RoLCByOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNSYWRpdXNcIiksIHRpbWU6IGN1cnJlbnRUaW1lIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxhc3RfcGF0aF9wb2ludCk7XHJcbiAgICAgICAgICAgIGNpcmNsZXNBcnJheS5wdXNoKGxhc3RfcGF0aF9wb2ludCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NpcmNsZXNDb29yZHMnLCBKU09OLnN0cmluZ2lmeShjaXJjbGVzQXJyYXkpKTtcclxuXHJcblxyXG5cclxuICAgICAgICB2YXIgY2lyY2xlc0FycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2lyY2xlc0Nvb3JkcycpKTtcclxuICAgICAgICB2YXIgcG9pbnRzQXJyYXkgPSBbXTtcclxuICAgICAgICB2YXIgc3RyaW5nQXJyID0gJyc7XHJcblxyXG5cclxuXHJcbiAgICAgICAgJC5lYWNoKGNpcmNsZXNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHNPYmogPSB7XHJcbiAgICAgICAgICAgICAgICBjeDogMCxcclxuICAgICAgICAgICAgICAgIGN5OiAwLFxyXG4gICAgICAgICAgICAgICAgcjogMVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBjaXJjbGUgPSBzLmNpcmNsZVBhdGgodGhpcy5jeCwgdGhpcy5jeSwgdGhpcy5yKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgIGZpbGw6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0NvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNCb3JkZXJDb2xvclwiKSxcclxuICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInBvaW50c0JvcmRlcldpZHRoXCIpLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGVsLmlkLFxyXG4gICAgICAgICAgICAgICAgXCJkYXRhLXRpbWVcIjogZWwudGltZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBpbnRlcnNlY3RzID0gU25hcC5wYXRoLmludGVyc2VjdGlvbihjaXJjbGUsICQocGF0aCkuYXR0cignZCcpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSwgcmV0dXJuIHRvIHRoZSBwcmV2aW91cyBzdGVwIGFuZCBkcmF3IHBvaW50cyByaWdodCBvbiB0aGUgcm91dGUgbGluZVwiKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlcGxhY2UoXCJodHRwOi8vMTI3LjAuMC4xOjgwODAvXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzT2JqLmN4ID0gaW50ZXJzZWN0c1swXS54O1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzT2JqLmN5ID0gaW50ZXJzZWN0c1swXS55O1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgcG9pbnRzQXJyYXkucHVzaChwb2ludHNPYmopO1xyXG5cclxuICAgICAgICAgICAgaW50ZXJzZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcy5jaXJjbGUoZWwueCwgZWwueSwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BvaW50cycsIEpTT04uc3RyaW5naWZ5KHBvaW50c0FycmF5KSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIGludGVyc2VjdGlvbkNpcmNsZXMgPSBzdmdEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjaXJjbGVcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlcnNlY3Rpb25DaXJjbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGludGVyc2VjdGlvbkNpcmNsZXNbaV0uc3R5bGUuZmlsbCA9IFwidHJhbnNwYXJlbnRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJjaGVja2JveFN0YXRlXCIpID09IFwidHJ1ZVwiICYmIGdldFNldHRpbmdGcm9tU3RvcmFnZShcImRlZmF1bHRPcHRpb25cIikgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0Q2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcclxuICAgICAgICAgICAgJChzdGFydENpcmNsZSkuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBjeDogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLngsXHJcbiAgICAgICAgICAgICAgICBjeTogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnksXHJcbiAgICAgICAgICAgICAgICByOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNSYWRpdXNcIiksXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0JvcmRlckNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNCb3JkZXJXaWR0aFwiKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJChzdGFydENpcmNsZSkpO1xyXG4gICAgICAgICAgICBzdmdSb290LmFwcGVuZChzdGFydENpcmNsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUG9pbnRzQ29udGVudCcpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50c0RhdGFDb250ZW50QXJyYXkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHNEYXRhQ29udGVudEFycmF5ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2lyY2xlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRocyA9IHN2Z0RvYy5nZXRFbGVtZW50QnlJZChjaXJjbGVzQXJyYXlbaV0uaWQpO1xyXG4gICAgICAgICAgICB2YXIgY2lyY2xlR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAndGV4dCcpO1xyXG4gICAgICAgICAgICAkKHRleHQpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgeDogY2lyY2xlc0FycmF5W2ldLmN4LFxyXG4gICAgICAgICAgICAgICAgeTogY2lyY2xlc0FycmF5W2ldLmN5ICsgMjAsXHJcbiAgICAgICAgICAgICAgICBcImZvbnQtc2l6ZVwiOiAxMixcclxuICAgICAgICAgICAgICAgIFwiZm9udC1zdHlsZVwiOiBcIml0YWxpY1wiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogXCIjY2NjY2NjY1wiLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY2l0eU5hbWVcIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNpcmNsZUdyb3VwLmFwcGVuZChwYXRocyk7XHJcbiAgICAgICAgICAgIGNpcmNsZUdyb3VwLmFwcGVuZCh0ZXh0KTtcclxuICAgICAgICAgICAgcGF0aEdyb3VwLmFwcGVuZChjaXJjbGVHcm91cCk7XHJcbiAgICAgICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKHBhdGhHcm91cCk7XHJcbiAgICAgICAgICAgIHN2Z1Jvb3QuYXBwZW5kKHdob2xlU3ZnR3JvdXApO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBlcXVhbFRpbWVBdHRyID0gY2lyY2xlc0FycmF5W2ldLnRpbWU7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvaW50c0RhdGFDb250ZW50QXJyYXkubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb2ludFRleHQgPSBwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzRGF0YUNvbnRlbnRBcnJheVtqXS5wb2ludElkID09IGVxdWFsVGltZUF0dHIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLnBvaW50SWQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRUZXh0Lmxlbmd0aCAhPSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgRmlsbGVkQ29udGVudFBhdGhzID0gc3ZnRG9jLmdldEVsZW1lbnRCeUlkKGNpcmNsZXNBcnJheVtpXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDbG9zZXN0VGV4dEZpZWxkID0gJChGaWxsZWRDb250ZW50UGF0aHMpLnBhcmVudCgpLmZpbmQoXCJ0ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhDbG9zZXN0VGV4dEZpZWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0uY2l0eU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChDbG9zZXN0VGV4dEZpZWxkKS50ZXh0KHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaXJjbGVzQXJyYXlbaV0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKEZpbGxlZENvbnRlbnRQYXRocykuY3NzKFwiZmlsbFwiLCBcIiM5OTAwMzNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAkKHBhdGhzKS5hZGRDbGFzcygnYnV0dG9uLWNvbGxhcHNlJyk7XHJcbiAgICAgICAgICAgICQocGF0aHMpLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJywgXCJzbGlkZS1vdXRcIik7XHJcbiAgICAgICAgICAgICQocGF0aHMpLmF0dHIoJ2hyZWYnLCBcIiNcIik7XHJcbiAgICAgICAgICAgIHBhdGhzLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICAgICAgICAkKHBhdGhzKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJ0cmFuc2l0aW9uXCIsIFwiMC41c1wiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwic3Ryb2tlLXdpZHRoXCIsIFwiNnB4XCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJzdHJva2VcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIikpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0pLm1vdXNlb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJ0cmFuc2l0aW9uXCIsIFwiMC41c1wiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwic3Ryb2tlLXdpZHRoXCIsIFwiM3B4XCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJzdHJva2VcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBEaXNwbGFjZW1lbnRPYmogPSB7XHJcbiAgICAgICAgICAgICAgICB6b29tOiAxMDAsXHJcbiAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICBib3R0b206IDAsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBGdWxsTWFwR3JvdXAgPSBTbmFwKHdob2xlU3ZnR3JvdXApO1xyXG4gICAgICAgICAgICB2YXIgcGF0aERpc3BsYWNlbWVudCA9IFNuYXAocGF0aEdyb3VwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBvaW50c0RhdGFDb250ZW50QXJyYXkpO1xyXG4gICAgICAgICAgICB2YXIgc2F2ZWREaXNwbGFjZW1lbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibWFwU3R5bGVQcm9wZXJ0aWVzXCIpKSB8fCB7IHRyYW5zZm9ybTogXCJcIiB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHpvb20sIG1vdmVMZWZ0LCBtb3ZlVG9wO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzYXZlZERpc3BsYWNlbWVudC50cmFuc2Zvcm0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKChzYXZlZERpc3BsYWNlbWVudC50cmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzY2FsZUltZyA9IHN0eWxlUHJvcHMudHJhbnNmb3JtO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1TdHJpbmcgPSAoc2F2ZWREaXNwbGFjZW1lbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNjYWxlSW1nKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9bKy1dP1xcZCsoXFwuXFxkKyk/L2c7XHJcbiAgICAgICAgICAgICAgICB2YXIgU3RyaW5nVmFsdWVzID0gdHJhbnNmb3JtU3RyaW5nLm1hdGNoKHJlZ2V4KS5tYXAoZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHYpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhTdHJpbmdWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjYWxlSW1nID0gU3RyaW5nVmFsdWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgbW92ZUxlZnQgPSBTdHJpbmdWYWx1ZXNbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZVRvcCA9IFN0cmluZ1ZhbHVlc1syXTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBzY2FsZUltZywgbW92ZUxlZnQsIG1vdmVUb3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyAobW92ZVRvcCkgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICAvLyBwYXRoRGlzcGxhY2VtZW50LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgKC1tb3ZlTGVmdCkgK1wiIFwiICsgKC1tb3ZlVG9wKSsgXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHNhdmVkRGlzcGxhY2VtZW50LnRvcCA9IHBhcnNlSW50KHNhdmVkRGlzcGxhY2VtZW50LnRvcCk7XHJcbiAgICAgICAgICAgIHNhdmVkRGlzcGxhY2VtZW50LmxlZnQgPSBwYXJzZUludChzYXZlZERpc3BsYWNlbWVudC5sZWZ0KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2F2ZWREaXNwbGFjZW1lbnQudG9wLCBzYXZlZERpc3BsYWNlbWVudC5sZWZ0KTtcclxuXHJcblxyXG4gICAgICAgICAgICBwYXRocy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYnV0dG9uLWNvbGxhcHNlJykuc2lkZU5hdignc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5idXR0b24tY29sbGFwc2VcIikub2ZmKCdjbGljaycpLnNpZGVOYXYoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgTnBvaW50ID0gcGFyc2VJbnQodGhpcy5pZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVRpbWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGltZScpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2ludEluZGV4XCIpLmlubmVySFRNTCA9IE5wb2ludDtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGF0aCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnREYXRhVGltZSA9ICQodGhpcykuYXR0cignZGF0YS10aW1lJyk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdldFBvaW50RGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1BvaW50c0NvbnRlbnQnKSkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRzRGVmYXVsdERpc3BsYWNlbWVudCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYXBTdHlsZVByb3BlcnRpZXNcIikpIHx8IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwiXCJcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coRnVsbE1hcEdyb3VwKTtcclxuICAgICAgICAgICAgICAgIGlmICgocG9pbnRzRGVmYXVsdERpc3BsYWNlbWVudC50cmFuc2Zvcm0pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzY2FsZUltZyA9IHN0eWxlUHJvcHMudHJhbnNmb3JtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgPSAocG9pbnRzRGVmYXVsdERpc3BsYWNlbWVudC50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNjYWxlSW1nKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSAvWystXT9cXGQrKFxcLlxcZCspPy9nO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBTdHJpbmdWYWx1ZXMgPSB0cmFuc2Zvcm1TdHJpbmcubWF0Y2gocmVnZXgpLm1hcChmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFN0cmluZ1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHpvb20gPSBTdHJpbmdWYWx1ZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZUxlZnQgPSBTdHJpbmdWYWx1ZXNbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUb3AgPSBTdHJpbmdWYWx1ZXNbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFnZXRQb2ludERhdGFbTnBvaW50IC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgem9vbSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlTGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHNhdmVkWm9vbSA9IHpvb207XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZWREaXNwbGFjZW1lbnQudG9wID0gbW92ZVRvcDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzYXZlZERpc3BsYWNlbWVudC5sZWZ0ID0gbW92ZUxlZnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNhdmVkRGlzcGxhY2VtZW50LnRvcCArIFwiJVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50TmFtZVwiKS5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnRfbmFtZV9sYWJlbFwiKS5yZW1vdmVDbGFzcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoJy5tYXBiZycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB6b29tOiBzYXZlZFpvb20gKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdG9wOiBzYXZlZERpc3BsYWNlbWVudC50b3AgKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbGVmdDogc2F2ZWREaXNwbGFjZW1lbnQubGVmdCArIFwiJVwiXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRnVsbE1hcEdyb3VwLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyB6b29tICsgXCIpIHRyYW5zbGF0ZShcIiArIChtb3ZlVG9wKSArIFwiIFwiICsgKG1vdmVMZWZ0KSArIFwiKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHpvb20gPSBnZXRQb2ludERhdGFbTnBvaW50IC0gMV0uem9vbTtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVG9wID0gZ2V0UG9pbnREYXRhW05wb2ludCAtIDFdLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlTGVmdCA9IGdldFBvaW50RGF0YVtOcG9pbnQgLSAxXS5sZWZ0O1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEaXNwbGFjZW1lbnRPYmouem9vbSA9IHNhdmVkWm9vbTtcclxuICAgICAgICAgICAgICAgIC8vIERpc3BsYWNlbWVudE9iai50b3AgPSBzYXZlZERpc3BsYWNlbWVudC50b3A7XHJcbiAgICAgICAgICAgICAgICAvLyBEaXNwbGFjZW1lbnRPYmoubGVmdCA9IHNhdmVkRGlzcGxhY2VtZW50LmxlZnQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICQoXCIjcGx1c1wiKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb20gKz0gMC4xO1xyXG4gICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai56b29tID0gem9vbTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhNYXBQYXRoc0dyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICBGdWxsTWFwR3JvdXAuYW5pbWF0ZSh7IFwidHJhbnNmb3JtXCI6IFwic2NhbGUoXCIgKyB6b29tICsgXCIpIHRyYW5zbGF0ZShcIiArIChtb3ZlTGVmdCkgKyBcIiBcIiArIG1vdmVUb3AgKyBcIilcIiB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChcIiNtaW51c1wiKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb20gLT0gMC4xO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoem9vbSA8PSAxLjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbSA9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgRGlzcGxhY2VtZW50T2JqLnpvb20gPSB6b29tO1xyXG4gICAgICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hbmltYXRlKHsgdHJhbnNmb3JtOiBcInNjYWxlKFwiICsgem9vbSArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyBtb3ZlVG9wICsgXCIpXCIgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiI21vdmVMZWZ0XCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZUxlZnQgKz0gMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgRGlzcGxhY2VtZW50T2JqLmxlZnQgPSBtb3ZlTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBGdWxsTWFwR3JvdXAuYW5pbWF0ZSh7IHRyYW5zZm9ybTogXCJzY2FsZShcIiArIHpvb20gKyBcIikgdHJhbnNsYXRlKFwiICsgKG1vdmVMZWZ0KSArIFwiIFwiICsgbW92ZVRvcCArIFwiKVwiIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoXCIjbW92ZVJpZ2h0XCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlTGVmdCAtPSAyMDtcclxuICAgICAgICAgICAgICAgICAgICBEaXNwbGFjZW1lbnRPYmoubGVmdCA9IG1vdmVMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hbmltYXRlKHsgdHJhbnNmb3JtOiBcInNjYWxlKFwiICsgem9vbSArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyBtb3ZlVG9wICsgXCIpXCIgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJChcIiNtb3ZlVG9wXCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVG9wICs9IDIwO1xyXG4gICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai50b3AgPSBtb3ZlVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hbmltYXRlKHsgdHJhbnNmb3JtOiBcInNjYWxlKFwiICsgem9vbSArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyBtb3ZlVG9wICsgXCIpXCIgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJChcIiNtb3ZlQm90dG9tXCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVG9wIC09IDIwO1xyXG4gICAgICAgICAgICAgICAgICAgIERpc3BsYWNlbWVudE9iai50b3AgPSBtb3ZlVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hbmltYXRlKHsgdHJhbnNmb3JtOiBcInNjYWxlKFwiICsgem9vbSArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyBtb3ZlVG9wICsgXCIpXCIgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUG9pbnRzQ29udGVudCcpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImtla1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFBvaW50TGFzdERhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ2V0UG9pbnREYXRhLmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBnZXRQb2ludERhdGFbal0ucG9pbnRJZCA9PSBkYXRhVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldFBvaW50RGF0YVtqXS5wb2ludElkID09IGRhdGFUaW1lKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVsbE1hcEdyb3VwLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogXCJzY2FsZShcIiArIHBhcnNlRmxvYXQoZ2V0UG9pbnREYXRhW2pdLnpvb20pICsgXCIpIHRyYW5zbGF0ZShcIiArIChnZXRQb2ludERhdGFbal0ubGVmdCkgKyBcIiBcIiArIGdldFBvaW50RGF0YVtqXS50b3AgKyBcIilcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcubWFwYmcnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB6b29tOiBnZXRQb2ludERhdGFbal0udHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnZXRQb2ludERhdGFbal0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFBvaW50Q2l0eU5hbWUgPSBnZXRQb2ludERhdGFbal0uY2l0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhQb2ludENpdHlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9pbnRMYXN0RGF0YSA9IGdldFBvaW50RGF0YVtqXS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhQb2ludENpdHlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUG9pbnRDaXR5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50TmFtZVwiKS52YWwoUG9pbnRDaXR5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoXCIjcG9pbnROYW1lXCIpLmNsb3Nlc3QoXCJsYWJlbFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnRfbmFtZV9sYWJlbFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BvaW50TmFtZVwiKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9pbnRfbmFtZV9sYWJlbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXREYXRhKFBvaW50TGFzdERhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGF0aEljb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3VicGF0aEljb25zJykpIHx8IFtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGF0aFNldHRpbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRJZDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbl9zcmM6IFwiXCJcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1zaG93SWNvbl0nKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3NldHRpbmdzX2J0blwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnBhdGhJY29ucy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoc3VicGF0aEljb25zW2ldLnBvaW50SWQpID09IE5wb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lPXNob3dJY29uXScpLnByb3AoXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZXR0aW5nc19idG5cIikucmVtb3ZlQXR0cignZGlzYWJsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKCdpbnB1dFtuYW1lPXNob3dJY29uXScpLmF0dHIoXCJjaGVja2VkXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYoJCgnaW5wdXRbbmFtZT1zaG93SWNvbl0nKS5hdHRyKFwiY2hlY2tlZFwiKSA9PSBcImNoZWNrZWRcIil7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiZGZnZGZnZGZnXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAkKFwiI3NldHRpbmdzX2J0blwiKS5mYWRlT3V0KCk7IFxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJCgnI2ljb25fc3dpdGNoJykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnaW5wdXRbbmFtZT1zaG93SWNvbl0nKS5pcyhcIjpjaGVja2VkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPXNob3dJY29uXVwiKS5hdHRyKFwiY2hlY2tlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZXR0aW5nc19idG5cIikucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKFwiaW5wdXRbbmFtZT1zaG93SWNvbl1cIikuYXR0cihcImNoZWNrZWRcIiwgZmFsc2UpO30sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcImlucHV0W25hbWU9c2hvd0ljb25dXCIpLmF0dHIoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZXR0aW5nc19idG5cIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3VicGF0aEljb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoc3VicGF0aEljb25zW2ldLnBvaW50SWQpID09IE5wb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhdGhJY29ucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VicGF0aEljb25zLnNvcnQoY29tcGFyZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN1YnBhdGhJY29uc1wiLCBKU09OLnN0cmluZ2lmeShzdWJwYXRoSWNvbnMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiI3NldHRpbmdzX2J0blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjbW9kYWwyXCIpLm1vZGFsKFwib3BlblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiLm1vZGFsMlwiKS5tb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZHk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJ1ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY29uX3NldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3VicGF0aEljb25zJykpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWNvbl9zZXR0aW5ncy5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpY29uX3NldHRpbmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZUVsZW1lbnQgPSBwYXJzZUludChpY29uX3NldHRpbmdzW2ldLnBvaW50SWQpID09PSBOcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRydWVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVF1YUxTIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y29sb3JdXCIpLnZhbChpY29uX3NldHRpbmdzW2ldLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljb25fY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJQYXRoSWNvbk9ialwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzdWJQYXRoSWNvbk9ialwiKS5hdHRyKFwiZGF0YVwiLCBpY29uX3NldHRpbmdzW2ldLmljb25fc3JjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEljb24oaWNvbl9jb250YWluZXIsIGljb25fc2V0dGluZ3NbaV0uY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIgTk9UIEVRdWFMUyFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPWNvbG9yXVwiKS52YWwoXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3N1YlBhdGhJY29uT2JqXCIpLmF0dHIoXCJkYXRhXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJwYXRoSWNvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJwYXRoSWNvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VicGF0aEljb25zW2ldLnBvaW50SWQgPT0gTnBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhdGhJY29ucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKE5wb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSAkKFwiI3N1YlBhdGhJY29uT2JqXCIpLmF0dHIoXCJkYXRhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhdGhTZXR0aW5nLmljb25fc3JjID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicGF0aFNldHRpbmcuY29sb3IgPSAkKFwiaW5wdXRbbmFtZT1jb2xvcl1cIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYXRoU2V0dGluZy5wb2ludElkID0gTnBvaW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicGF0aEljb25zLnB1c2goc3VicGF0aFNldHRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicGF0aEljb25zLnNvcnQoY29tcGFyZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzdWJwYXRoSWNvbnNcIiwgSlNPTi5zdHJpbmdpZnkoc3VicGF0aEljb25zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdWJwYXRoSWNvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ05vIGljb24gdG8gdGhpcyBwb2ludCEnLCAyMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lID0gY29sb3JdXCIpLm1pbmljb2xvcnMoeyAvL2pxdWVyeS1taW5pY29sb3JzIHBsdWdpbiBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcInJnYlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHJnYmFTdHJpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oaHNsLCByZ2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJnYmFTdHJpbmcgPSAncmdiYSgnICsgcmdiLnIgKyAnLCAnICsgcmdiLmcgKyAnLCAnICsgcmdiLmIgKyAnLCAnICsgcmdiLmEgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJnYmFTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3dhdGNoZXM6IFsncmdiYSgxNTQsIDksIDE3MywgMSknLCAncmdiYSgyNDAsIDE3LCAxNywgMSknLCAncmdiYSgwLCAyNTUsIDIxLCAxKScsICdyZ2JhKDE1LCA0MywgMjU1LCAxKScsICdyZ2JhKDI1NSwgMjM5LCAxMywgMSknXSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93U3BlZWQ6IDEwMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiLmljb25fZ2FsbGVyeV9faXRlbVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyAvL2Nob29zZSBpY29uIG9mIFJvdXRlIFN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25TUkMgPSAkKHRoaXMpLmF0dHIoXCJzcmNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWNvblNSQyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25fY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJQYXRoSWNvbk9ialwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3N1YlBhdGhJY29uT2JqXCIpLmF0dHIoXCJkYXRhXCIsIGljb25TUkMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWJwYXRoU2V0dGluZy5wb2ludElkID0gTnBvaW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YnBhdGhTZXR0aW5nLmljb25fc3JjID0gaWNvblNSQztcclxuICAgICAgICAgICAgICAgICAgICBsb2FkSWNvbihpY29uX2NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmdzT2JqLlN0YXJ0SWNvbiA9IGljb25TUkM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTZXR0aW5nc1wiLCBKU09OLnN0cmluZ2lmeShTZXR0aW5nc09iaikpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEljb24oaWNvbl9jb250YWluZXIsIGljb25fY29sb3IpIHsgLy8gbG9hZCBpY29uIHRvIHNob3cgZXhhbXBsZVxyXG4gICAgICAgICAgICAgICAgICAgIGljb25fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ZnRG9jID0gaWNvbl9jb250YWluZXIuY29udGVudERvY3VtZW50OyAvL2dldCB0aGUgaW5uZXIgRE9NIG9mIGFscGhhLnN2Z1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ZnUm9vdCA9IHN2Z0RvYy5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aHNfZ3JvdXAgPSBzdmdSb290LnF1ZXJ5U2VsZWN0b3IoXCIjdHJhbnNwb3J0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IHBhdGhzX2dyb3VwLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGF0aFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGF0aHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRocy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHNbaV0uc3R5bGUuZmlsbCA9IGljb25fY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY29uT2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJQYXRoSWNvbk9ialwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXRoRGlyID0gcy5zZXJpYWxpemVUb1N0cmluZyhwYXRoc19ncm91cCk7IC8vY29udmVydCBodG1sIGVsZW1lbnQgdG8gc3RyaW5nIHdpdGggWE1MU2VyaWFsaXplclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJwYXRoU2V0dGluZy5pY29uID0gcGF0aERpcjtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdWJwYXRoSWNvbnMpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBzdWJwYXRoSWNvbnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdWJwYXRoSWNvbnMnKSkgfHwgW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3VicGF0aEljb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoc3VicGF0aEljb25zLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN1YnBhdGhJY29ucy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBpZihzdWJwYXRoU2V0dGluZ1tpXS5wb2ludElkID09IE5wb2ludCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBwYXRocy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBwYXRoc1tqXS5zdHlsZS5maWxsID0gc3VicGF0aFNldHRpbmdbaV0uY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPWNvbG9yXVwiKS5jaGFuZ2UoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25TZWxlY3RlZCA9ICQoXCJvcHRpb246c2VsZWN0ZWRcIiwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVTZWxlY3RlZCA9IHRoaXMudmFsdWU7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYXRoU2V0dGluZ1tuYW1lXSA9IHZhbHVlU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdWJwYXRoU2V0dGluZ1tuYW1lXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHNbaV0uc3R5bGUuZmlsbCA9IHN1YnBhdGhTZXR0aW5nLmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlNldHRpbmdzXCIsIEpTT04uc3RyaW5naWZ5KFNldHRpbmdzT2JqKSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coU2V0dGluZ3NPYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoXCJpbnB1dFtuYW1lID0gc2l6ZV1cIikuY2hhbmdlKGZ1bmN0aW9uKCkgeyAgICAgIC8vIHVzZXIgY2hvaWNlIG9mIHJvdXRlIHN0YXJ0IGljb24gc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmFyIG9wdGlvblNlbGVjdGVkID0gJChcIm9wdGlvbjpzZWxlY3RlZFwiLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZhciB2YWx1ZVNlbGVjdGVkID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgc3VicGF0aFNldHRpbmdbbmFtZV0gPSB2YWx1ZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgJChcIiNzdWJQYXRoSWNvbk9ialwiKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB3aWR0aDogc3VicGF0aFNldHRpbmdbbmFtZV0gKiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBoZWlnaHQ6IHN1YnBhdGhTZXR0aW5nW25hbWVdICogMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHN2Z1Jvb3Quc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgJChpY29uT2JqKS5hdHRyKFwid2lkdGhcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgc3ZnUm9vdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgJChpY29uT2JqKS5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKHN2Z1Jvb3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coU2V0dGluZ3NPYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2F2ZVBvaW50Q29udGVudFwiKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHNEYXRhQ29udGVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRJZDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2l0eU5hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHpvb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IG1vdmVMZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IG1vdmVUb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlcjogXCJmYWxzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgSW5wdXRab29tVmFsdWUgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvaW50Wm9vbVwiKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIElucHV0VG9wVmFsdWUgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvaW50VG9wXCIpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgSW5wdXRCb3R0b21WYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRCb3R0b21cIikudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBJbnB1dExlZnRWYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRMZWZ0XCIpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgSW5wdXRSaWdodFZhbHVlID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50UmlnaHQnKS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBQb2ludE5hbWUgPSAkKFwiI3BvaW50TmFtZVwiKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzRGF0YUNvbnRlbnQucG9pbnRJZCA9IHBvaW50RGF0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50c0RhdGFDb250ZW50LmNpdHlOYW1lID0gUG9pbnROYW1lO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50c0RhdGFDb250ZW50LmRhdGEgPSBlZGl0b3IuZ2V0RGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvaW50c0RhdGFDb250ZW50QXJyYXkubGVuZ3RoOyBqKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHNEYXRhQ29udGVudEFycmF5W2pdLnBvaW50SWQgPT0gcG9pbnREYXRhVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzRGF0YUNvbnRlbnRBcnJheS5zcGxpY2UoaiwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHNEYXRhQ29udGVudC5kYXRhLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdObyBkYXRhIGluIHBvaW50IScsIDIwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBvaW50c0RhdGFDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzRGF0YUNvbnRlbnRBcnJheS5wdXNoKHBvaW50c0RhdGFDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRGaWVsZCA9ICQoY3VycmVudFBhdGgpLnBhcmVudCgpLmZpbmQoXCJ0ZXh0XCIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGV4dEZpZWxkKS50ZXh0KFBvaW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZygkKHRleHRGaWVsZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnWW91ciBkYXRhIGlzIHNhdmVkIScsIDIwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwb2ludHNEYXRhQ29udGVudEFycmF5LnNvcnQoY29tcGFyZVRpbWUpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5ID0gJCgnI3NpZGVuYXYtb3ZlcmxheScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQob3ZlcmxheSkuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChvdmVybGF5KS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9pbnRzRGF0YUNvbnRlbnRBcnJheSwgY2lyY2xlc0FycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgU29ydGVkRGF0YUFycmF5ID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2lyY2xlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzRGF0YUNvbnRlbnRBcnJheS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNpcmNsZXNBcnJheVtpXS50aW1lID09IHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0ucG9pbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRlZERhdGFBcnJheS5wdXNoKHBvaW50c0RhdGFDb250ZW50QXJyYXlbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFNvcnRlZERhdGFBcnJheSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1BvaW50c0NvbnRlbnQnLCBKU09OLnN0cmluZ2lmeShTb3J0ZWREYXRhQXJyYXkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50c0RhdGFDb250ZW50LmRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnRQYXRoKS5jc3MoXCJmaWxsXCIsIFwiIzk5MDAzM1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvaW50c0RhdGFDb250ZW50LmRhdGEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50UGF0aCkuY3NzKFwiZmlsbFwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNDb2xvclwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCcuYnV0dG9uLWNvbGxhcHNlJykuc2lkZU5hdignaGlkZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHBhdGguZ2V0VG90YWxMZW5ndGgoKTtcclxuXHJcbiAgICAgICAgdmFyIHN0b3BzQXRMZW5ndGggPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHBhdGhMZW5ndGhBdFBvaW50ID0gcGF0aC5nZXRQb2ludEF0TGVuZ3RoKGkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvaW50WCA9IHBhdGhMZW5ndGhBdFBvaW50Lng7XHJcbiAgICAgICAgICAgIHZhciBwb2ludFkgPSBwYXRoTGVuZ3RoQXRQb2ludC55O1xyXG5cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzQXJyYXkubGVuZ3RoOyBqKyspIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKE1hdGgucm91bmQocG9pbnRYIC0gcG9pbnRzQXJyYXlbal0uY3gpKSA8PSAwICYmIE1hdGguYWJzKE1hdGgucm91bmQocG9pbnRZIC0gcG9pbnRzQXJyYXlbal0uY3kpKSA8PSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BzQXRMZW5ndGgucHVzaChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RvcHNBdExlbmd0aC5sZW5ndGggIT0gcG9pbnRzQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcHNBdExlbmd0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3BzQXRMZW5ndGhbaSArIDFdIC0gc3RvcHNBdExlbmd0aFtpXSA9PSAxKSBzdG9wc0F0TGVuZ3RoLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzdG9wc0F0TGVuZ3RoXCIsIEpTT04uc3RyaW5naWZ5KHN0b3BzQXRMZW5ndGgpKTtcclxuXHJcbiAgICAgICAgLy8gaWYgKHBvaW50c0FycmF5Lmxlbmd0aCAhPT0gc3RvcHNBdExlbmd0aC5sZW5ndGgpIHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJIRVJFIElTIFRIRSBESUZGRVJFTkNFOiAxc3QgYXJyYXkgbGVuZ3RoID0gXCIgKyBwb2ludHNBcnJheS5sZW5ndGggKyAnLCAybmQgYXJyIGxlbmd0aD0gJyArIHN0b3BzQXRMZW5ndGgubGVuZ3RoICsgXCJcIik7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ25vIERJRkZFUkVOQ0UgYmV0d2VlbiBhcnIgbGVuZ3RocycpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG5cclxuICAgIHZhciBXcmFwcGVyUHJvcHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtYXBTdHlsZVByb3BlcnRpZXMnKSk7XHJcblxyXG5cclxuICAgIC8vICQoXCIubWFwYmdcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJib2R5QmFja2dyb3VuZENvbG9yXCIpKTtcclxuICAgICQoXCJib2R5XCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiYm9keUJhY2tncm91bmRDb2xvclwiKSk7XHJcblxyXG5cclxuICAgIC8vICQuZWFjaChXcmFwcGVyUHJvcHMsIGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XHJcbiAgICAvLyAgICAgJChcIi5tYXBiZ1wiKS5jc3MocHJvcCwgdmFsdWUpO1xyXG4gICAgLy8gfSk7XHJcblxyXG59KTsiXX0=
