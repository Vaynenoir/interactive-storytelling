$(document).ready(function(){function t(t){var e=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"50",contentAlign:"flex-start"};if(e[t])return e[t]}function e(t){if(!$(t).length)return!1;var e=$(t).offset().top,a=$(t).offset().top+$(t).outerHeight(),o=$(window).scrollTop()+$(window).height(),r=$(window).scrollTop();return o>e&&r<a}var a=JSON.parse(localStorage.getItem("PointsContent"))||[];JSON.parse(localStorage.getItem("SavedMapColors"));a&&a.sort(function(t,e){return t.pointId-e.pointId});for(var o=document.getElementById("boom"),r=0;r<a.length;r++){var s=document.createElement("section");$(s).addClass("js-section"),$(s).attr({"data-zoom":a[r].zoom,"data-pos-top":a[r].top,"data-pos-left":a[r].left,id:"section_"+(r+1)}),s.insertAdjacentHTML("beforeend",a[r].data),$(s).find("img").addClass("js-image"),$(s).find(".js-image").attr("data-pos-x",0),$(s).find(".js-image").attr("data-pos-y",0),o.append(s),$("div.text_wrapper").css("align-items",t("contentAlign")),$(".js-section").css("width",t("contentWidth")+"%")}$(".js-image");$.fn.hasAttr=function(t){return void 0!==this.attr(t)};var n=$(".js-section");$.each(n,function(t,e){var a=$(e).find(".slick-gallery");0==$(a).find("img.slick-item").length&&(console.log($(a)),$(a).remove());var o=$(e).find(".single_image");$(o).hasClass(".slick-current")||$(o).addClass("slick-current"),$(a).find("br").remove(),$("br").remove(),$(a).text().replace(/&nbsp;/g,"")}),$(".slick_gallery").slick({slidesToShow:1,slidesToScroll:1,prevArrow:!0,nextArrow:!0});var i=document.getElementById("map"),l=JSON.parse(localStorage.getItem("map"));$("#map").attr("data",l),i.addEventListener("load",function(){var r=i.contentDocument,s=r.documentElement;s.setAttribute("x","520px"),s.setAttribute("y","300px");var n=s.getElementById("mapPaths"),l=n.getElementsByTagName("path"),c=document.createElementNS("http://www.w3.org/2000/svg","g");c.append(n),$(c).attr("id","wholeSvgGroup");var p=Snap(c),d=JSON.parse(localStorage.getItem("mapStyleProperties"))||{transform:""};Snap(S);if(d.transform.length>0){transformString=d.transform;var g=transformString.match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)});console.log(g),scaleImg=g[0],moveLeft=g[1],moveTop=g[2],console.log(scaleImg,moveLeft,moveTop),p.attr("transform","scale("+scaleImg+") translate("+moveLeft+" "+moveTop+")")}for(var m=0;m<l.length;m++)l[m].style.fill=t("mapColor"),l[m].style.stroke=t("mapStrokeColor");var f=JSON.parse(localStorage.getItem("path"));if($(s).addClass("my-svg"),f){var h=document.createElementNS("http://www.w3.org/2000/svg","path");$(h).attr("d",f),$(h).attr("fill","transparent"),$(h).attr("stroke",t("mapRouteColor")),$(h).attr("opacity","0.8"),$(h).attr("stroke-width",t("routeBorderWidth")),$(h).attr("stroke-linecap","round"),$(h).attr("id","routePath")}parseInt($("#IDmapbg")[0].style.top),parseInt($("#IDmapbg")[0].style.left);var u=document.createElementNS("http://www.w3.org/2000/svg","path");$(u).css("display","none");var v=[];$(".lightOn").each(function(t){v.push($(this))});var w=JSON.parse(localStorage.getItem("circlesCoords"));$(v).each(function(t,e){var a=$(e).closest("section")[0].id;a=parseInt(a[8])-1,console.log(t),a==w[a].id-1&&$(e).attr({"data-pos-x":w[a].cx,"data-pos-y":w[a].cy})}),Snap.plugin(function(t,e,a,o){a.prototype.circlePath=function(t,e,a){var o="M"+t+","+e;return o+="m"+-a+",0",o+="a"+a+","+a+" 0 1,0 "+2*a+",0",o+="a"+a+","+a+" 0 1,0 "+-2*a+",0",this.path(o,t,e)}});var S=document.createElementNS("http://www.w3.org/2000/svg","g");S.id="pathGroup",S.append(h),$(c).append(S),s.append(c);var y=Snap(S),I=JSON.parse(localStorage.getItem("circlesCoords"));$.each(I,function(e,a){var o=y.circlePath(this.cx,this.cy,this.r).attr({fill:t("mapPointsColor"),stroke:t("mapPointsBorderColor"),"stroke-width":t("pointsBorderWidth"),id:e+1,class:"circleElement",style:"display:none",onclick:"clickCircle()"});Snap.path.intersection(o,$(h).attr("d")).forEach(function(t){y.circle(t.x,t.y,1)})});var k=s.getElementById("pathGroup");for(m=0;m<I.length;m++){var C=document.createElementNS("http://www.w3.org/2000/svg","g"),x=s.getElementById(m+1);C.append(x);var b=document.createElementNS("http://www.w3.org/2000/svg","text");$(b).attr({x:I[m].cx,y:I[m].cy+20,"font-size":12,"font-style":"italic",fill:"#ccccccc",style:"display: none",class:"cityName"}),$(b).text(a[m].cityName),C.append(b),k.append(C),c.append(k),s.append(c)}var E=r.getElementsByTagName("circle");for(m=0;m<E.length;m++)E[m].style.fill="transparent";var N=JSON.parse(localStorage.getItem("StartRouteIcon")),B=(new DOMParser).parseFromString(N,"text/xml").documentElement,O=$(B).attr("data-offset-x"),P=$(B).attr("data-offset-y"),A=$(B).attr("data-scale"),T=document.createElementNS("http://www.w3.org/2000/svg","g");if("true"==t("UserOption")&&N){for(m=0;m<N.length;m++)$(B).attr({fill:t("RouteStartIconColor"),transform:A});$(T).attr("transform","translate("+(h.getPointAtLength(1).x-t("RouteStartIconSize")/O)+" "+(h.getPointAtLength(1).y-t("RouteStartIconSize")/P)+") scale("+t("RouteStartIconSize")/100+")"),T.append(B),c.append(T),s.append(c)}if("true"==t("checkboxState")&&"true"==t("defaultOption")){var L=document.createElementNS("http://www.w3.org/2000/svg","circle");$(L).attr({cx:h.getPointAtLength(1).x,cy:h.getPointAtLength(1).y,r:t("pointsRadius"),stroke:t("mapPointsBorderColor"),fill:t("mapPointsColor"),"stroke-width":t("pointsBorderWidth")}),c.append(L),s.append(c)}o.style.display="block";var j=h.getTotalLength(),J=($(h).css({"stroke-dashoffset":j,"stroke-dasharray":j+" "+j}),JSON.parse(localStorage.getItem("stopsAtLength")));$(window).on("scroll",function(t){!function(){for(var t=r.querySelectorAll(".circleElement"),e=r.querySelectorAll(".cityName"),a=0;a<J.length;a++)$.each($(".js-section"),function(a,o){if($(this).hasClass("active")){var s=($(window).scrollTop()-$(this).offset().top)/$(this).height()*100,n=$(this).attr("id");n=parseInt(n[8])-1;var i,l=s*(J[n]/100);i=Math.floor(l);for(var c=r.getElementById(n+1),p=parseFloat($(h).css("stroke-dashoffset")),d=0;d<t.length;d++)$(c).parent().find("text"),p>=j-20?($(t[d]).fadeOut(900),$(e[d]).fadeOut(900)):t[d].id<=n+1?($(t[d]).fadeIn(900),$(e[d]).fadeIn(900)):t[d].id>n+1&&($(t[d]).fadeOut(900),$(e[d]).fadeOut(900));i<J[n]&&(0==n&&i<J[n]&&$(h).css("stroke-dashoffset",j-i+"px"),n>0&&i<J[n]&&$(h).css("stroke-dashoffset",""+(j-(J[n-1]+i)))),J[n-1]+i>J[n]&&$(h).css("stroke-dashoffset",j-J[n]+"px")}})}(),function(){$(".js-section").each(function(t){var a=$(window).scrollTop(),o=$(this).offset().top,r=$(this).attr("data-zoom"),s=parseInt($(this).attr("data-pos-top")),n=($(this).attr("data-pos-bottom"),parseInt($(this).attr("data-pos-left")));$(this).attr("data-pos-right"),o<=a&&e($(this))?($(this).addClass("active"),p.animate({transform:"scale("+r+") translate("+n+" "+s+")"},700)):($(this).removeClass("active"),!$(".js-section").hasClass("active")&&$(window).scrollTop()<20&&p.animate({transform:"scale("+scaleImg+") translate("+moveLeft+" "+moveTop+")"},700))});var t=0;$(v).each(function(){if(e($(this))){t++;var a=$(this).attr("data-pos-x"),o=$(this).attr("data-pos-y"),r=this.closest("section"),s=$(r).attr("data-zoom"),n=($(r).attr("data-pos-top"),$(r).attr("data-pos-left"),$(this)[0].getBoundingClientRect()),i=(n.top,$(this).height(),-(+n.left+ +n.width)/1920*1400),l=+n.top/1200*900,c=-(+n.left+ +n.width)/1920*1400,p=n.bottom/1200*900;$(u).attr("d","M"+a+" "+o+" L"+i/s+" "+l+" L"+c/s+" "+p+" Z"),$(u).css("position","relative"),$(u).attr("fill","#47DBB4"),$(u).attr("opacity",".3"),$(u).attr("transform-origin","520px 300px")}}),$(c).append(u),s.append(c),t>0?$(u).fadeIn(900):$(u).fadeOut(900)}()}),$("body").click(function(t){console.log(t)})},!1),$("#IDmapbg").css("background-color",t("bodyBackgroundColor")),$("body").css("background-color",t("bodyBackgroundColor"))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJwX3NjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImdldFNldHRpbmdGcm9tU3RvcmFnZSIsInNldHRpbmciLCJTZXR0aW5nc09iamVjdCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJtYXBDb2xvciIsIm1hcFN0cm9rZUNvbG9yIiwibWFwUG9pbnRzQ29sb3IiLCJtYXBQb2ludHNCb3JkZXJDb2xvciIsIm1hcFJvdXRlQ29sb3IiLCJib2R5QmFja2dyb3VuZENvbG9yIiwicm91dGVCb3JkZXJXaWR0aCIsInBvaW50c1JhZGl1cyIsInBvaW50c0JvcmRlcldpZHRoIiwiY29udGVudFdpZHRoIiwiY29udGVudEFsaWduIiwiaW5XaW5kb3ciLCJzIiwibGVuZ3RoIiwiaW1nX3RvcF9vZmZzZXQiLCJvZmZzZXQiLCJ0b3AiLCJpbWdfYm90dG9tIiwib3V0ZXJIZWlnaHQiLCJib3R0b21PZlNjcmVlbiIsIndpbmRvdyIsInNjcm9sbFRvcCIsImhlaWdodCIsInRvcE9mU2NyZWVuIiwiZGF0YUNvbnRlbnQiLCJzb3J0Iiwib2JqQSIsIm9iakIiLCJwb2ludElkIiwidGV4dF9jb250IiwiZ2V0RWxlbWVudEJ5SWQiLCJpIiwic2VjdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJhZGRDbGFzcyIsImF0dHIiLCJkYXRhLXpvb20iLCJ6b29tIiwiZGF0YS1wb3MtdG9wIiwiZGF0YS1wb3MtbGVmdCIsImxlZnQiLCJpZCIsImluc2VydEFkamFjZW50SFRNTCIsImRhdGEiLCJmaW5kIiwiYXBwZW5kIiwiY3NzIiwiZm4iLCJoYXNBdHRyIiwibmFtZSIsInVuZGVmaW5lZCIsInRoaXMiLCJzZWN0aW9ucyIsImVhY2giLCJlbCIsInNsaWRlciIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJzaW5nbGVJbWFnZSIsImhhc0NsYXNzIiwidGV4dCIsInJlcGxhY2UiLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwicHJldkFycm93IiwibmV4dEFycm93IiwiYSIsIm1hcF91cmxfdHJ1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdmdEb2MiLCJjb250ZW50RG9jdW1lbnQiLCJzdmdSb290IiwiZG9jdW1lbnRFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiTWFwUGF0aHNHcm91cCIsIlBhdGhzQXJyYXkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIndob2xlU3ZnR3JvdXAiLCJjcmVhdGVFbGVtZW50TlMiLCJGdWxsTWFwR3JvdXAiLCJTbmFwIiwiV3JhcHBlclByb3BzIiwidHJhbnNmb3JtIiwicGF0aEdyb3VwIiwidHJhbnNmb3JtU3RyaW5nIiwiU3RyaW5nVmFsdWVzIiwibWF0Y2giLCJtYXAiLCJ2IiwicGFyc2VGbG9hdCIsInNjYWxlSW1nIiwibW92ZUxlZnQiLCJtb3ZlVG9wIiwic3R5bGUiLCJmaWxsIiwic3Ryb2tlIiwiUGF0aERpcmVjdGlvbiIsInBhdGgiLCJwYXJzZUludCIsInBhdGgxIiwiYXJySW1nSUQiLCJwdXNoIiwiQ2lyY2xlUGF0aENvb3JkcyIsImltZ1BhcmVudElEIiwiY2xvc2VzdCIsImRhdGEtcG9zLXgiLCJjeCIsImRhdGEtcG9zLXkiLCJjeSIsInBsdWdpbiIsIkVsZW1lbnQiLCJQYXBlciIsImdsb2JhbCIsInByb3RvdHlwZSIsImNpcmNsZVBhdGgiLCJyIiwicCIsImNpcmNsZXNBcnJheSIsImluZGV4IiwiY2lyY2xlIiwic3Ryb2tlLXdpZHRoIiwiY2xhc3MiLCJvbmNsaWNrIiwiaW50ZXJzZWN0aW9uIiwiZm9yRWFjaCIsIngiLCJ5IiwiUGFyZW50Q2ljbGVHcm91cCIsImNpcmNsZUdyb3VwIiwiY3VycmVudFBvaW50IiwiZm9udC1zaXplIiwiZm9udC1zdHlsZSIsImNpdHlOYW1lIiwiaW50ZXJzZWN0aW9uQ2lyY2xlcyIsInBhdGhTdGFydEljb24iLCJwYXJzZWRQYXRoU3RhcnRJY29uIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiaWNvbk9mZnNldFgiLCJpY29uT2Zmc2V0WSIsImljb25TY2FsZSIsImdyb3VwIiwiZ2V0UG9pbnRBdExlbmd0aCIsInN0YXJ0Q2lyY2xlIiwiZGlzcGxheSIsImdldFRvdGFsTGVuZ3RoIiwiU3RvcFBvaW50cyIsInN0cm9rZS1kYXNob2Zmc2V0Iiwic3Ryb2tlLWRhc2hhcnJheSIsIm9uIiwiZSIsImNpcmNsZUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInRleHRFbGVtZW50cyIsIiRwZXJjZW50YWdlQ29tcGxldGUiLCJjdXJyZW50U2VjdGlvbklEIiwiQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoIiwiJG9mZnNldFVuaXQiLCJNYXRoIiwiZmxvb3IiLCJjdXJyZW50Q2lyY2xlIiwiY3VyRGFzaE9mZnNldCIsImoiLCJwYXJlbnQiLCJmYWRlT3V0IiwiZmFkZUluIiwiZHJhd1BhdGgiLCJzY3JvbGxDb3VudCIsInRvcE9mZnNldCIsImRhdGFab29tIiwiZGF0YVBvc1RvcCIsImRhdGFQb3NMZWZ0IiwiYW5pbWF0ZSIsInJlbW92ZUNsYXNzIiwidmlzX2NvdW50IiwiY3VycmVudFNlY3Rpb24iLCJjdXJyZW50Wm9vbSIsIkNvb3JkaW5hdGVzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHRfdG9wX1giLCJ3aWR0aCIsInJpZ2h0X3RvcF9ZIiwicmlnaHRfYm90dG9tX1giLCJyaWdodF9ib3R0b21fWSIsInNlY3Rpb25Db3VudGVyIiwiY2xpY2siXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBRWQsU0FBU0MsRUFBc0JDLEdBQzNCLElBQUlDLEVBQWlCQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGVBQ3JEQyxTQUFVLHlCQUNWQyxlQUFnQixtQkFDaEJDLGVBQWdCLHFCQUNoQkMscUJBQXNCLG1CQUN0QkMsY0FBZSxtQkFDZkMsb0JBQXFCLHlCQUNyQkMsaUJBQWtCLElBQ2xCQyxhQUFjLElBQ2RDLGtCQUFtQixJQUNuQkMsYUFBYyxLQUNkQyxhQUFjLGNBR2QsR0FBR2YsRUFB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QUFtQixNQUNqSzVMLEVBQUUrRyxHQUFPdkQsSUFBSSxXQUFZLFlBQ3pCeEQsRUFBRStHLEdBQU9sRSxLQUFLLE9BQVEsV0FFdEI3QyxFQUFFK0csR0FBT2xFLEtBQUssVUFBVyxNQUN6QjdDLEVBQUUrRyxHQUFPbEUsS0FBSyxtQkFBb0Isa0JBSTFDN0MsRUFBRXlGLEdBQWVsQyxPQUFPd0QsR0FDeEI1QixFQUFRNUIsT0FBT2tDLEdBQ1hpRyxFQUFZLEVBQ1oxTCxFQUFFK0csR0FBT2tFLE9BQU8sS0FFaEJqTCxFQUFFK0csR0FBT2lFLFFBQVEsS0E2T3JCb0IsS0FpQkpwTSxFQUFFLFFBQVFxTSxNQUFNLFNBQVNuQyxHQUNyQmhHLFFBQVFDLElBQUkrRixPQUtqQixHQUtDbEssRUFBRSxZQUFZd0QsSUFBSSxtQkFBb0JyRCxFQUFzQix3QkFDNURILEVBQUUsUUFBUXdELElBQUksbUJBQW9CckQsRUFBc0IiLCJmaWxlIjoicnBfc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBnZXQgZWRpdG9yIHNldHRpbmdzXHJcbiAgICBmdW5jdGlvbiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2Uoc2V0dGluZyl7XHJcbiAgICAgICAgdmFyIFNldHRpbmdzT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNldHRpbmdzXCIpKSB8fCB7XHJcbiAgICAgICAgbWFwQ29sb3I6IFwicmdiYSgyNTUsIDIwNCwgMTI4LCAxKVwiLFxyXG4gICAgICAgIG1hcFN0cm9rZUNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICBtYXBQb2ludHNDb2xvcjogXCJyZ2JhKDAsIDAsIDI1NSwgMSlcIixcclxuICAgICAgICBtYXBQb2ludHNCb3JkZXJDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgbWFwUm91dGVDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgYm9keUJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI0MywgMjI5LCAyNDUsIDEpXCIsXHJcbiAgICAgICAgcm91dGVCb3JkZXJXaWR0aDogXCI0XCIsXHJcbiAgICAgICAgcG9pbnRzUmFkaXVzOiBcIjhcIixcclxuICAgICAgICBwb2ludHNCb3JkZXJXaWR0aDogXCIxXCIsXHJcbiAgICAgICAgY29udGVudFdpZHRoOiBcIjUwXCIsXHJcbiAgICAgICAgY29udGVudEFsaWduOiBcImZsZXgtc3RhcnRcIlxyXG4gICAgfTtcclxuXHJcbiAgICAgICAgaWYoU2V0dGluZ3NPYmplY3Rbc2V0dGluZ10pe1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NPYmplY3Rbc2V0dGluZ107XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGF0YUNvbnRlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykpIHx8IFtdO1xyXG4gICAgdmFyIGNpcmNsZUNvbG9yID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNhdmVkTWFwQ29sb3JzXCIpKSB8fCB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbldpbmRvdyhzKSB7IC8vIGNoZWNrIGlmIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiBicm93c2VyIHdpbmRvd1xyXG4gICAgICAgIGlmICghJChzKS5sZW5ndGgpIHJldHVybiBmYWxzZTsgLy8gZWxlbWVudCBub3QgZm91bmRcclxuXHJcbiAgICAgICAgdmFyIGltZ190b3Bfb2Zmc2V0ID0gJChzKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgdmFyIGltZ19ib3R0b20gPSAkKHMpLm9mZnNldCgpLnRvcCArICQocykub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB2YXIgYm90dG9tT2ZTY3JlZW4gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHRvcE9mU2NyZWVuID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKGJvdHRvbU9mU2NyZWVuID4gaW1nX3RvcF9vZmZzZXQpICYmICh0b3BPZlNjcmVlbiA8IGltZ19ib3R0b20pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVJZChvYmpBLCBvYmpCKSB7IC8vc29ydCBwb2ludHMgaWQgYnkgYXNjZW5kaW5nXHJcbiAgICAgICAgcmV0dXJuIG9iakEucG9pbnRJZCAtIG9iakIucG9pbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBpZihkYXRhQ29udGVudCl7XHJcbiAgICBkYXRhQ29udGVudC5zb3J0KGNvbXBhcmVJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRleHRfY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9vbVwiKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7ICAgIC8vIGNyZWF0aW9uIG9mIHBhZ2Ugc2VjdGlvbnMgd2l0aCBpdCdzIGNvbnRlbnQsIHRpZWQgdG8gZXZlcnkgcG9pbnRcclxuICAgICAgICAkKHNlY3Rpb24pLmFkZENsYXNzKCdqcy1zZWN0aW9uJyk7XHJcblxyXG4gICAgICAgXHJcbiAgICAgICAgJChzZWN0aW9uKS5hdHRyKHtcclxuICAgICAgICAgICAgXCJkYXRhLXpvb21cIjogZGF0YUNvbnRlbnRbaV0uem9vbSxcclxuICAgICAgICAgICAgXCJkYXRhLXBvcy10b3BcIjogZGF0YUNvbnRlbnRbaV0udG9wLCAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFwiZGF0YS1wb3MtbGVmdFwiOiBkYXRhQ29udGVudFtpXS5sZWZ0LFxyXG4gICAgICAgICAgICBcImlkXCI6IFwic2VjdGlvbl9cIiArIChpKzEpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHNlY3Rpb24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBkYXRhQ29udGVudFtpXS5kYXRhKTtcclxuICAgICAgICAkKHNlY3Rpb24pLmZpbmQoJ2ltZycpLmFkZENsYXNzKCdqcy1pbWFnZScpO1xyXG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnLmpzLWltYWdlJykuYXR0cignZGF0YS1wb3MteCcsIDApO1xyXG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnLmpzLWltYWdlJykuYXR0cignZGF0YS1wb3MteScsIDApO1xyXG4gICAgICAgIFxyXG5cclxuXHJcblxyXG4gICAgICAgIHRleHRfY29udC5hcHBlbmQoc2VjdGlvbik7XHJcbiAgICAgICAgJChcImRpdi50ZXh0X3dyYXBwZXJcIikuY3NzKFwiYWxpZ24taXRlbXNcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiY29udGVudEFsaWduXCIpICk7XHJcbiAgICAgICAgICQoJy5qcy1zZWN0aW9uJykuY3NzKFwid2lkdGhcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiY29udGVudFdpZHRoXCIpICsgXCIlXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFzU2xpZGVyQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJyAnICsgY2xhc3NOYW1lICsgJyAnKS50ZXN0KCcgJyArIGVsZW0uY2xhc3NOYW1lICsgJyAnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2xpZGVySW1nID0gJCgnLmpzLWltYWdlJyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXJJbWcpO1xyXG4gICAgLy8gZm9yKHZhciBpPTA7IGkgPCBzbGlkZXJJbWcubGVuZ3RoOyBpKyspe1xyXG4gICAgLy8gICAgIHZhciBzcmMgPSBzbGlkZXJJbWdbaV0uZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgIC8vICAgICB2YXIgc2xpZGVySW1nU3JjID0gc3JjLnNsaWNlKC05KTtcclxuICAgIC8vICAgICB2YXIgc2luZ2xlSW1nU3JjID0gc3JjLnNsaWNlKC0xNSk7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coc2luZ2xlSW1nU3JjKTtcclxuICAgIC8vICAgICBpZihzbGlkZXJJbWdTcmMgPT0gXCIvcHJldmlldy9cIiAmJiAhaGFzU2xpZGVyQ2xhc3Moc2xpZGVySW1nW2ldLCBcInNsaWNrLWl0ZW1cIikpe1xyXG4gICAgLy8gICAgICAgICBzbGlkZXJJbWdbaV0uY2xhc3NMaXN0LmFkZChcInNsaWNrLWl0ZW1cIik7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGlmKHNpbmdsZUltZ1NyYyA9PSBcIi9wcmV2aWV3L3NpbmdsZVwiICYmICFoYXNTbGlkZXJDbGFzcyhzbGlkZXJJbWdbaV0sIFwic2xpY2stc2luZ2xlXCIpKXtcclxuICAgIC8vICAgICAgICAgc2xpZGVySW1nW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGljay1pdGVtXCIpXHJcbiAgICAvLyAgICAgICAgIHNsaWRlckltZ1tpXS5jbGFzc0xpc3QuYWRkKFwic2xpY2stc2luZ2xlXCIpO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlckltZyk7XHJcblxyXG4gICAgICAgICAgICAkLmZuLmhhc0F0dHIgPSBmdW5jdGlvbihuYW1lKSB7ICBcclxuICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyKG5hbWUpICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuICAgIHZhciBzZWN0aW9ucyA9ICQoJy5qcy1zZWN0aW9uJyk7XHJcbiAgICBcclxuXHJcbiAgICAvLyB2YXIgc2xpZGVySXRlbSA9ICQoJy5zbGljay1zaW5nbGUnKTtcclxuXHJcbiAgICAvLyBpZihzbGlkZXJJdGVtICYmIHNsaWRlckl0ZW0ubGVuZ3RoID4gMCl7XHJcbiAgICAvLyAgICAgJC5lYWNoKHNsaWRlckl0ZW0sIGZ1bmN0aW9uKGksZWwpe1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAvLyAgICAgLy8gaWYoJChlbCkuaGFzQXR0cignZGF0YS1pbWctYW1vdXQnKSAmJiAkKGVsKS5hdHRyKCdkYXRhLWltZy1hbW91dCcpID09IFwic2luZ2xlX2ltZ1wiKXtcclxuICAgIC8vICAgICAgICAgdmFyIHNsaWRlcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICAgICAgJChzbGlkZXJXcmFwKS5hZGRDbGFzcygnc2xpY2stY3VycmVudCcpO1xyXG4gICAgLy8gICAgICAgICAkKGVsKS53cmFwKCQoc2xpZGVyV3JhcCkpO1xyXG4gICAgLy8gICAgIC8vIH1cclxuXHJcblxyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgJC5lYWNoKHNlY3Rpb25zLCBmdW5jdGlvbihpLGVsKXtcclxuXHJcbiAgICAvLyBpZigkKGVsKS5maW5kKCcuc2xpY2staXRlbScpLmxlbmd0aCAhPT0gMCl7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJChlbCkpO1xyXG4gICAgLy8gICAgIHZhciBzbGlja0l0ZW0gPSAgJChlbCkuZmluZCgnLnNsaWNrLWl0ZW0nKTtcclxuICAgIC8vICAgICAgICAgaWYoJChzbGlja0l0ZW0pLmhhc0F0dHIoJ2RhdGEtaW1nLWFtb3V0JykgJiYgJChzbGlja0l0ZW0pLmF0dHIoJ2RhdGEtaW1nLWFtb3V0JykgPT0gXCJzaW5nbGVfaW1nXCIpe1xyXG4gICAgLy8gICAgICAgICAgICAgdmFyIHNsaWRlcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwia2VrXCIpO1xyXG4gICAgLy8gICAgICAgICAgICAgJChzbGlkZXJXcmFwKS5hZGRDbGFzcygnc2xpY2stY3VycmVudCcpO1xyXG4gICAgLy8gICAgICAgICAgICAgJChzbGlja0l0ZW0pLndyYXAoJChzbGlkZXJXcmFwKSk7XHJcbiAgICAvLyAgICAgICAgIH0gIFxyXG4gICAgICAgIFxyXG4gICAgLy8gICAgIGVsc2UgaWYoJChzbGlja0l0ZW0pLmF0dHIoJ2RhdGEtaW1nLWFtb3V0JykgPT0gXCJcIiB8fCAhJChzbGlja0l0ZW0pLmhhc0F0dHIoJ2RhdGEtaW1nLWFtb3V0Jykpe1xyXG5cclxuICAgIC8vICAgICAgICAgdmFyIHNsaWRlcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICAgICAgJChzbGlkZXJXcmFwKS5hZGRDbGFzcygnc2xpZGVyJyk7XHJcbiAgICAvLyAgICAgICAgICQoc2xpY2tJdGVtKS53cmFwQWxsKCQoc2xpZGVyV3JhcCkpO1xyXG4gICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAvLyAgICAgdmFyIHNsaWRlcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAvLyAgICAgJChzbGlkZXJXcmFwKS5hZGRDbGFzcygnc2xpY2stY3VycmVudCcpO1xyXG4gICAgICAgIC8vICAgICAkKHNsaWNrSXRlbSkud3JhcEFsbCgkKHNsaWRlcldyYXApKTsgICAgICAgICAgICBcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIGlmKCQoZWwpLmZpbmQoJy5zbGljay1nYWxsZXJ5JykubGVuZ3RoICE9PSAwKXtcclxuICAgICAgICAgICAgLy8gaWYoKCQoZWwpLmZpbmQoXCIuc2xpY2stZ2FsbGVyeVwiKSkubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgZmlyc3RDaGlsZHJlbiA9ICQoZWwgKyBcIj4gLnNsaWNrLWdhbGxlcnlcIik7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhmaXJzdENoaWxkcmVuKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB2YXIgc2xpZGVyID0gJChlbCkuZmluZCgnLnNsaWNrLWdhbGxlcnknKTtcclxuICAgICAgICAgICAgaWYoJChzbGlkZXIpLmZpbmQoXCJpbWcuc2xpY2staXRlbVwiKS5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKHNsaWRlcikpO1xyXG4gICAgICAgICAgICAgICAgJChzbGlkZXIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlcik7XHJcbiAgICAgICAgICAgIHZhciBzaW5nbGVJbWFnZSA9ICQoZWwpLmZpbmQoXCIuc2luZ2xlX2ltYWdlXCIpO1xyXG4gICAgICAgICAgICBpZighJChzaW5nbGVJbWFnZSkuaGFzQ2xhc3MoXCIuc2xpY2stY3VycmVudFwiKSl7XHJcbiAgICAgICAgICAgICAgICAkKHNpbmdsZUltYWdlKS5hZGRDbGFzcyhcInNsaWNrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vICQoXCIuc2xpZGVyXCIpLmNzcyhcIndpZHRoXCIsIDEwMCArIFwiJVwiKTtcclxuICAgICAgICAkKHNsaWRlcikuZmluZCgnYnInKS5yZW1vdmUoKTtcclxuICAgICAgICAvLyBpZigkKFwiLnNsaWRlclwiKS5wYXJlbnQoKS5pcyhcInBcIikpe1xyXG4gICAgICAgIC8vICAgICAkKFwiLnNsaWRlclwiKS51bndyYXAoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAvLyB9XHJcbiQoJ2JyJykucmVtb3ZlKCk7XHJcbiAgICAkKHNsaWRlcikudGV4dCgpLnJlcGxhY2UoLyZuYnNwOy9nLCAnJyk7XHJcbn0pO1xyXG5cclxuXHJcbi8vICQoXCIuanMtc2VjdGlvbiBkaXZcIikuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCl7XHJcbi8vICAgICBpZigkKGVsZW1lbnQpLmhhc0NsYXNzKFwiLnNsaWNrLWdhbGxlcnlcIikpe1xyXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCQoZWxlbWVudCkpO1xyXG4vLyAgICAgfVxyXG4vLyB9KTtcclxuXHJcblxyXG5cclxuICAgICAgJCgnLnNsaWNrX2dhbGxlcnknKS5zbGljayh7XHJcbiAgICAgICBcInNsaWRlc1RvU2hvd1wiOiAxLFxyXG4gICAgICAgXCJzbGlkZXNUb1Njcm9sbFwiOiAxLFxyXG4gICAgICAgIC8vIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgIC8vIGF1dG9wbGF5U3BlZWQ6IDIwMDAsXHJcbiAgICAgICAgcHJldkFycm93OiB0cnVlLFxyXG4gICAgICAgIG5leHRBcnJvdzogdHJ1ZSxcclxuICAgICAgICAvLyBmYWRlOiB0cnVlLFxyXG4gICAgICAgIC8vIGRvdHM6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyAkKCcubWFwYmcnKS5jc3MoXCJ6b29tXCIsIFwiMCVcIik7XHJcbiAgICAvLyAkKCcubWFwYmcnKS5jc3MoXCJyaWdodFwiLCBcIjBcIik7XHJcbiAgICAvLyAkKCdtYXBiZycpLmNzcyhcImJvdHRvbVwiLCBcIjBcIik7XHJcbiAgICB2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcclxuXHJcbiAgICB2YXIgbWFwX3VybCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21hcCcpKTtcclxuICAgIHZhciBtYXBfdXJsX3RydWUgPSBtYXBfdXJsO1xyXG4gICAgLy8gY29uc29sZS5sb2cobWFwX3VybF90cnVlKTtcclxuXHJcbiAgICAkKCcjbWFwJykuYXR0cignZGF0YScsIG1hcF91cmxfdHJ1ZSk7IFxyXG5cclxuICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7IC8vbG9hZGluZyBtYXAgdXJsIGZyb20gbG9jYWxzdG9yYWdlXHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCQoXCIjbWFwXCIpLmF0dHIoJ2RhdGEnKSk7XHJcbiAgICAgICAgdmFyIHN2Z0RvYyA9IGEuY29udGVudERvY3VtZW50O1xyXG4gICAgICAgIHZhciBzdmdSb290ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudDsgIC8vZ2V0dGluZyBpbnRvIG9iamVjdCBET01cclxuICAgICAgICBzdmdSb290LnNldEF0dHJpYnV0ZShcInhcIiwgXCI1MjBweFwiKTtcclxuICAgICAgICBzdmdSb290LnNldEF0dHJpYnV0ZShcInlcIiwgXCIzMDBweFwiKTtcclxuICAgICAgICB2YXIgTWFwUGF0aHNHcm91cCA9IHN2Z1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJtYXBQYXRoc1wiKTtcclxuICAgICAgICB2YXIgUGF0aHNBcnJheSA9IE1hcFBhdGhzR3JvdXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKTtcclxuICAgICAgICB2YXIgd2hvbGVTdmdHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKE1hcFBhdGhzR3JvdXApO1xyXG4gICAgICAgICQod2hvbGVTdmdHcm91cCkuYXR0cihcImlkXCIsIFwid2hvbGVTdmdHcm91cFwiKTtcclxuICAgICAgICB2YXIgRnVsbE1hcEdyb3VwID0gU25hcCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB2YXIgV3JhcHBlclByb3BzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWFwU3R5bGVQcm9wZXJ0aWVzJykpIHx8IHsgdHJhbnNmb3JtOiBcIlwifTtcclxuICAgICAgICB2YXIgcGF0aERpc3BsYWNlbWVudCA9IFNuYXAocGF0aEdyb3VwKTtcclxuICAgICAgICAgICAgIGlmKChXcmFwcGVyUHJvcHMudHJhbnNmb3JtKS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIC8vIHNjYWxlSW1nID0gc3R5bGVQcm9wcy50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0cmluZyA9IChXcmFwcGVyUHJvcHMudHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNjYWxlSW1nKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9bKy1dP1xcZCsoXFwuXFxkKyk/L2c7XHJcbiAgICAgICAgICAgICAgICB2YXIgU3RyaW5nVmFsdWVzID0gdHJhbnNmb3JtU3RyaW5nLm1hdGNoKHJlZ2V4KS5tYXAoZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHYpOyBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coU3RyaW5nVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY2FsZUltZyA9IFN0cmluZ1ZhbHVlc1swXTtcclxuICAgICAgICAgICAgICAgIG1vdmVMZWZ0ID0gU3RyaW5nVmFsdWVzWzFdLFxyXG4gICAgICAgICAgICAgICAgbW92ZVRvcCA9IFN0cmluZ1ZhbHVlc1syXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBzY2FsZUltZywgbW92ZUxlZnQsIG1vdmVUb3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIrIG1vdmVMZWZ0ICtcIiBcIiArIG1vdmVUb3ArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gICAgICAgXHJcblxyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgUGF0aHNBcnJheS5sZW5ndGg7IGkrKyl7ICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLmZpbGwgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBDb2xvclwiKTsgICAgICAgLy9jb2xvcmluZyBtYXAgYW5kIG1hcCBzdHJva2UgZnJvbSBzZXR0aW5nc1xyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLnN0cm9rZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFN0cm9rZUNvbG9yXCIpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHZhciBQYXRoRGlyZWN0aW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGF0aCcpKTsgICAvLyBnZXQgIGRpcmVjdGlvbiBvZiBtYWluIHJvdXRlXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHN2Z1Jvb3QpO1xyXG4gICAgICAgICQoc3ZnUm9vdCkuYWRkQ2xhc3MoXCJteS1zdmdcIik7XHJcblxyXG4gICAgICAgIGlmIChQYXRoRGlyZWN0aW9uKSB7ICAgLy8gbWFpbiByb3V0ZSBzdHlsaW5nXHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcblxyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoJ2QnLCBQYXRoRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKCdmaWxsJywgJ3RyYW5zcGFyZW50Jyk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignc3Ryb2tlJywgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUm91dGVDb2xvclwiKSk7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cihcIm9wYWNpdHlcIiwgJzAuOCcpO1xyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIGdldFNldHRpbmdGcm9tU3RvcmFnZShcInJvdXRlQm9yZGVyV2lkdGhcIikpO1xyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoXCJzdHJva2UtbGluZWNhcFwiLFwicm91bmRcIilcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKFwiaWRcIiwgXCJyb3V0ZVBhdGhcIik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB2YXIgY3VycmVudERpc3BsYWNlbWVudFRvcCA9IHBhcnNlSW50KCQoXCIjSURtYXBiZ1wiKVswXS5zdHlsZS50b3ApOyAgLy8gbWFwIG9mZnNldCBzZXQgdXAgYnkgdXNlciBvbiAxc3Qgc3RlcFxyXG4gICAgICAgIHZhciBjdXJyZW50RGlzcGxhY2VtZW50TGVmdCA9IHBhcnNlSW50KCQoJyNJRG1hcGJnJylbMF0uc3R5bGUubGVmdCk7XHJcbiAgICAgICAgdmFyIHBhdGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcbiAgICAgICAgJChwYXRoMSkuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGFyckltZ0lEID0gW107IC8vYXJyYXkgb2YgcGFnZSBpbWcgZWxlbWVudHNcclxuICAgICAgICAgICAgLy8gJCgnLmpzLWltYWdlJykuZWFjaChmdW5jdGlvbihpLGVsKXtcclxuICAgICAgICAgICAgLy8gICAgIGlmKCEkKGVsKS5oYXNDbGFzcygnLnNsaWNrLWl0ZW0nKSl7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgYXJySW1nSUQucHVzaCgkKGVsKSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnLmxpZ2h0T24nKS5lYWNoKGZ1bmN0aW9uKGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgYXJySW1nSUQucHVzaCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuLy8gY29uc29sZS5sb2coYXJySW1nSUQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIENpcmNsZVBhdGhDb29yZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaXJjbGVzQ29vcmRzJykpO1xyXG5cclxuICAgICAgICAgICAgJChhcnJJbWdJRCkuZWFjaChmdW5jdGlvbihpLCBlbCkgeyAvL2dldCBjb29yZGluYXRlcyBvZiBwb2ludCB3aGljaCBpcyB0aWVkIHdpdGggY3VycmVudCBpbWdcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nUGFyZW50SUQgPSAkKGVsKS5jbG9zZXN0KCdzZWN0aW9uJylbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGltZ1BhcmVudElEID0gcGFyc2VJbnQoaW1nUGFyZW50SURbOF0pIC0gMTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKENpcmNsZVBhdGhDb29yZHNbaV0uaWQtMSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGltZ1BhcmVudElEID09IChDaXJjbGVQYXRoQ29vcmRzW2ltZ1BhcmVudElEXS5pZC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGltZ1BhcmVudElEKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcG9zLXgnOiBDaXJjbGVQYXRoQ29vcmRzW2ltZ1BhcmVudElEXS5jeCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcG9zLXknOiBDaXJjbGVQYXRoQ29vcmRzW2ltZ1BhcmVudElEXS5jeVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWN0aW9uQ291bnRlcigpIHtcclxuICAgICAgICAgICAgJCgnLmpzLXNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsQ291bnQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9wT2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVpvb20gPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXpvb21cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc1RvcCA9IHBhcnNlSW50KCQodGhpcykuYXR0cihcImRhdGEtcG9zLXRvcFwiKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc0JvdHRvbSA9ICQodGhpcykuYXR0cignZGF0YS1wb3MtYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc0xlZnQgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoXCJkYXRhLXBvcy1sZWZ0XCIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhUG9zUmlnaHQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXBvcy1yaWdodFwiKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b3BPZmZzZXQgPD0gc2Nyb2xsQ291bnQgJiYgaW5XaW5kb3coJCh0aGlzKSkpIHsgLy9BZGQgY2xhc3MgXCJhY3RpdmVcIiBpZiBjdXJyZW50IHNlY3Rpb24gaXMgaW5XaW5kb3dcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgRnVsbE1hcEdyb3VwLmFuaW1hdGUoeyAvL2FuaW1hdGUgbWFwIHpvb20gYW5kIG9mZnNldCwgc2V0IHVwIGJ5IHVzZXIgb24gMm5kIHN0ZXAsIGR1ZSB0byBjdXJyZW50IHNlY3Rpb24gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyBkYXRhWm9vbSArXCIpIHRyYW5zbGF0ZShcIiArIChkYXRhUG9zTGVmdCkgKyBcIiBcIiArIGRhdGFQb3NUb3AgKyBcIilcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDcwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCgnLmpzLXNlY3Rpb24nKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSAmJiAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGdWxsTWFwR3JvdXAuYW5pbWF0ZSh7IC8vYW5pbWF0ZSBtYXAgem9vbSBhbmQgb2Zmc2V0LCBzZXQgdXAgYnkgdXNlciBvbiAybmQgc3RlcCwgZHVlIHRvIGN1cnJlbnQgc2VjdGlvbiAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyBzY2FsZUltZyArXCIpIHRyYW5zbGF0ZShcIiArIChtb3ZlTGVmdCkgKyBcIiBcIiArIChtb3ZlVG9wKSArIFwiKVwiICAvLy9DSEFOR0VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB2aXNfY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgJChhcnJJbWdJRCkuZWFjaChmdW5jdGlvbigpIHsgIC8vaWYgY3VycmVudCBpbWcgaW5XaW5kb3csIHRoYW4gY3JlYXRlIGEgbGlnaHQgZnJvbSBjdXJyZW50IHBvaW50IHRvIGltZydzIGJvcmRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluV2luZG93KCQodGhpcykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzX2NvdW50Kys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeCA9ICQodGhpcykuYXR0cignZGF0YS1wb3MteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeSA9ICQodGhpcykuYXR0cignZGF0YS1wb3MteScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNlY3Rpb24gPSB0aGlzLmNsb3Nlc3QoXCJzZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Wm9vbSA9ICQoY3VycmVudFNlY3Rpb24pLmF0dHIoXCJkYXRhLXpvb21cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUb3BPZmZzZXQgPSAkKGN1cnJlbnRTZWN0aW9uKS5hdHRyKFwiZGF0YS1wb3MtdG9wXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGVmdE9mZnNldCA9ICQoY3VycmVudFNlY3Rpb24pLmF0dHIoXCJkYXRhLXBvcy1sZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRab29tKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIENvb3JkaW5hdGVzID0gJCh0aGlzKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tT2Zmc2V0SW1nID0gQ29vcmRpbmF0ZXMudG9wICsgJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhDb29yZGluYXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0X3RvcF9YID0gLSgrQ29vcmRpbmF0ZXMubGVmdCArICtDb29yZGluYXRlcy53aWR0aCkgLyAxOTIwKjE0MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0X3RvcF9ZID0gKCtDb29yZGluYXRlcy50b3AgLyAxMjAwKjkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0X2JvdHRvbV9YID0gLSgrQ29vcmRpbmF0ZXMubGVmdCArICtDb29yZGluYXRlcy53aWR0aCkgLyAxOTIwKjE0MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0X2JvdHRvbV9ZID0gKENvb3JkaW5hdGVzLmJvdHRvbSkgLyAxMjAwKjkwMDtcclxuICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKCdkJywgXCJNXCIgKyBjeCArIFwiIFwiICsgY3kgKyBcIiBMXCIgKyAocmlnaHRfdG9wX1gpL2N1cnJlbnRab29tICsgXCIgXCIgKyAocmlnaHRfdG9wX1kpICsgXCIgTFwiICsgKHJpZ2h0X2JvdHRvbV9YKS9jdXJyZW50Wm9vbSArIFwiIFwiICsgKHJpZ2h0X2JvdHRvbV9ZKSArIFwiIFpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChwYXRoMSkuY3NzKCdwb3NpdGlvbicsIFwicmVsYXRpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChwYXRoMSkuYXR0cignZmlsbCcsICcjNDdEQkI0Jyk7ICAvLzQ3REJCNFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICQocGF0aDEpLmF0dHIoJ3N0cm9rZScsICcjMDAwMDAwJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgICQocGF0aDEpLmF0dHIoJ29wYWNpdHknLCAnLjMnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKFwidHJhbnNmb3JtLW9yaWdpblwiLCBcIjUyMHB4IDMwMHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQod2hvbGVTdmdHcm91cCkuYXBwZW5kKHBhdGgxKTtcclxuICAgICAgICAgICAgc3ZnUm9vdC5hcHBlbmQod2hvbGVTdmdHcm91cCk7XHJcbiAgICAgICAgICAgIGlmICh2aXNfY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHBhdGgxKS5mYWRlSW4oOTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQocGF0aDEpLmZhZGVPdXQoOTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU25hcC5wbHVnaW4oZnVuY3Rpb24oU25hcCwgRWxlbWVudCwgUGFwZXIsIGdsb2JhbCkgeyAvLyBjcmVhdGUgY2lyY2xlcyBieSBwYXRoIGVsZW1lbnRzIGluIHN2Z1xyXG4gICAgICAgICAgICBQYXBlci5wcm90b3R5cGUuY2lyY2xlUGF0aCA9IGZ1bmN0aW9uKGN4LCBjeSwgcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBcIk1cIiArIGN4ICsgXCIsXCIgKyBjeTtcclxuICAgICAgICAgICAgICAgIHAgKz0gXCJtXCIgKyAtciArIFwiLDBcIjtcclxuICAgICAgICAgICAgICAgIHAgKz0gXCJhXCIgKyByICsgXCIsXCIgKyByICsgXCIgMCAxLDAgXCIgKyAociAqIDIpICsgXCIsMFwiO1xyXG4gICAgICAgICAgICAgICAgcCArPSBcImFcIiArIHIgKyBcIixcIiArIHIgKyBcIiAwIDEsMCBcIiArIC0ociAqIDIpICsgXCIsMFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF0aChwLCBjeCwgY3kpO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHBhdGhHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgICAgIHBhdGhHcm91cC5pZCA9IFwicGF0aEdyb3VwXCI7XHJcbiAgICAgICAgcGF0aEdyb3VwLmFwcGVuZChwYXRoKTsgICAgIC8vZ3JvdXAgcGF0aHNcclxuXHJcbiAgICAgICAgJCh3aG9sZVN2Z0dyb3VwKS5hcHBlbmQocGF0aEdyb3VwKTtcclxuICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB2YXIgcyA9IFNuYXAocGF0aEdyb3VwKTtcclxuICAgICAgICAvLyBzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZShcIiArIHNjYWxlSW1nICsgXCIpIHRyYW5zbGF0ZShcIisgKC1tb3ZlTGVmdCkgK1wiIFwiICsgKC1tb3ZlVG9wKSsgXCIpXCIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrQ2lyY2xlKGUpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2lyY2xlc0FycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2lyY2xlc0Nvb3JkcycpKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKGNpcmNsZXNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGVsKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gcy5jaXJjbGVQYXRoKHRoaXMuY3gsIHRoaXMuY3ksIHRoaXMucikuYXR0cih7IC8vc2V0IHBvaW50cyBhdHRyaWJ1dGVzIGFuZCBzdHlsZXMgZnJvbSBwYWdlIHNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNDb2xvclwiKSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNCb3JkZXJXaWR0aFwiKSxcclxuICAgICAgICAgICAgICAgIGlkOiBpbmRleCsxLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY2lyY2xlRWxlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwiZGlzcGxheTpub25lXCIsXHJcbiAgICAgICAgICAgICAgICBvbmNsaWNrOiBcImNsaWNrQ2lyY2xlKClcIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdmFyIGludGVyc2VjdHMgPSBTbmFwLnBhdGguaW50ZXJzZWN0aW9uKGNpcmNsZSwgJChwYXRoKS5hdHRyKCdkJykpOyAvL2RyYXcgY2lyY2xlcyBhbmQgbWFpbiByb3V0ZSBpbnRlcnNlY3Rpb25zXHJcblxyXG4gICAgICAgICAgICBpbnRlcnNlY3RzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzLmNpcmNsZShlbC54LCBlbC55LCAxKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBQYXJlbnRDaWNsZUdyb3VwID0gc3ZnUm9vdC5nZXRFbGVtZW50QnlJZChcInBhdGhHcm91cFwiKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhQYXJlbnRDaWNsZUdyb3VwKTtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGNpcmNsZXNBcnJheS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciBjaXJjbGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBvaW50ID0gc3ZnUm9vdC5nZXRFbGVtZW50QnlJZChpKzEpO1xyXG5cclxuICAgICAgICAgICAgY2lyY2xlR3JvdXAuYXBwZW5kKGN1cnJlbnRQb2ludCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgICAgICAgICAgJCh0ZXh0KS5hdHRyKHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL25hbWUgb2YgcG9pbnRcclxuICAgICAgICAgICAgICAgIHg6IGNpcmNsZXNBcnJheVtpXS5jeCxcclxuICAgICAgICAgICAgICAgIHk6IGNpcmNsZXNBcnJheVtpXS5jeSArIDIwLFxyXG4gICAgICAgICAgICAgICAgXCJmb250LXNpemVcIjogMTIsXHJcbiAgICAgICAgICAgICAgICBcImZvbnQtc3R5bGVcIjogXCJpdGFsaWNcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6IFwiI2NjY2NjY2NcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVcIjogXCJkaXNwbGF5OiBub25lXCIsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjaXR5TmFtZVwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKHRleHQpLnRleHQoZGF0YUNvbnRlbnRbaV0uY2l0eU5hbWUpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICAgICAgY2lyY2xlR3JvdXAuYXBwZW5kKHRleHQpO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBQYXJlbnRDaWNsZUdyb3VwLmFwcGVuZChjaXJjbGVHcm91cCk7ICAgLy9ncm91cCBjaXJjbGVzIGVsZW1lbnRzIHdpdGggdGhlaXIgbmFtZXModGV4dCBlbGVtZW50cylcclxuICAgICAgICAgICAgd2hvbGVTdmdHcm91cC5hcHBlbmQoUGFyZW50Q2ljbGVHcm91cCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRQb2ludCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTsgIFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHZhciBpbnRlcnNlY3Rpb25DaXJjbGVzID0gc3ZnRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2lyY2xlXCIpO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8aW50ZXJzZWN0aW9uQ2lyY2xlcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uQ2lyY2xlc1tpXS5zdHlsZS5maWxsID0gXCJ0cmFuc3BhcmVudFwiOyAvL2RvIG5vdCBzaG93IGludGVyc2VjdGlvbiBjaXJjbGVzXHJcbiAgICAgICAgfSAgICAgICAgICAgIFxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBwYXRoU3RhcnRJY29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlN0YXJ0Um91dGVJY29uXCIpKSA7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIG9QYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7IFxyXG4gICAgICAgICAgICB2YXIgb0RPTSA9IG9QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHBhdGhTdGFydEljb24sIFwidGV4dC94bWxcIik7IC8vUGFyc2luZyBzdHJpbmcgdG8gaHRtbCBlbGVtZW50XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHBhcnNlZFBhdGhTdGFydEljb24gPSBvRE9NLmRvY3VtZW50RWxlbWVudDsgXHJcbiAgICAgICAgICAgIHZhciBpY29uT2Zmc2V0WCA9ICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cihcImRhdGEtb2Zmc2V0LXhcIik7XHJcbiAgICAgICAgICAgIHZhciBpY29uT2Zmc2V0WSA9ICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cihcImRhdGEtb2Zmc2V0LXlcIik7XHJcbiAgICAgICAgICAgIHZhciBpY29uU2NhbGUgPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLXNjYWxlXCIpO1xyXG5cclxuICAgICAgICAgdmFyIGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcblxyXG4gICAgICAgIGlmKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlVzZXJPcHRpb25cIikgPT0gXCJ0cnVlXCIgJiYgcGF0aFN0YXJ0SWNvbil7ICAgICAgICAvL2NoZWNrIDFzdCBzdGVwIHRyaWdnZXIgYW5kIHNldCBSb3V0ZSBzdGFydCBJY29uXHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8cGF0aFN0YXJ0SWNvbi5sZW5ndGg7aSsrKXsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJChwYXJzZWRQYXRoU3RhcnRJY29uKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvbkNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogaWNvblNjYWxlXHJcbiAgICAgICAgICAgICAgICB9KTsgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy90cmFuc2Zvcm0gUm91dGUgc3RhcnQgSWNvblxyXG4gICAgICAgICQoZ3JvdXApLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIrKHBhdGguZ2V0UG9pbnRBdExlbmd0aCgxKS54IC0gKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uU2l6ZVwiKS9pY29uT2Zmc2V0WCkpICsgXCIgXCIgKyAocGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnkgLSAoZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpL2ljb25PZmZzZXRZKSApK1wiKSBcIiArIFwic2NhbGUoXCIrZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25TaXplXCIpLzEwMCtcIilcIik7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHBhcnNlZFBhdGhTdGFydEljb24pO1xyXG4gICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKGdyb3VwKTtcclxuICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBpZihnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJjaGVja2JveFN0YXRlXCIpID09IFwidHJ1ZVwiICYmIGdldFNldHRpbmdGcm9tU3RvcmFnZShcImRlZmF1bHRPcHRpb25cIikgPT0gXCJ0cnVlXCIpeyAvL3NldCBkZWZhdWx0IHN0eWxlIFJvdXRlIHN0YXJ0IEljb25cclxuICAgICAgICAgICAgICAgIHZhciBzdGFydENpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XHJcbiAgICAgICAgICAgICAgICAkKHN0YXJ0Q2lyY2xlKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICBjeDogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLngsXHJcbiAgICAgICAgICAgICAgICAgICAgY3k6IHBhdGguZ2V0UG9pbnRBdExlbmd0aCgxKS55LFxyXG4gICAgICAgICAgICAgICAgICAgIHI6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInBvaW50c1JhZGl1c1wiKSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0JvcmRlckNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0NvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInBvaW50c0JvcmRlcldpZHRoXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQoc3RhcnRDaXJjbGUpKTtcclxuICAgICAgICAgICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKHN0YXJ0Q2lyY2xlKTtcclxuICAgICAgICAgICAgICAgIHN2Z1Jvb3QuYXBwZW5kKHdob2xlU3ZnR3JvdXApO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gc3ZnRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjaXJjbGUnKS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XHJcblxyXG4gICAgICAgIHRleHRfY29udC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICB2YXIgbGVuZ3RoID0gcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxlbmd0aCk7XHJcbiAgICAgICAgdmFyIG9mZnNldERhc2ggPSAkKHBhdGgpLmNzcyh7XHJcbiAgICAgICAgICAgIFwic3Ryb2tlLWRhc2hvZmZzZXRcIjogbGVuZ3RoLFxyXG4gICAgICAgICAgICBcInN0cm9rZS1kYXNoYXJyYXlcIjogbGVuZ3RoICsgXCIgXCIgKyBsZW5ndGhcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIFN0b3BQb2ludHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9wc0F0TGVuZ3RoJykpO1xyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhd1BhdGgoKSB7ICAgLy9NYWluIHJvdXRlIERyYXcgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHZhciBjaXJjbGVFbGVtZW50cyA9IHN2Z0RvYy5xdWVyeVNlbGVjdG9yQWxsKCcuY2lyY2xlRWxlbWVudCcpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaXJjbGVFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0RWxlbWVudHMgPSBzdmdEb2MucXVlcnlTZWxlY3RvckFsbCgnLmNpdHlOYW1lJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRleHRFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU3RvcFBvaW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaCgkKCcuanMtc2VjdGlvbicpLCBmdW5jdGlvbihpLCBlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKHBhdGgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcGVyY2VudGFnZUNvbXBsZXRlID0gKCgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgLSAkKHRoaXMpLm9mZnNldCgpLnRvcCkgLyAkKHRoaXMpLmhlaWdodCgpKSAqIDEwMDsgLy9jYWxjdWxhdGUgc2VjdGlvbiBvZmZzZXQgZnJvbSBwYWdlIHRvcCBpbiBwZXJjYW50YWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VjdGlvbklEID0gJCh0aGlzKS5hdHRyKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uSUQgPSBwYXJzZUludChjdXJyZW50U2VjdGlvbklEWzhdKSAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb2Zmc2V0VW5pdCA9ICRwZXJjZW50YWdlQ29tcGxldGUgKiAoU3RvcFBvaW50c1tjdXJyZW50U2VjdGlvbklEXSAvIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDdXJyZW50UGF0aEN1cnJlbnRMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCA9IE1hdGguZmxvb3IoJG9mZnNldFVuaXQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q2lyY2xlID0gc3ZnRG9jLmdldEVsZW1lbnRCeUlkKGN1cnJlbnRTZWN0aW9uSUQrMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJEYXNoT2Zmc2V0ID0gcGFyc2VGbG9hdCgkKHBhdGgpLmNzcyhcInN0cm9rZS1kYXNob2Zmc2V0XCIpKTsgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGNpcmNsZUVsZW1lbnRzLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDaXJjbGVOYW1lID0gJChjdXJyZW50Q2lyY2xlKS5wYXJlbnQoKS5maW5kKFwidGV4dFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJEYXNoT2Zmc2V0ID49IGxlbmd0aCAtIDIwKXsgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGNpcmNsZUVsZW1lbnRzW2pdKS5mYWRlT3V0KDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0ZXh0RWxlbWVudHNbal0pLmZhZGVPdXQoOTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJChjdXJyZW50Q2lyY2xlTmFtZSkuZmFkZU91dCg5MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNpcmNsZUVsZW1lbnRzW2pdLmlkIDw9IGN1cnJlbnRTZWN0aW9uSUQrMSl7ICAgICAgICAgICAgICAgIC8vTWFpbiByb3V0ZSBwb2ludHMgZGlzcGxheSBhbmQgZmFkZSBvdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjaXJjbGVFbGVtZW50c1tqXSkuZmFkZUluKDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGV4dEVsZW1lbnRzW2pdKS5mYWRlSW4oOTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaXJjbGVFbGVtZW50c1tqXS5pZCA+IGN1cnJlbnRTZWN0aW9uSUQrMSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGNpcmNsZUVsZW1lbnRzW2pdKS5mYWRlT3V0KDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGV4dEVsZW1lbnRzW2pdKS5mYWRlT3V0KDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoIDwgU3RvcFBvaW50c1tjdXJyZW50U2VjdGlvbklEXSkgeyAvL2RyYXcgcGF0aFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VjdGlvbklEID09IDAgJiYgQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoIDwgU3RvcFBvaW50c1tjdXJyZW50U2VjdGlvbklEXSkgeyAvLyBwYXRoIGRyYXdpbmcgdG8gZmlyc3QgcG9pbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgpLmNzcyhcInN0cm9rZS1kYXNob2Zmc2V0XCIsIFwiXCIgKyAobGVuZ3RoIC0gQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoKSArIFwicHhcIik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VjdGlvbklEID4gMCAmJiBDdXJyZW50UGF0aEN1cnJlbnRMZW5ndGggPCBTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSURdKSB7IC8vIHBhdGggZHJhd2luZyB0byBuZXh0IHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChwYXRoKS5jc3MoXCJzdHJva2UtZGFzaG9mZnNldFwiLCBcIlwiICsgKGxlbmd0aCAtIChTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSUQgLSAxXSArIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCkpICsgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3RvcFBvaW50c1tjdXJyZW50U2VjdGlvbklEIC0gMV0gKyBDdXJyZW50UGF0aEN1cnJlbnRMZW5ndGggPiBTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSURdKSB7IC8vU3RvcCBwYXRoIGRyYXdpbmcgd2hpbGUgc2VjdGlvbiBpbldpbmRvd1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQocGF0aCkuY3NzKFwic3Ryb2tlLWRhc2hvZmZzZXRcIiwgXCJcIiArIChsZW5ndGggLSBTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSURdKSArIFwicHhcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsZWQoZSkgeyBcclxuICAgICAgICAgICAgZHJhd1BhdGgoKTtcclxuICAgICAgICAgICAgc2VjdGlvbkNvdW50ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgc2Nyb2xsZWQpOyAgIC8vZHJhdyBhbmltYXRpb24gb24gc2Nyb2xsXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgJChcImJvZHlcIikuY2xpY2soZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuIFxyXG4gICAgLy8gY29uc29sZS5sb2coV3JhcHBlclByb3BzKTtcclxuXHJcbiAgICAgICAgJChcIiNJRG1hcGJnXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiYm9keUJhY2tncm91bmRDb2xvclwiKSApOyAgICAgLy9zZXQgcGFnZSBiZyBjb2xvciBmcm9tIHNldHRpbmdzXHJcbiAgICAgICAgJChcImJvZHlcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJib2R5QmFja2dyb3VuZENvbG9yXCIpICk7IFxyXG5cclxuXHJcblxyXG4gICAgLy8gJC5lYWNoKFdyYXBwZXJQcm9wcywgZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcclxuICAgIC8vICAgICAkKFwiI0lEbWFwYmdcIikuY3NzKHByb3AsIHZhbHVlKTsgLy9zZXQgb2Zmc2V0cyBmcm9tIDFzdCBzdGVwXHJcbiAgICAvLyB9KTtcclxuXHJcbn0pOyJdfQ==
