$(document).ready(function(){function t(t){var e=JSON.parse(localStorage.getItem("Settings"))||{mapColor:"rgba(255, 204, 128, 1)",mapStrokeColor:"rgba(0, 0, 0, 1)",mapPointsColor:"rgba(0, 0, 255, 1)",mapPointsBorderColor:"rgba(0, 0, 0, 1)",mapRouteColor:"rgba(0, 0, 0, 1)",bodyBackgroundColor:"rgba(243, 229, 245, 1)",routeBorderWidth:"4",pointsRadius:"8",pointsBorderWidth:"1",contentWidth:"50",contentAlign:"flex-start"};if(e[t])return e[t]}function e(t){if(!$(t).length)return!1;var e=$(t).offset().top,a=$(t).offset().top+$(t).outerHeight(),o=$(window).scrollTop()+$(window).height(),r=$(window).scrollTop();return o>e&&r<a}function a(t,e){return t.pointId-e.pointId}for(var o=JSON.parse(localStorage.getItem("PointsContent"))||[],r=(JSON.parse(localStorage.getItem("SavedMapColors")),document.getElementById("boom")),n=0;n<o.length;n++){var s=document.createElement("section");$(s).addClass("js-section"),$(s).attr({"data-zoom":o[n].zoom,"data-pos-top":o[n].top,"data-pos-left":o[n].left,id:"section_"+(n+1)}),s.insertAdjacentHTML("beforeend",o[n].data),$(s).find("img").addClass("js-image"),$(s).find(".js-image").attr("data-pos-x",0),$(s).find(".js-image").attr("data-pos-y",0),r.append(s),$("div.text_wrapper").css("align-items",t("contentAlign")),$(".js-section").css("width",t("contentWidth")+"%")}$(".js-image");$.fn.hasAttr=function(t){return void 0!==this.attr(t)};var i=$(".js-section");$.each(i,function(t,e){var a=$(e).find(".slick-gallery");0==$(a).find("img.slick-item").length&&(console.log($(a)),$(a).remove());var o=$(e).find(".single_image");$(o).hasClass(".slick-current")||$(o).addClass("slick-current"),$(a).find("br").remove(),$("br").remove(),$(a).text().replace(/&nbsp;/g,"")}),$(".slick_gallery").slick({slidesToShow:1,slidesToScroll:1,prevArrow:!0,nextArrow:!0});var l=document.getElementById("map"),c=JSON.parse(localStorage.getItem("map"));$("#map").attr("data",c),l.addEventListener("load",function(){var n=l.contentDocument,s=n.documentElement;s.setAttribute("x","520px"),s.setAttribute("y","300px");var i=s.getElementById("mapPaths"),c=i.getElementsByTagName("path"),p=document.createElementNS("http://www.w3.org/2000/svg","g");p.append(i),$(p).attr("id","wholeSvgGroup");var d=Snap(p),g=JSON.parse(localStorage.getItem("mapStyleProperties"))||{transform:"scale(1) translate(0 0)"};Snap(x);if(g.transform.length>0){transformString=g.transform;var m=transformString.match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)});console.log(m),scaleImg=m[0],moveLeft=m[1],moveTop=m[2],console.log(scaleImg,moveLeft,moveTop),d.attr("transform","scale("+scaleImg+") translate("+moveLeft+" "+moveTop+")")}for(var h=0;h<c.length;h++)c[h].style.fill=t("mapColor"),c[h].style.stroke=t("mapStrokeColor");var f=JSON.parse(localStorage.getItem("path"));if($(s).addClass("my-svg"),f){var u=document.createElementNS("http://www.w3.org/2000/svg","path"),v=document.createElementNS("http://www.w3.org/2000/svg","path");$(u).attr("d",f),$(u).attr("fill","transparent"),$(u).attr("stroke",t("mapRouteColor")),$(u).attr("opacity","0.8"),$(u).attr("stroke-width",t("routeBorderWidth")),$(u).attr("stroke-linecap","round"),$(u).attr("id","routePath"),"true"==t("routeShadow")&&"dashed"==t("routeType")&&($(v).attr({d:f,fill:"transparent",stroke:"#ccc","stroke-dashoffset":"300px","stroke-dasharray":"12px",opacity:"0.4","stroke-width":t("routeBorderWidth"),"stroke-linecap":"round",id:"routePathClone"}),p.append(v)),"true"==t("routeShadow")&&"dotted"==t("routeType")&&($(v).attr({d:f,fill:"transparent",stroke:"#ccc","stroke-dashoffset":"300px","stroke-dasharray":"4px",opacity:"0.4","stroke-width":t("routeBorderWidth"),"stroke-linecap":"round",id:"routePathClone"}),p.append(v)),"true"==t("routeShadow")&&"line"==t("routeType")&&($(v).attr({d:f,fill:"transparent",stroke:"#ccc",opacity:"0.4","stroke-width":t("routeBorderWidth"),"stroke-linecap":"round",id:"routePathClone"}),p.append(v))}parseInt($("#IDmapbg")[0].style.top),parseInt($("#IDmapbg")[0].style.left);var y=document.createElementNS("http://www.w3.org/2000/svg","path");$(y).css("display","none");var w=[];$(".lightOn").each(function(t){w.push($(this))});var S=JSON.parse(localStorage.getItem("circlesCoords"));$(w).each(function(t,e){var a=$(e).closest("section")[0].id;a=parseInt(a[8])-1,console.log(t),a==S[a].id-1&&$(e).attr({"data-pos-x":S[a].cx,"data-pos-y":S[a].cy})}),Snap.plugin(function(t,e,a,o){a.prototype.circlePath=function(t,e,a){var o="M"+t+","+e;return o+="m"+-a+",0",o+="a"+a+","+a+" 0 1,0 "+2*a+",0",o+="a"+a+","+a+" 0 1,0 "+-2*a+",0",this.path(o,t,e)}});var x=document.createElementNS("http://www.w3.org/2000/svg","g");x.id="pathGroup",x.append(u),$(p).append(x),s.append(p);var I=Snap(x),k=JSON.parse(localStorage.getItem("circlesCoords"));$.each(k,function(e,a){var o=I.circlePath(this.cx,this.cy,this.r).attr({fill:t("mapPointsColor"),stroke:t("mapPointsBorderColor"),"stroke-width":t("pointsBorderWidth"),id:e+1,class:"circleElement",style:"display:none",onclick:"clickCircle()"});Snap.path.intersection(o,$(u).attr("d")).forEach(function(t){I.circle(t.x,t.y,1)})});var C=s.getElementById("pathGroup");for(h=0;h<k.length;h++){var b=document.createElementNS("http://www.w3.org/2000/svg","g"),P=s.getElementById(h+1);b.append(P);var N=document.createElementNS("http://www.w3.org/2000/svg","text");$(N).attr({x:k[h].cx,y:k[h].cy+20,"font-size":12,"font-style":"italic",fill:"#ccccccc",style:"display: none",class:"cityName"}),$(N).text(o[h].cityName),b.append(N),C.append(b),p.append(C),s.append(p)}var B=n.getElementsByTagName("circle");for(h=0;h<B.length;h++)B[h].style.fill="transparent";var E=JSON.parse(localStorage.getItem("StartRouteIcon")),A=(new DOMParser).parseFromString(E,"text/xml").documentElement,O=$(A).attr("data-offset-x"),L=$(A).attr("data-offset-y"),T=$(A).attr("data-scale"),J=document.createElementNS("http://www.w3.org/2000/svg","g");if("true"==t("UserOption")&&E){for(h=0;h<E.length;h++)$(A).attr({fill:t("RouteStartIconColor"),transform:T});$(J).attr("transform","translate("+(u.getPointAtLength(1).x-t("RouteStartIconSize")/O)+" "+(u.getPointAtLength(1).y-t("RouteStartIconSize")/L)+") scale("+t("RouteStartIconSize")/100+")"),J.append(A),p.append(J),s.append(p)}if("true"==t("checkboxState")&&"true"==t("defaultOption")){var M=document.createElementNS("http://www.w3.org/2000/svg","circle");$(M).attr({cx:u.getPointAtLength(1).x,cy:u.getPointAtLength(1).y,r:t("pointsRadius"),stroke:t("mapPointsBorderColor"),fill:t("mapPointsColor"),"stroke-width":t("pointsBorderWidth")}),i.append(M),p.append(i),s.append(p)}r.style.display="block";var _=JSON.parse(localStorage.getItem("stopsAtLength")),j=JSON.parse(localStorage.getItem("subpathIcons"))||[];j.sort(a);var R=_[_.length-1],W=($(u).css({"stroke-dashoffset":R,"stroke-dasharray":R+" "+R}),JSON.parse(localStorage.getItem("movingIcon")),Snap(p)),z=[];for(h=0;h<j.length;h++){z.push(j[h].pointId);var F=(new DOMParser).parseFromString(j[h].icon,"image/svg+xml").documentElement,D=Snap(F),G=W.g(D);G.attr({id:"transport_"+j[h].pointId,"data-scale":.01*j[h].size,"data-id":j[h].pointId,class:"map_transport",fill:j[h].color,opacity:0});var q=parseFloat(G.attr("data-scale"));x.prepend(G),p.append(x);var H=u.getPointAtLength(_[h]);G.transform("matrix("+q+",0,0,"+q+","+H.x+","+H.y+")")}$(window).on("scroll",function(a){!function(){for(var t=n.querySelectorAll(".circleElement"),e=n.querySelectorAll(".cityName"),a=0;a<_.length;a++)$.each($(".js-section"),function(a,o){if($(this).hasClass("active")){var r=($(window).scrollTop()-$(this).offset().top)/$(this).height()*100,s=$(this).attr("id");s=parseInt(s[8])-1;var i,l=r*(_[s]/100);i=Math.floor(l),u.getPointAtLength(i);for(var c=n.getElementById(s+1),p=(Snap.path.getPointAtLength(y),parseFloat($(u).css("stroke-dashoffset"))),d=0;d<t.length;d++)$(c).parent().find("text"),p>=R-20?($(t[d]).fadeOut(900),$(e[d]).fadeOut(900)):t[d].id<=s+1?($(t[d]).fadeIn(900),$(e[d]).fadeIn(900)):t[d].id>s+1&&($(t[d]).fadeOut(900),$(e[d]).fadeOut(900));if(i<_[s]&&(0==s&&i<_[s]&&($(u).css("stroke-dashoffset",R-i+"px"),(y=W.select("#transport_"+z[0])).animate({opacity:"0"},100)),s>0&&i<_[s])){$(u).css("stroke-dashoffset",""+(R-(_[s-1]+i)));for(var g=0;g<z.length;g++){if(s==parseInt(z[g]-1)){var m=_[parseInt(z[g])-2]+i,h=u.getPointAtLength(m),f=u.getPointAtLength(m+2),v=(h.y,f.y,h.x,f.x,180*Math.atan2(h.y-f.y,h.x-f.x)/Math.PI),y=(h.x,h.x,h.y,W.select("#transport_"+z[g])),w=parseFloat(y.attr("data-scale"));console.log(w);var S=y.getBBox(),x=S.x+S.width/2,I=S.y+S.height/2;if(console.log(y,x,I,h.x,h.y),y.animate({opacity:"1"},100),m>_[z[g]-1]&&(console.log("IF"),y.animate({opacity:"0"},100)),m<_[z[g]-1]){var k=new Snap.Matrix;k.scale(w,w),k.rotate(v+180,20*f.x,20*f.y),k.translate(20*h.x,20*(h.y-12)),y.animate({transform:k},10),y.animate({transform:k},10),m>_[z[0]]&&(W.select("#transport_"+z[0]).animate({opacity:"0"},100),console.log("opacity 0"))}}z[g]>s+1&&(y=W.select("#transport_"+z[g])).animate({opacity:"0"},100)}}_[s-1]+i>_[s]&&$(u).css("stroke-dashoffset",R-_[s]+"px")}})}(),function(){function a(t,e,a){var o=s.createSVGPoint();return o.x=e,o.y=a,o.matrixTransform(t.getScreenCTM().inverse())}$(".js-section").each(function(t){var a=$(window).scrollTop(),o=$(this).offset().top,r=$(this).attr("data-zoom"),n=parseInt($(this).attr("data-pos-top")),s=($(this).attr("data-pos-bottom"),parseInt($(this).attr("data-pos-left")));if($(this).attr("data-pos-right"),o<=a&&e($(this)))$(this).addClass("active"),$(u).css("display","block"),d.animate({transform:"scale("+r+") translate("+s+" "+n+")"},700);else if($(this).removeClass("active"),!$(".js-section").hasClass("active")&&$(window).scrollTop()<20){$(u).css("display","none"),d.animate({transform:"scale("+scaleImg+") translate("+moveLeft+" "+moveTop+")"},700);var i=$(".map_transport");$(i).attr("opacity","0")}});var o=0;$(w).each(function(){if(e($(this))){o++;var r=$(this).attr("data-pos-x"),n=$(this).attr("data-pos-y"),i=this.closest("section"),l=($(i).attr("data-zoom"),$(i).attr("data-pos-top")),c=($(i).attr("data-pos-left"),$(this)[0].getBoundingClientRect()),d=(c.top,$(this).height(),-(+c.left+ +c.width)/1920*1400),g=+c.top/1200*900,m=-(+c.left+ +c.width)/1920*1400,h=c.bottom/1200*900,f=a(s,d,g),u=a(s,m,h);a(p,d,g),a(p,m,h),$(y).css("position","relative"),"flex-start"==t("contentAlign")?($(y).attr("d","M"+r+" "+n+" L"+(f.x-d)+" "+g+" L"+(u.x-m)+" "+(h-l)+" Z"),$(y).attr("fill","url(#gradient)")):"flex-end"==t("contentAlign")&&($(y).attr("fill","url(#gradient_reverse)"),$(y).attr("d","M"+r+" "+n+" L"+(-f.x-d)+" "+g+" L"+(-u.x-m)+" "+(h-l)+" Z")),$(y).attr("opacity",".3")}}),$(p).prepend(y),s.append(p),o>0?$(y).fadeIn(900):$(y).fadeOut(900)}()})},!1),$("#IDmapbg").css("background-color",t("bodyBackgroundColor")),$("body").css("background-color",t("bodyBackgroundColor"))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJwX3NjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImdldFNldHRpbmdGcm9tU3RvcmFnZSIsInNldHRpbmciLCJTZXR0aW5nc09iamVjdCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJtYXBDb2xvciIsIm1hcFN0cm9rZUNvbG9yIiwibWFwUG9pbnRzQ29sb3IiLCJtYXBQb2ludHNCb3JkZXJDb2xvciIsIm1hcFJvdXRlQ29sb3IiLCJib2R5QmFja2dyb3VuZENvbG9yIiwicm91dGVCb3JkZXJXaWR0aCIsInBvaW50c1JhZGl1cyIsInBvaW50c0JvcmRlcldpZHRoIiwiY29udGVudFdpZHRoIiwiY29udGVudEFsaWduIiwiaW5XaW5kb3ciLCJzIiwibGVuZ3RoIiwiaW1nX3RvcF9vZmZzZXQiLCJvZmZzZXQiLCJ0b3AiLCJpbWdfYm90dG9tIiwib3V0ZXJIZWlnaHQiLCJib3R0b21PZlNjcmVlbiIsIndpbmRvdyIsInNjcm9sbFRvcCIsImhlaWdodCIsInRvcE9mU2NyZWVuIiwiY29tcGFyZUlkIiwib2JqQSIsIm9iakIiLCJwb2ludElkIiwiZGF0YUNvbnRlbnQiLCJ0ZXh0X2NvbnQiLCJnZXRFbGVtZW50QnlJZCIsImkiLCJzZWN0aW9uIiwiY3JlYXRlRWxlbWVudCIsImFkZENsYXNzIiwiYXR0ciIsImRhdGEtem9vbSIsInpvb20iLCJkYXRhLXBvcy10b3AiLCJkYXRhLXBvcy1sZWZ0IiwibGVmdCIsImlkIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZGF0YSIsImZpbmQiLCJhcHBlbmQiLCJjc3MiLCJmbiIsImhhc0F0dHIiLCJuYW1lIiwidW5kZWZpbmVkIiwidGhpcyIsInNlY3Rpb25zIiwiZWFjaCIsImVsIiwic2xpZGVyIiwiY29uc29sZSIsImxvZyIsInJlbW92ZSIsInNpbmdsZUltYWdlIiwiaGFzQ2xhc3MiLCJ0ZXh0IiwicmVwbGFjZSIsInNsaWNrIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJhIiwibWFwX3VybF90cnVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN2Z0RvYyIsImNvbnRlbnREb2N1bWVudCIsInN2Z1Jvb3QiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJNYXBQYXRoc0dyb3VwIiwiUGF0aHNBcnJheSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwid2hvbGVTdmdHcm91cCIsImNyZWF0ZUVsZW1lbnROUyIsIkZ1bGxNYXBHcm91cCIsIlNuYXAiLCJXcmFwcGVyUHJvcHMiLCJ0cmFuc2Zvcm0iLCJwYXRoR3JvdXAiLCJ0cmFuc2Zvcm1TdHJpbmciLCJTdHJpbmdWYWx1ZXMiLCJtYXRjaCIsIm1hcCIsInYiLCJwYXJzZUZsb2F0Iiwic2NhbGVJbWciLCJtb3ZlTGVmdCIsIm1vdmVUb3AiLCJzdHlsZSIsImZpbGwiLCJzdHJva2UiLCJQYXRoRGlyZWN0aW9uIiwicGF0aCIsInBhdGhDbG9uZSIsImQiLCJzdHJva2UtZGFzaG9mZnNldCIsInN0cm9rZS1kYXNoYXJyYXkiLCJvcGFjaXR5Iiwic3Ryb2tlLXdpZHRoIiwic3Ryb2tlLWxpbmVjYXAiLCJwYXJzZUludCIsInBhdGgxIiwiYXJySW1nSUQiLCJwdXNoIiwiQ2lyY2xlUGF0aENvb3JkcyIsImltZ1BhcmVudElEIiwiY2xvc2VzdCIsImRhdGEtcG9zLXgiLCJjeCIsImRhdGEtcG9zLXkiLCJjeSIsInBsdWdpbiIsIkVsZW1lbnQiLCJQYXBlciIsImdsb2JhbCIsInByb3RvdHlwZSIsImNpcmNsZVBhdGgiLCJyIiwicCIsImNpcmNsZXNBcnJheSIsImluZGV4IiwiY2lyY2xlIiwiY2xhc3MiLCJvbmNsaWNrIiwiaW50ZXJzZWN0aW9uIiwiZm9yRWFjaCIsIngiLCJ5IiwiUGFyZW50Q2ljbGVHcm91cCIsImNpcmNsZUdyb3VwIiwiY3VycmVudFBvaW50IiwiZm9udC1zaXplIiwiZm9udC1zdHlsZSIsImNpdHlOYW1lIiwiaW50ZXJzZWN0aW9uQ2lyY2xlcyIsInBhdGhTdGFydEljb24iLCJwYXJzZWRQYXRoU3RhcnRJY29uIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiaWNvbk9mZnNldFgiLCJpY29uT2Zmc2V0WSIsImljb25TY2FsZSIsImdyb3VwIiwiZ2V0UG9pbnRBdExlbmd0aCIsInN0YXJ0Q2lyY2xlIiwiZGlzcGxheSIsIlN0b3BQb2ludHMiLCJzdWJwYXRoSWNvbnMiLCJzb3J0IiwicG9pbnRJY29ucyIsInBhcnNlZF9ncm91cF9jb250ZW50IiwiaWNvbiIsInNuYXBfZ3JvdXAiLCJ0cmFuc3BvcnQiLCJnIiwiZGF0YS1zY2FsZSIsInNpemUiLCJkYXRhLWlkIiwiY29sb3IiLCJ0cmFuc3BvcnRfem9vbSIsInByZXBlbmQiLCJmaXJzdF9wb2ludCIsIm9uIiwiZSIsImNpcmNsZUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInRleHRFbGVtZW50cyIsIiRwZXJjZW50YWdlQ29tcGxldGUiLCJjdXJyZW50U2VjdGlvbklEIiwiQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoIiwiJG9mZnNldFVuaXQiLCJNYXRoIiwiZmxvb3IiLCJjdXJyZW50Q2lyY2xlIiwiY3VyRGFzaE9mZnNldCIsIm1vdmluZ1RyYW5zcG9ydCIsImoiLCJwYXJlbnQiLCJmYWRlT3V0IiwiZmFkZUluIiwic2VsZWN0IiwiYW5pbWF0ZSIsImsiLCJyb3V0ZSIsInJvdXRlX3BvaW50cyIsImNpcmNsZV9yb3V0ZV9wb2ludHMiLCJhbmdsZSIsImF0YW4yIiwiUEkiLCJiYm94IiwiZ2V0QkJveCIsIndpZHRoIiwibXlNYXRyaXgiLCJNYXRyaXgiLCJzY2FsZSIsInJvdGF0ZSIsInRyYW5zbGF0ZSIsImRyYXdQYXRoIiwic3ZnUG9pbnQiLCJlbGVtZW50IiwicHQiLCJjcmVhdGVTVkdQb2ludCIsIm1hdHJpeFRyYW5zZm9ybSIsImdldFNjcmVlbkNUTSIsImludmVyc2UiLCJzY3JvbGxDb3VudCIsInRvcE9mZnNldCIsImRhdGFab29tIiwiZGF0YVBvc1RvcCIsImRhdGFQb3NMZWZ0IiwicmVtb3ZlQ2xhc3MiLCJ0cmFuc3BvcnRJY29ucyIsInZpc19jb3VudCIsImN1cnJlbnRTZWN0aW9uIiwiY3VycmVudFRvcE9mZnNldCIsIkNvb3JkaW5hdGVzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHRfdG9wX1giLCJyaWdodF90b3BfWSIsInJpZ2h0X2JvdHRvbV9YIiwicmlnaHRfYm90dG9tX1kiLCJzdmdfcmlnaHRfdG9wIiwic3ZnX3JpZ2h0X2JvdHRvbSIsInNlY3Rpb25Db3VudGVyIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUVkLFNBQVNDLEVBQXNCQyxHQUMzQixJQUFJQyxFQUFpQkMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxlQUNqREMsU0FBVSx5QkFDVkMsZUFBZ0IsbUJBQ2hCQyxlQUFnQixxQkFDaEJDLHFCQUFzQixtQkFDdEJDLGNBQWUsbUJBQ2ZDLG9CQUFxQix5QkFDckJDLGlCQUFrQixJQUNsQkMsYUFBYyxJQUNkQyxrQkFBbUIsSUFDbkJDLGFBQWMsS0FDZEMsYUFBYyxjQUdsQixHQUFJZixFQUFlRCxHQUNmLE9BQU9DLEVBQWVELEdBUTlCLFNBQVNpQixFQUFTQyxHQUNkLElBQUt0QixFQUFFc0IsR0FBR0MsT0FBUSxPQUFPLEVBRXpCLElBQUlDLEVBQWlCeEIsRUFBRXNCLEdBQUdHLFNBQVNDLElBQy9CQyxFQUFhM0IsRUFBRXNCLEdBQUdHLFNBQVNDLElBQU0xQixFQUFFc0IsR0FBR00sY0FDdENDLEVBQWlCN0IsRUFBRThCLFFBQVFDLFlBQWMvQixFQUFFOEIsUUFBUUUsU0FDbkRDLEVBQWNqQyxFQUFFOEIsUUFBUUMsWUFFNUIsT0FBUUYsRUFBaUJMLEdBQW9CUyxFQUFjTixFQUcvRCxTQUFTTyxFQUFVQyxFQUFNQyxHQUNyQixPQUFPRCxFQUFLRSxRQUFVRCxFQUFLQyxRQVMvQixJQUFLLElBeEJEQyxFQUFjaEMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxzQkFzQjlDOEIsR0FyQmNqQyxLQUFL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QUFZLFlBQ29CLGNBQXpDckQsRUFBc0IsaUJBQ3RCSCxFQUFFc0gsR0FBT3pFLEtBQUssSUFBSyxJQUFNZ0YsRUFBSyxJQUFNRSxFQUFLLE1BQVErRyxFQUFjL0YsRUFBSTJGLEdBQWUsSUFBTSxFQUFnQixNQUFRSyxFQUFpQmhHLEVBQUk2RixHQUFrQixLQUFPQyxFQUFpQk4sR0FBb0IsTUFDbk12TyxFQUFFc0gsR0FBT3pFLEtBQUssT0FBUSxtQkFFMEIsWUFBekMxQyxFQUFzQixrQkFDN0JILEVBQUVzSCxHQUFPekUsS0FBSyxPQUFRLDBCQUN0QjdDLEVBQUVzSCxHQUFPekUsS0FBSyxJQUFLLElBQU1nRixFQUFLLElBQU1FLEVBQUssT0FBUytHLEVBQWMvRixFQUFJMkYsR0FBZSxJQUFNLEVBQWdCLE9BQVNLLEVBQWlCaEcsRUFBSTZGLEdBQWtCLEtBQU9DLEVBQWlCTixHQUFvQixPQUV6TXZPLEVBQUVzSCxHQUFPekUsS0FBSyxVQUFXLFNBSWpDN0MsRUFBRXlGLEdBQWV3RixRQUFRM0QsR0FDekJuQyxFQUFRNUIsT0FBT2tDLEdBRVg0SSxFQUFZLEVBQ1pyTyxFQUFFc0gsR0FBTzhFLE9BQU8sS0FFaEJwTSxFQUFFc0gsR0FBTzZFLFFBQVEsS0FxUHJCNkMsT0FLTCxHQUVIaFAsRUFBRSxZQUFZd0QsSUFBSSxtQkFBb0JyRCxFQUFzQix3QkFDNURILEVBQUUsUUFBUXdELElBQUksbUJBQW9CckQsRUFBc0IiLCJmaWxlIjoicnBfc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBnZXQgZWRpdG9yIHNldHRpbmdzXHJcbiAgICBmdW5jdGlvbiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2Uoc2V0dGluZykge1xyXG4gICAgICAgIHZhciBTZXR0aW5nc09iamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTZXR0aW5nc1wiKSkgfHwge1xyXG4gICAgICAgICAgICBtYXBDb2xvcjogXCJyZ2JhKDI1NSwgMjA0LCAxMjgsIDEpXCIsXHJcbiAgICAgICAgICAgIG1hcFN0cm9rZUNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICAgICAgbWFwUG9pbnRzQ29sb3I6IFwicmdiYSgwLCAwLCAyNTUsIDEpXCIsXHJcbiAgICAgICAgICAgIG1hcFBvaW50c0JvcmRlckNvbG9yOiBcInJnYmEoMCwgMCwgMCwgMSlcIixcclxuICAgICAgICAgICAgbWFwUm91dGVDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIDEpXCIsXHJcbiAgICAgICAgICAgIGJvZHlCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNDMsIDIyOSwgMjQ1LCAxKVwiLFxyXG4gICAgICAgICAgICByb3V0ZUJvcmRlcldpZHRoOiBcIjRcIixcclxuICAgICAgICAgICAgcG9pbnRzUmFkaXVzOiBcIjhcIixcclxuICAgICAgICAgICAgcG9pbnRzQm9yZGVyV2lkdGg6IFwiMVwiLFxyXG4gICAgICAgICAgICBjb250ZW50V2lkdGg6IFwiNTBcIixcclxuICAgICAgICAgICAgY29udGVudEFsaWduOiBcImZsZXgtc3RhcnRcIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChTZXR0aW5nc09iamVjdFtzZXR0aW5nXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NPYmplY3Rbc2V0dGluZ107XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGF0YUNvbnRlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdQb2ludHNDb250ZW50JykpIHx8IFtdO1xyXG4gICAgdmFyIGNpcmNsZUNvbG9yID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNhdmVkTWFwQ29sb3JzXCIpKSB8fCB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbldpbmRvdyhzKSB7IC8vIGNoZWNrIGlmIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiBicm93c2VyIHdpbmRvd1xyXG4gICAgICAgIGlmICghJChzKS5sZW5ndGgpIHJldHVybiBmYWxzZTsgLy8gZWxlbWVudCBub3QgZm91bmRcclxuXHJcbiAgICAgICAgdmFyIGltZ190b3Bfb2Zmc2V0ID0gJChzKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgdmFyIGltZ19ib3R0b20gPSAkKHMpLm9mZnNldCgpLnRvcCArICQocykub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB2YXIgYm90dG9tT2ZTY3JlZW4gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHRvcE9mU2NyZWVuID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKGJvdHRvbU9mU2NyZWVuID4gaW1nX3RvcF9vZmZzZXQpICYmICh0b3BPZlNjcmVlbiA8IGltZ19ib3R0b20pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVJZChvYmpBLCBvYmpCKSB7IC8vc29ydCBwb2ludHMgaWQgYnkgYXNjZW5kaW5nXHJcbiAgICAgICAgcmV0dXJuIG9iakEucG9pbnRJZCAtIG9iakIucG9pbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZihkYXRhQ29udGVudCl7XHJcbiAgICAvLyAvLyBkYXRhQ29udGVudC5zb3J0KGNvbXBhcmVJZCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgdmFyIHRleHRfY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9vbVwiKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7IC8vIGNyZWF0aW9uIG9mIHBhZ2Ugc2VjdGlvbnMgd2l0aCBpdCdzIGNvbnRlbnQsIHRpZWQgdG8gZXZlcnkgcG9pbnRcclxuICAgICAgICAkKHNlY3Rpb24pLmFkZENsYXNzKCdqcy1zZWN0aW9uJyk7XHJcblxyXG5cclxuICAgICAgICAkKHNlY3Rpb24pLmF0dHIoe1xyXG4gICAgICAgICAgICBcImRhdGEtem9vbVwiOiBkYXRhQ29udGVudFtpXS56b29tLFxyXG4gICAgICAgICAgICBcImRhdGEtcG9zLXRvcFwiOiBkYXRhQ29udGVudFtpXS50b3AsXHJcbiAgICAgICAgICAgIFwiZGF0YS1wb3MtbGVmdFwiOiBkYXRhQ29udGVudFtpXS5sZWZ0LFxyXG4gICAgICAgICAgICBcImlkXCI6IFwic2VjdGlvbl9cIiArIChpICsgMSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHNlY3Rpb24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBkYXRhQ29udGVudFtpXS5kYXRhKTtcclxuICAgICAgICAkKHNlY3Rpb24pLmZpbmQoJ2ltZycpLmFkZENsYXNzKCdqcy1pbWFnZScpO1xyXG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnLmpzLWltYWdlJykuYXR0cignZGF0YS1wb3MteCcsIDApO1xyXG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnLmpzLWltYWdlJykuYXR0cignZGF0YS1wb3MteScsIDApO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICB0ZXh0X2NvbnQuYXBwZW5kKHNlY3Rpb24pO1xyXG4gICAgICAgICQoXCJkaXYudGV4dF93cmFwcGVyXCIpLmNzcyhcImFsaWduLWl0ZW1zXCIsIGdldFNldHRpbmdGcm9tU3RvcmFnZShcImNvbnRlbnRBbGlnblwiKSk7XHJcbiAgICAgICAgJCgnLmpzLXNlY3Rpb24nKS5jc3MoXCJ3aWR0aFwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJjb250ZW50V2lkdGhcIikgKyBcIiVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFzU2xpZGVyQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJyAnICsgY2xhc3NOYW1lICsgJyAnKS50ZXN0KCcgJyArIGVsZW0uY2xhc3NOYW1lICsgJyAnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2xpZGVySW1nID0gJCgnLmpzLWltYWdlJyk7XHJcblxyXG4gICAgJC5mbi5oYXNBdHRyID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHIobmFtZSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICB2YXIgc2VjdGlvbnMgPSAkKCcuanMtc2VjdGlvbicpO1xyXG5cclxuICAgICQuZWFjaChzZWN0aW9ucywgZnVuY3Rpb24oaSwgZWwpIHtcclxuXHJcbiAgICAgICAgdmFyIHNsaWRlciA9ICQoZWwpLmZpbmQoJy5zbGljay1nYWxsZXJ5Jyk7XHJcbiAgICAgICAgaWYgKCQoc2xpZGVyKS5maW5kKFwiaW1nLnNsaWNrLWl0ZW1cIikubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJChzbGlkZXIpKTtcclxuICAgICAgICAgICAgJChzbGlkZXIpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNpbmdsZUltYWdlID0gJChlbCkuZmluZChcIi5zaW5nbGVfaW1hZ2VcIik7XHJcbiAgICAgICAgaWYgKCEkKHNpbmdsZUltYWdlKS5oYXNDbGFzcyhcIi5zbGljay1jdXJyZW50XCIpKSB7XHJcbiAgICAgICAgICAgICQoc2luZ2xlSW1hZ2UpLmFkZENsYXNzKFwic2xpY2stY3VycmVudFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChzbGlkZXIpLmZpbmQoJ2JyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCgnYnInKS5yZW1vdmUoKTtcclxuICAgICAgICAkKHNsaWRlcikudGV4dCgpLnJlcGxhY2UoLyZuYnNwOy9nLCAnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuc2xpY2tfZ2FsbGVyeScpLnNsaWNrKHtcclxuICAgICAgICBcInNsaWRlc1RvU2hvd1wiOiAxLFxyXG4gICAgICAgIFwic2xpZGVzVG9TY3JvbGxcIjogMSxcclxuICAgICAgICAvLyBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAvLyBhdXRvcGxheVNwZWVkOiAyMDAwLFxyXG4gICAgICAgIHByZXZBcnJvdzogdHJ1ZSxcclxuICAgICAgICBuZXh0QXJyb3c6IHRydWUsXHJcbiAgICAgICAgLy8gZmFkZTogdHJ1ZSxcclxuICAgICAgICAvLyBkb3RzOiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcclxuICAgIHZhciBtYXBfdXJsID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWFwJykpO1xyXG4gICAgdmFyIG1hcF91cmxfdHJ1ZSA9IG1hcF91cmw7XHJcbiAgICAkKCcjbWFwJykuYXR0cignZGF0YScsIG1hcF91cmxfdHJ1ZSk7XHJcblxyXG4gICAgYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHsgLy9sb2FkaW5nIG1hcCB1cmwgZnJvbSBsb2NhbHN0b3JhZ2VcclxuXHJcbiAgICAgICAgdmFyIHN2Z0RvYyA9IGEuY29udGVudERvY3VtZW50O1xyXG4gICAgICAgIHZhciBzdmdSb290ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudDsgLy9nZXR0aW5nIGludG8gb2JqZWN0IERPTVxyXG4gICAgICAgIHN2Z1Jvb3Quc2V0QXR0cmlidXRlKFwieFwiLCBcIjUyMHB4XCIpO1xyXG4gICAgICAgIHN2Z1Jvb3Quc2V0QXR0cmlidXRlKFwieVwiLCBcIjMwMHB4XCIpO1xyXG4gICAgICAgIHZhciBNYXBQYXRoc0dyb3VwID0gc3ZnUm9vdC5nZXRFbGVtZW50QnlJZChcIm1hcFBhdGhzXCIpO1xyXG4gICAgICAgIHZhciBQYXRoc0FycmF5ID0gTWFwUGF0aHNHcm91cC5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGF0aCcpO1xyXG4gICAgICAgIHZhciB3aG9sZVN2Z0dyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcbiAgICAgICAgd2hvbGVTdmdHcm91cC5hcHBlbmQoTWFwUGF0aHNHcm91cCk7XHJcbiAgICAgICAgJCh3aG9sZVN2Z0dyb3VwKS5hdHRyKFwiaWRcIiwgXCJ3aG9sZVN2Z0dyb3VwXCIpO1xyXG4gICAgICAgIHZhciBGdWxsTWFwR3JvdXAgPSBTbmFwKHdob2xlU3ZnR3JvdXApO1xyXG4gICAgICAgIHZhciBXcmFwcGVyUHJvcHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtYXBTdHlsZVByb3BlcnRpZXMnKSkgfHwgeyB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyAxICsgXCIpIHRyYW5zbGF0ZShcIiArIDAgKyBcIiBcIiArIDAgKyBcIilcIiB9O1xyXG4gICAgICAgIHZhciBwYXRoRGlzcGxhY2VtZW50ID0gU25hcChwYXRoR3JvdXApO1xyXG4gICAgICAgIGlmICgoV3JhcHBlclByb3BzLnRyYW5zZm9ybSkubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgdHJhbnNmb3JtU3RyaW5nID0gKFdyYXBwZXJQcm9wcy50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICB2YXIgcmVnZXggPSAvWystXT9cXGQrKFxcLlxcZCspPy9nO1xyXG4gICAgICAgICAgICB2YXIgU3RyaW5nVmFsdWVzID0gdHJhbnNmb3JtU3RyaW5nLm1hdGNoKHJlZ2V4KS5tYXAoZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhTdHJpbmdWYWx1ZXMpO1xyXG4gICAgICAgICAgICBzY2FsZUltZyA9IFN0cmluZ1ZhbHVlc1swXTtcclxuICAgICAgICAgICAgbW92ZUxlZnQgPSBTdHJpbmdWYWx1ZXNbMV0sXHJcbiAgICAgICAgICAgIG1vdmVUb3AgPSBTdHJpbmdWYWx1ZXNbMl07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNjYWxlSW1nLCBtb3ZlTGVmdCwgbW92ZVRvcCk7XHJcbiAgICAgICAgICAgIEZ1bGxNYXBHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIgKyBtb3ZlTGVmdCArIFwiIFwiICsgbW92ZVRvcCArIFwiKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aHNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLmZpbGwgPSBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBDb2xvclwiKTsgLy9jb2xvcmluZyBtYXAgYW5kIG1hcCBzdHJva2UgZnJvbSBzZXR0aW5nc1xyXG4gICAgICAgICAgICBQYXRoc0FycmF5W2ldLnN0eWxlLnN0cm9rZSA9IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFN0cm9rZUNvbG9yXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIFBhdGhEaXJlY3Rpb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYXRoJykpOyAvLyBnZXQgIGRpcmVjdGlvbiBvZiBtYWluIHJvdXRlXHJcbiAgICAgICAgJChzdmdSb290KS5hZGRDbGFzcyhcIm15LXN2Z1wiKTtcclxuXHJcbiAgICAgICAgaWYgKFBhdGhEaXJlY3Rpb24pIHsgLy8gbWFpbiByb3V0ZSBzdHlsaW5nXHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcbiAgICAgICAgICAgIHZhciBwYXRoQ2xvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKCdkJywgUGF0aERpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICQocGF0aCkuYXR0cignZmlsbCcsICd0cmFuc3BhcmVudCcpO1xyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoJ3N0cm9rZScsIGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFJvdXRlQ29sb3JcIikpO1xyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoXCJvcGFjaXR5XCIsICcwLjgnKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKCdzdHJva2Utd2lkdGgnLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJyb3V0ZUJvcmRlcldpZHRoXCIpKTtcclxuICAgICAgICAgICAgJChwYXRoKS5hdHRyKFwic3Ryb2tlLWxpbmVjYXBcIiwgXCJyb3VuZFwiKVxyXG4gICAgICAgICAgICAkKHBhdGgpLmF0dHIoXCJpZFwiLCBcInJvdXRlUGF0aFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJyb3V0ZVNoYWRvd1wiKSA9PSBcInRydWVcIiAmJiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJyb3V0ZVR5cGVcIikgPT0gXCJkYXNoZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJChwYXRoQ2xvbmUpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGQ6IFBhdGhEaXJlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCJ0cmFuc3BhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogXCIjY2NjXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2UtZGFzaG9mZnNldFwiOiBcIjMwMHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2UtZGFzaGFycmF5XCI6IFwiMTJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMC40XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicm91dGVCb3JkZXJXaWR0aFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBcInN0cm9rZS1saW5lY2FwXCI6IFwicm91bmRcIixcclxuICAgICAgICAgICAgICAgICAgICBpZDogXCJyb3V0ZVBhdGhDbG9uZVwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKHBhdGhDbG9uZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdldFNldHRpbmdGcm9tU3RvcmFnZShcInJvdXRlU2hhZG93XCIpID09IFwidHJ1ZVwiICYmIGdldFNldHRpbmdGcm9tU3RvcmFnZShcInJvdXRlVHlwZVwiKSA9PSBcImRvdHRlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkKHBhdGhDbG9uZSkuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgZDogUGF0aERpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBcInRyYW5zcGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBcIiNjY2NcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0cm9rZS1kYXNob2Zmc2V0XCI6IFwiMzAwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0cm9rZS1kYXNoYXJyYXlcIjogXCI0cHhcIixcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBcIjAuNFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcInJvdXRlQm9yZGVyV2lkdGhcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2UtbGluZWNhcFwiOiBcInJvdW5kXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwicm91dGVQYXRoQ2xvbmVcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aG9sZVN2Z0dyb3VwLmFwcGVuZChwYXRoQ2xvbmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJyb3V0ZVNoYWRvd1wiKSA9PSBcInRydWVcIiAmJiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJyb3V0ZVR5cGVcIikgPT0gXCJsaW5lXCIpIHtcclxuICAgICAgICAgICAgICAgICQocGF0aENsb25lKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICBkOiBQYXRoRGlyZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IFwidHJhbnNwYXJlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IFwiI2NjY1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMC40XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwicm91dGVCb3JkZXJXaWR0aFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBcInN0cm9rZS1saW5lY2FwXCI6IFwicm91bmRcIixcclxuICAgICAgICAgICAgICAgICAgICBpZDogXCJyb3V0ZVBhdGhDbG9uZVwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKHBhdGhDbG9uZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgY3VycmVudERpc3BsYWNlbWVudFRvcCA9IHBhcnNlSW50KCQoXCIjSURtYXBiZ1wiKVswXS5zdHlsZS50b3ApOyAvLyBtYXAgb2Zmc2V0IHNldCB1cCBieSB1c2VyIG9uIDFzdCBzdGVwXHJcbiAgICAgICAgdmFyIGN1cnJlbnREaXNwbGFjZW1lbnRMZWZ0ID0gcGFyc2VJbnQoJCgnI0lEbWFwYmcnKVswXS5zdHlsZS5sZWZ0KTtcclxuICAgICAgICB2YXIgcGF0aDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcclxuICAgICAgICAkKHBhdGgxKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cclxuICAgICAgICB2YXIgYXJySW1nSUQgPSBbXTsgLy9hcnJheSBvZiBwYWdlIGltZyBlbGVtZW50c1xyXG4gICAgICAgICQoJy5saWdodE9uJykuZWFjaChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICBhcnJJbWdJRC5wdXNoKCQodGhpcykpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgQ2lyY2xlUGF0aENvb3JkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NpcmNsZXNDb29yZHMnKSk7XHJcblxyXG4gICAgICAgICQoYXJySW1nSUQpLmVhY2goZnVuY3Rpb24oaSwgZWwpIHsgLy9nZXQgY29vcmRpbmF0ZXMgb2YgcG9pbnQgd2hpY2ggaXMgdGllZCB3aXRoIGN1cnJlbnQgaW1nXHJcbiAgICAgICAgICAgIHZhciBpbWdQYXJlbnRJRCA9ICQoZWwpLmNsb3Nlc3QoJ3NlY3Rpb24nKVswXS5pZDtcclxuICAgICAgICAgICAgaW1nUGFyZW50SUQgPSBwYXJzZUludChpbWdQYXJlbnRJRFs4XSkgLSAxO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKENpcmNsZVBhdGhDb29yZHNbaV0uaWQtMSkpO1xyXG4gICAgICAgICAgICBpZiAoaW1nUGFyZW50SUQgPT0gKENpcmNsZVBhdGhDb29yZHNbaW1nUGFyZW50SURdLmlkIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGltZ1BhcmVudElEKTtcclxuICAgICAgICAgICAgICAgICQoZWwpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLXBvcy14JzogQ2lyY2xlUGF0aENvb3Jkc1tpbWdQYXJlbnRJRF0uY3gsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcG9zLXknOiBDaXJjbGVQYXRoQ29vcmRzW2ltZ1BhcmVudElEXS5jeVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VjdGlvbkNvdW50ZXIoKSB7XHJcbiAgICAgICAgICAgICQoJy5qcy1zZWN0aW9uJykuZWFjaChmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsQ291bnQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9wT2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVpvb20gPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXpvb21cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc1RvcCA9IHBhcnNlSW50KCQodGhpcykuYXR0cihcImRhdGEtcG9zLXRvcFwiKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc0JvdHRvbSA9ICQodGhpcykuYXR0cignZGF0YS1wb3MtYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVBvc0xlZnQgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoXCJkYXRhLXBvcy1sZWZ0XCIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhUG9zUmlnaHQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXBvcy1yaWdodFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodG9wT2Zmc2V0IDw9IHNjcm9sbENvdW50ICYmIGluV2luZG93KCQodGhpcykpKSB7IC8vQWRkIGNsYXNzIFwiYWN0aXZlXCIgaWYgY3VycmVudCBzZWN0aW9uIGlzIGluV2luZG93XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChwYXRoKS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgRnVsbE1hcEdyb3VwLmFuaW1hdGUoeyAvL2FuaW1hdGUgbWFwIHpvb20gYW5kIG9mZnNldCwgc2V0IHVwIGJ5IHVzZXIgb24gMm5kIHN0ZXAsIGR1ZSB0byBjdXJyZW50IHNlY3Rpb24gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyBkYXRhWm9vbSArIFwiKSB0cmFuc2xhdGUoXCIgKyAoZGF0YVBvc0xlZnQpICsgXCIgXCIgKyBkYXRhUG9zVG9wICsgXCIpXCJcclxuICAgICAgICAgICAgICAgICAgICB9LCA3MDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCgnLmpzLXNlY3Rpb24nKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSAmJiAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGdWxsTWFwR3JvdXAuYW5pbWF0ZSh7IC8vYW5pbWF0ZSBtYXAgem9vbSBhbmQgb2Zmc2V0LCBzZXQgdXAgYnkgdXNlciBvbiAybmQgc3RlcCwgZHVlIHRvIGN1cnJlbnQgc2VjdGlvbiAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyBzY2FsZUltZyArIFwiKSB0cmFuc2xhdGUoXCIgKyAobW92ZUxlZnQpICsgXCIgXCIgKyAobW92ZVRvcCkgKyBcIilcIiAvLy9DSEFOR0VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zcG9ydEljb25zID0gJCgnLm1hcF90cmFuc3BvcnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0cmFuc3BvcnRJY29ucykuYXR0cihcIm9wYWNpdHlcIiwgXCIwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc3ZnUG9pbnQoZWxlbWVudCwgeCwgeSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHB0ID0gc3ZnUm9vdC5jcmVhdGVTVkdQb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgcHQueCA9IHg7XHJcbiAgICAgICAgICAgICAgICBwdC55ID0geTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwdC5tYXRyaXhUcmFuc2Zvcm0oZWxlbWVudC5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdmlzX2NvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICQoYXJySW1nSUQpLmVhY2goZnVuY3Rpb24oKSB7IC8vaWYgY3VycmVudCBpbWcgaW5XaW5kb3csIHRoYW4gY3JlYXRlIGEgbGlnaHQgZnJvbSBjdXJyZW50IHBvaW50IHRvIGltZydzIGJvcmRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluV2luZG93KCQodGhpcykpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZpc19jb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeCA9ICQodGhpcykuYXR0cignZGF0YS1wb3MteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeSA9ICQodGhpcykuYXR0cignZGF0YS1wb3MteScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VjdGlvbiA9IHRoaXMuY2xvc2VzdChcInNlY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRab29tID0gJChjdXJyZW50U2VjdGlvbikuYXR0cihcImRhdGEtem9vbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRvcE9mZnNldCA9ICQoY3VycmVudFNlY3Rpb24pLmF0dHIoXCJkYXRhLXBvcy10b3BcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRMZWZ0T2Zmc2V0ID0gJChjdXJyZW50U2VjdGlvbikuYXR0cihcImRhdGEtcG9zLWxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIENvb3JkaW5hdGVzID0gJCh0aGlzKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tT2Zmc2V0SW1nID0gQ29vcmRpbmF0ZXMudG9wICsgJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHRfdG9wX1ggPSAtKCtDb29yZGluYXRlcy5sZWZ0ICsgK0Nvb3JkaW5hdGVzLndpZHRoKSAvIDE5MjAgKiAxNDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodF90b3BfWSA9ICgrQ29vcmRpbmF0ZXMudG9wIC8gMTIwMCAqIDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0X2JvdHRvbV9YID0gLSgrQ29vcmRpbmF0ZXMubGVmdCArICtDb29yZGluYXRlcy53aWR0aCkgLyAxOTIwICogMTQwMDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHRfYm90dG9tX1kgPSAoQ29vcmRpbmF0ZXMuYm90dG9tKSAvIDEyMDAgKiA5MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN2Z19yaWdodF90b3AgPSBzdmdQb2ludChzdmdSb290LCByaWdodF90b3BfWCwgcmlnaHRfdG9wX1kpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdmdfcmlnaHRfYm90dG9tID0gc3ZnUG9pbnQoc3ZnUm9vdCwgcmlnaHRfYm90dG9tX1gsIHJpZ2h0X2JvdHRvbV9ZKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBfcmlnaHRfdG9wID0gc3ZnUG9pbnQod2hvbGVTdmdHcm91cCwgcmlnaHRfdG9wX1gsIHJpZ2h0X3RvcF9ZKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBfcmlnaHRfYm90dG9tID0gc3ZnUG9pbnQod2hvbGVTdmdHcm91cCwgcmlnaHRfYm90dG9tX1gsIHJpZ2h0X2JvdHRvbV9ZKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChwYXRoMSkuY3NzKCdwb3NpdGlvbicsIFwicmVsYXRpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldFNldHRpbmdGcm9tU3RvcmFnZShcImNvbnRlbnRBbGlnblwiKSA9PSBcImZsZXgtc3RhcnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKCdkJywgXCJNXCIgKyBjeCArIFwiIFwiICsgY3kgKyBcIiBMXCIgKyAoc3ZnX3JpZ2h0X3RvcC54IC0gcmlnaHRfdG9wX1gpICsgXCIgXCIgKyAocmlnaHRfdG9wX1kpICsgXCIgTFwiICsgKHN2Z19yaWdodF9ib3R0b20ueCAtIHJpZ2h0X2JvdHRvbV9YKSArIFwiIFwiICsgKHJpZ2h0X2JvdHRvbV9ZIC0gY3VycmVudFRvcE9mZnNldCkgKyBcIiBaXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKCdmaWxsJywgJ3VybCgjZ3JhZGllbnQpJyk7IC8vNDdEQkI0XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiY29udGVudEFsaWduXCIpID09IFwiZmxleC1lbmRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKCdmaWxsJywgJ3VybCgjZ3JhZGllbnRfcmV2ZXJzZSknKTsgLy80N0RCQjRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChwYXRoMSkuYXR0cignZCcsIFwiTVwiICsgY3ggKyBcIiBcIiArIGN5ICsgXCIgTFwiICsgKC1zdmdfcmlnaHRfdG9wLnggLSByaWdodF90b3BfWCkgKyBcIiBcIiArIChyaWdodF90b3BfWSkgKyBcIiBMXCIgKyAoLXN2Z19yaWdodF9ib3R0b20ueCAtIHJpZ2h0X2JvdHRvbV9YKSArIFwiIFwiICsgKHJpZ2h0X2JvdHRvbV9ZIC0gY3VycmVudFRvcE9mZnNldCkgKyBcIiBaXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKHBhdGgxKS5hdHRyKCdvcGFjaXR5JywgJy4zJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCh3aG9sZVN2Z0dyb3VwKS5wcmVwZW5kKHBhdGgxKTtcclxuICAgICAgICAgICAgc3ZnUm9vdC5hcHBlbmQod2hvbGVTdmdHcm91cCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmlzX2NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJChwYXRoMSkuZmFkZUluKDkwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHBhdGgxKS5mYWRlT3V0KDkwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNuYXAucGx1Z2luKGZ1bmN0aW9uKFNuYXAsIEVsZW1lbnQsIFBhcGVyLCBnbG9iYWwpIHsgLy8gY3JlYXRlIGNpcmNsZXMgYnkgcGF0aCBlbGVtZW50cyBpbiBzdmdcclxuICAgICAgICAgICAgUGFwZXIucHJvdG90eXBlLmNpcmNsZVBhdGggPSBmdW5jdGlvbihjeCwgY3ksIHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gXCJNXCIgKyBjeCArIFwiLFwiICsgY3k7XHJcbiAgICAgICAgICAgICAgICBwICs9IFwibVwiICsgLXIgKyBcIiwwXCI7XHJcbiAgICAgICAgICAgICAgICBwICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMSwwIFwiICsgKHIgKiAyKSArIFwiLDBcIjtcclxuICAgICAgICAgICAgICAgIHAgKz0gXCJhXCIgKyByICsgXCIsXCIgKyByICsgXCIgMCAxLDAgXCIgKyAtKHIgKiAyKSArIFwiLDBcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGgocCwgY3gsIGN5KTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBwYXRoR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuICAgICAgICBwYXRoR3JvdXAuaWQgPSBcInBhdGhHcm91cFwiO1xyXG4gICAgICAgIHBhdGhHcm91cC5hcHBlbmQocGF0aCk7IC8vZ3JvdXAgcGF0aHNcclxuXHJcbiAgICAgICAgJCh3aG9sZVN2Z0dyb3VwKS5hcHBlbmQocGF0aEdyb3VwKTtcclxuICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB2YXIgcyA9IFNuYXAocGF0aEdyb3VwKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tDaXJjbGUoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2lyY2xlc0FycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2lyY2xlc0Nvb3JkcycpKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKGNpcmNsZXNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGVsKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gcy5jaXJjbGVQYXRoKHRoaXMuY3gsIHRoaXMuY3ksIHRoaXMucikuYXR0cih7IC8vc2V0IHBvaW50cyBhdHRyaWJ1dGVzIGFuZCBzdHlsZXMgZnJvbSBwYWdlIHNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJtYXBQb2ludHNDb2xvclwiKSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQm9yZGVyQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNCb3JkZXJXaWR0aFwiKSxcclxuICAgICAgICAgICAgICAgIGlkOiBpbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjaXJjbGVFbGVtZW50XCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJkaXNwbGF5Om5vbmVcIixcclxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IFwiY2xpY2tDaXJjbGUoKVwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJzZWN0cyA9IFNuYXAucGF0aC5pbnRlcnNlY3Rpb24oY2lyY2xlLCAkKHBhdGgpLmF0dHIoJ2QnKSk7IC8vZHJhdyBjaXJjbGVzIGFuZCBtYWluIHJvdXRlIGludGVyc2VjdGlvbnNcclxuXHJcbiAgICAgICAgICAgIGludGVyc2VjdHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICAgICAgcy5jaXJjbGUoZWwueCwgZWwueSwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIFBhcmVudENpY2xlR3JvdXAgPSBzdmdSb290LmdldEVsZW1lbnRCeUlkKFwicGF0aEdyb3VwXCIpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNpcmNsZXNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY2lyY2xlR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludCA9IHN2Z1Jvb3QuZ2V0RWxlbWVudEJ5SWQoaSArIDEpO1xyXG4gICAgICAgICAgICBjaXJjbGVHcm91cC5hcHBlbmQoY3VycmVudFBvaW50KTtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgICAgICAgICAgJCh0ZXh0KS5hdHRyKHsgLy9uYW1lIG9mIHBvaW50XHJcbiAgICAgICAgICAgICAgICB4OiBjaXJjbGVzQXJyYXlbaV0uY3gsXHJcbiAgICAgICAgICAgICAgICB5OiBjaXJjbGVzQXJyYXlbaV0uY3kgKyAyMCxcclxuICAgICAgICAgICAgICAgIFwiZm9udC1zaXplXCI6IDEyLFxyXG4gICAgICAgICAgICAgICAgXCJmb250LXN0eWxlXCI6IFwiaXRhbGljXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBcIiNjY2NjY2NjXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlXCI6IFwiZGlzcGxheTogbm9uZVwiLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY2l0eU5hbWVcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCh0ZXh0KS50ZXh0KGRhdGFDb250ZW50W2ldLmNpdHlOYW1lKTtcclxuICAgICAgICAgICAgY2lyY2xlR3JvdXAuYXBwZW5kKHRleHQpO1xyXG4gICAgICAgICAgICBQYXJlbnRDaWNsZUdyb3VwLmFwcGVuZChjaXJjbGVHcm91cCk7IC8vZ3JvdXAgY2lyY2xlcyBlbGVtZW50cyB3aXRoIHRoZWlyIG5hbWVzKHRleHQgZWxlbWVudHMpXHJcbiAgICAgICAgICAgIHdob2xlU3ZnR3JvdXAuYXBwZW5kKFBhcmVudENpY2xlR3JvdXApO1xyXG4gICAgICAgICAgICBzdmdSb290LmFwcGVuZCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbnRlcnNlY3Rpb25DaXJjbGVzID0gc3ZnRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2lyY2xlXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50ZXJzZWN0aW9uQ2lyY2xlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25DaXJjbGVzW2ldLnN0eWxlLmZpbGwgPSBcInRyYW5zcGFyZW50XCI7IC8vZG8gbm90IHNob3cgaW50ZXJzZWN0aW9uIGNpcmNsZXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwYXRoU3RhcnRJY29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlN0YXJ0Um91dGVJY29uXCIpKTtcclxuICAgICAgICB2YXIgb1BhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgICAgICB2YXIgb0RPTSA9IG9QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHBhdGhTdGFydEljb24sIFwidGV4dC94bWxcIik7IC8vUGFyc2luZyBzdHJpbmcgdG8gaHRtbCBlbGVtZW50XHJcbiAgICAgICAgdmFyIHBhcnNlZFBhdGhTdGFydEljb24gPSBvRE9NLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgaWNvbk9mZnNldFggPSAkKHBhcnNlZFBhdGhTdGFydEljb24pLmF0dHIoXCJkYXRhLW9mZnNldC14XCIpO1xyXG4gICAgICAgIHZhciBpY29uT2Zmc2V0WSA9ICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cihcImRhdGEtb2Zmc2V0LXlcIik7XHJcbiAgICAgICAgdmFyIGljb25TY2FsZSA9ICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cihcImRhdGEtc2NhbGVcIik7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcblxyXG4gICAgICAgIGlmIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJVc2VyT3B0aW9uXCIpID09IFwidHJ1ZVwiICYmIHBhdGhTdGFydEljb24pIHsgLy9jaGVjayAxc3Qgc3RlcCB0cmlnZ2VyIGFuZCBzZXQgUm91dGUgc3RhcnQgSWNvblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhTdGFydEljb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICQocGFyc2VkUGF0aFN0YXJ0SWNvbikuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiUm91dGVTdGFydEljb25Db2xvclwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGljb25TY2FsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy90cmFuc2Zvcm0gUm91dGUgc3RhcnQgSWNvblxyXG4gICAgICAgICAgICAkKGdyb3VwKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKHBhdGguZ2V0UG9pbnRBdExlbmd0aCgxKS54IC0gKGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uU2l6ZVwiKSAvIGljb25PZmZzZXRYKSkgKyBcIiBcIiArIChwYXRoLmdldFBvaW50QXRMZW5ndGgoMSkueSAtIChnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJSb3V0ZVN0YXJ0SWNvblNpemVcIikgLyBpY29uT2Zmc2V0WSkpICsgXCIpIFwiICsgXCJzY2FsZShcIiArIGdldFNldHRpbmdGcm9tU3RvcmFnZShcIlJvdXRlU3RhcnRJY29uU2l6ZVwiKSAvIDEwMCArIFwiKVwiKTtcclxuICAgICAgICAgICAgZ3JvdXAuYXBwZW5kKHBhcnNlZFBhdGhTdGFydEljb24pO1xyXG4gICAgICAgICAgICB3aG9sZVN2Z0dyb3VwLmFwcGVuZChncm91cCk7XHJcbiAgICAgICAgICAgIHN2Z1Jvb3QuYXBwZW5kKHdob2xlU3ZnR3JvdXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGdldFNldHRpbmdGcm9tU3RvcmFnZShcImNoZWNrYm94U3RhdGVcIikgPT0gXCJ0cnVlXCIgJiYgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiZGVmYXVsdE9wdGlvblwiKSA9PSBcInRydWVcIikgeyAvL3NldCBkZWZhdWx0IHN0eWxlIFJvdXRlIHN0YXJ0IEljb25cclxuICAgICAgICAgICAgdmFyIHN0YXJ0Q2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcclxuICAgICAgICAgICAgJChzdGFydENpcmNsZSkuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBjeDogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLngsXHJcbiAgICAgICAgICAgICAgICBjeTogcGF0aC5nZXRQb2ludEF0TGVuZ3RoKDEpLnksXHJcbiAgICAgICAgICAgICAgICByOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNSYWRpdXNcIiksXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IGdldFNldHRpbmdGcm9tU3RvcmFnZShcIm1hcFBvaW50c0JvcmRlckNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwibWFwUG9pbnRzQ29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJwb2ludHNCb3JkZXJXaWR0aFwiKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgTWFwUGF0aHNHcm91cC5hcHBlbmQoc3RhcnRDaXJjbGUpO1xyXG4gICAgICAgICAgICB3aG9sZVN2Z0dyb3VwLmFwcGVuZChNYXBQYXRoc0dyb3VwKTtcclxuICAgICAgICAgICAgc3ZnUm9vdC5hcHBlbmQod2hvbGVTdmdHcm91cCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHRfY29udC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICB2YXIgU3RvcFBvaW50cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0b3BzQXRMZW5ndGgnKSk7XHJcbiAgICAgICAgdmFyIHN1YnBhdGhJY29ucyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N1YnBhdGhJY29ucycpKSB8fCBbXTtcclxuICAgICAgICBzdWJwYXRoSWNvbnMuc29ydChjb21wYXJlSWQpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBTdG9wUG9pbnRzW1N0b3BQb2ludHMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgdmFyIG9mZnNldERhc2ggPSAkKHBhdGgpLmNzcyh7XHJcbiAgICAgICAgICAgIFwic3Ryb2tlLWRhc2hvZmZzZXRcIjogbGVuZ3RoLFxyXG4gICAgICAgICAgICBcInN0cm9rZS1kYXNoYXJyYXlcIjogbGVuZ3RoICsgXCIgXCIgKyBsZW5ndGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbW92aW5nSWNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtb3ZpbmdJY29uXCIpKTtcclxuICAgICAgICB2YXIgbWFwID0gU25hcCh3aG9sZVN2Z0dyb3VwKTtcclxuICAgICAgICB2YXIgcG9pbnRJY29ucyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnBhdGhJY29ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBwb2ludEljb25zLnB1c2goc3VicGF0aEljb25zW2ldLnBvaW50SWQpO1xyXG4gICAgICAgICAgICB2YXIgb1BhcnNlciA9IG5ldyBET01QYXJzZXI7XHJcbiAgICAgICAgICAgIHZhciBncm91cF9jb250ZW50ID0gb1BhcnNlci5wYXJzZUZyb21TdHJpbmcoc3VicGF0aEljb25zW2ldLmljb24sIFwiaW1hZ2Uvc3ZnK3htbFwiKTtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZF9ncm91cF9jb250ZW50ID0gZ3JvdXBfY29udGVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciBzbmFwX2dyb3VwID0gU25hcChwYXJzZWRfZ3JvdXBfY29udGVudCk7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc3BvcnQgPSBtYXAuZyhzbmFwX2dyb3VwKTtcclxuICAgICAgICAgICAgdHJhbnNwb3J0LmF0dHIoeyBcImlkXCI6IFwidHJhbnNwb3J0X1wiICsgc3VicGF0aEljb25zW2ldLnBvaW50SWQsIFwiZGF0YS1zY2FsZVwiOiBzdWJwYXRoSWNvbnNbaV0uc2l6ZSAqIDAuMDEsIFwiZGF0YS1pZFwiOiBzdWJwYXRoSWNvbnNbaV0ucG9pbnRJZCwgY2xhc3M6IFwibWFwX3RyYW5zcG9ydFwiLCBmaWxsOiBzdWJwYXRoSWNvbnNbaV0uY29sb3IsIG9wYWNpdHk6IDAgfSk7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc3BvcnRfem9vbSA9IHBhcnNlRmxvYXQodHJhbnNwb3J0LmF0dHIoXCJkYXRhLXNjYWxlXCIpKTtcclxuICAgICAgICAgICAgcGF0aEdyb3VwLnByZXBlbmQodHJhbnNwb3J0KTtcclxuICAgICAgICAgICAgd2hvbGVTdmdHcm91cC5hcHBlbmQocGF0aEdyb3VwKTtcclxuICAgICAgICAgICAgdmFyIGZpcnN0X3BvaW50ID0gcGF0aC5nZXRQb2ludEF0TGVuZ3RoKFN0b3BQb2ludHNbaV0pO1xyXG4gICAgICAgICAgICB0cmFuc3BvcnQudHJhbnNmb3JtKFwibWF0cml4KFwiICsgdHJhbnNwb3J0X3pvb20gKyBcIiwwLDAsXCIgKyB0cmFuc3BvcnRfem9vbSArIFwiLFwiICsgZmlyc3RfcG9pbnQueCArIFwiLFwiICsgZmlyc3RfcG9pbnQueSArIFwiKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdQYXRoKCkgeyAvL01haW4gcm91dGUgRHJhdyBhbmltYXRpb25cclxuICAgICAgICAgICAgdmFyIGNpcmNsZUVsZW1lbnRzID0gc3ZnRG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaXJjbGVFbGVtZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0RWxlbWVudHMgPSBzdmdEb2MucXVlcnlTZWxlY3RvckFsbCgnLmNpdHlOYW1lJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU3RvcFBvaW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaCgkKCcuanMtc2VjdGlvbicpLCBmdW5jdGlvbihpLCBlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRwZXJjZW50YWdlQ29tcGxldGUgPSAoKCQod2luZG93KS5zY3JvbGxUb3AoKSAtICQodGhpcykub2Zmc2V0KCkudG9wKSAvICQodGhpcykuaGVpZ2h0KCkpICogMTAwOyAvL2NhbGN1bGF0ZSBzZWN0aW9uIG9mZnNldCBmcm9tIHBhZ2UgdG9wIGluIHBlcmNhbnRhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTZWN0aW9uSUQgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb25JRCA9IHBhcnNlSW50KGN1cnJlbnRTZWN0aW9uSURbOF0pIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvZmZzZXRVbml0ID0gJHBlcmNlbnRhZ2VDb21wbGV0ZSAqIChTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSURdIC8gMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoID0gTWF0aC5mbG9vcigkb2Zmc2V0VW5pdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBMZW5ndGhQb2ludCA9IHBhdGguZ2V0UG9pbnRBdExlbmd0aChDdXJyZW50UGF0aEN1cnJlbnRMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudENpcmNsZSA9IHN2Z0RvYy5nZXRFbGVtZW50QnlJZChjdXJyZW50U2VjdGlvbklEICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlVG9Qb2ludCA9IFNuYXAucGF0aC5nZXRQb2ludEF0TGVuZ3RoKG1vdmluZ1RyYW5zcG9ydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJEYXNoT2Zmc2V0ID0gcGFyc2VGbG9hdCgkKHBhdGgpLmNzcyhcInN0cm9rZS1kYXNob2Zmc2V0XCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2lyY2xlRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudENpcmNsZU5hbWUgPSAkKGN1cnJlbnRDaXJjbGUpLnBhcmVudCgpLmZpbmQoXCJ0ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckRhc2hPZmZzZXQgPj0gbGVuZ3RoIC0gMjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGNpcmNsZUVsZW1lbnRzW2pdKS5mYWRlT3V0KDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0ZXh0RWxlbWVudHNbal0pLmZhZGVPdXQoOTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNpcmNsZUVsZW1lbnRzW2pdLmlkIDw9IGN1cnJlbnRTZWN0aW9uSUQgKyAxKSB7IC8vTWFpbiByb3V0ZSBwb2ludHMgZGlzcGxheSBhbmQgZmFkZSBvdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjaXJjbGVFbGVtZW50c1tqXSkuZmFkZUluKDkwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGV4dEVsZW1lbnRzW2pdKS5mYWRlSW4oOTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNpcmNsZUVsZW1lbnRzW2pdLmlkID4gY3VycmVudFNlY3Rpb25JRCArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjaXJjbGVFbGVtZW50c1tqXSkuZmFkZU91dCg5MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRleHRFbGVtZW50c1tqXSkuZmFkZU91dCg5MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCA8IFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRF0pIHsgLy9kcmF3IHBhdGhcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlY3Rpb25JRCA9PSAwICYmIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCA8IFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRF0pIHsgLy8gcGF0aCBkcmF3aW5nIHRvIGZpcnN0IHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChwYXRoKS5jc3MoXCJzdHJva2UtZGFzaG9mZnNldFwiLCBcIlwiICsgKGxlbmd0aCAtIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCkgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZpbmdUcmFuc3BvcnQgPSBtYXAuc2VsZWN0KFwiI3RyYW5zcG9ydF9cIiArIHBvaW50SWNvbnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ1RyYW5zcG9ydC5hbmltYXRlKHsgb3BhY2l0eTogXCIwXCIgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWN0aW9uSUQgPiAwICYmIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCA8IFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRF0pIHsgLy8gcGF0aCBkcmF3aW5nIHRvIG5leHQgcG9pbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHBhdGgpLmNzcyhcInN0cm9rZS1kYXNob2Zmc2V0XCIsIFwiXCIgKyAobGVuZ3RoIC0gKFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRCAtIDFdICsgQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoKSkgKyBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHBvaW50SWNvbnMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWN0aW9uSUQgPT0gcGFyc2VJbnQocG9pbnRJY29uc1trXSAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSAoU3RvcFBvaW50c1twYXJzZUludChwb2ludEljb25zW2tdKSAtIDJdICsgQ3VycmVudFBhdGhDdXJyZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3V0ZV9wb2ludHMgPSBwYXRoLmdldFBvaW50QXRMZW5ndGgocm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNpcmNsZV9yb3V0ZV9wb2ludHMgPSBwYXRoLmdldFBvaW50QXRMZW5ndGgocm91dGUgKyAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbG9wZSA9IChyb3V0ZV9wb2ludHMueSAtIGNpcmNsZV9yb3V0ZV9wb2ludHMueSkgLyAocm91dGVfcG9pbnRzLnggLSBjaXJjbGVfcm91dGVfcG9pbnRzLngpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMigocm91dGVfcG9pbnRzLnkgLSBjaXJjbGVfcm91dGVfcG9pbnRzLnkpLCAocm91dGVfcG9pbnRzLnggLSBjaXJjbGVfcm91dGVfcG9pbnRzLngpKSAqIDE4MCAvIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDAgPSByb3V0ZV9wb2ludHMueCArIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5MCA9IHNsb3BlICogKHgwIC0gcm91dGVfcG9pbnRzLngpICsgcm91dGVfcG9pbnRzLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92aW5nVHJhbnNwb3J0ID0gbWFwLnNlbGVjdChcIiN0cmFuc3BvcnRfXCIgKyBwb2ludEljb25zW2tdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc3BvcnRfem9vbSA9IHBhcnNlRmxvYXQobW92aW5nVHJhbnNwb3J0LmF0dHIoXCJkYXRhLXNjYWxlXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zcG9ydF96b29tKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYm94ID0gbW92aW5nVHJhbnNwb3J0LmdldEJCb3goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjeCA9IGJib3gueCArIChiYm94LndpZHRoIC8gMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3kgPSBiYm94LnkgKyAoYmJveC5oZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1vdmluZ1RyYW5zcG9ydCwgY3gsIGN5LCByb3V0ZV9wb2ludHMueCwgcm91dGVfcG9pbnRzLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nVHJhbnNwb3J0LmFuaW1hdGUoeyBvcGFjaXR5OiBcIjFcIiB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdXRlID4gU3RvcFBvaW50c1twb2ludEljb25zW2tdIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIklGXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ1RyYW5zcG9ydC5hbmltYXRlKHsgb3BhY2l0eTogXCIwXCIgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0ZSA8IFN0b3BQb2ludHNbcG9pbnRJY29uc1trXSAtIDFdKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBteU1hdHJpeCA9IG5ldyBTbmFwLk1hdHJpeCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15TWF0cml4LnNjYWxlKHRyYW5zcG9ydF96b29tLCB0cmFuc3BvcnRfem9vbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlNYXRyaXgucm90YXRlKGFuZ2xlICsgMTgwLCBjaXJjbGVfcm91dGVfcG9pbnRzLnggKiAyMCwgY2lyY2xlX3JvdXRlX3BvaW50cy55ICogMjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15TWF0cml4LnRyYW5zbGF0ZSgocm91dGVfcG9pbnRzLnggKiAyMCksICgocm91dGVfcG9pbnRzLnkgLSAxMikgKiAyMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ1RyYW5zcG9ydC5hbmltYXRlKHsgdHJhbnNmb3JtOiBteU1hdHJpeCB9LCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nVHJhbnNwb3J0LmFuaW1hdGUoeyB0cmFuc2Zvcm06IG15TWF0cml4IH0sIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm91dGUgPiBTdG9wUG9pbnRzW3BvaW50SWNvbnNbMF1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWRlVHJhbnNwb3J0ID0gbWFwLnNlbGVjdChcIiN0cmFuc3BvcnRfXCIgKyBwb2ludEljb25zWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFkZVRyYW5zcG9ydC5hbmltYXRlKHsgb3BhY2l0eTogXCIwXCIgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGFjaXR5IDBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludEljb25zW2tdID4gY3VycmVudFNlY3Rpb25JRCArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZpbmdUcmFuc3BvcnQgPSBtYXAuc2VsZWN0KFwiI3RyYW5zcG9ydF9cIiArIHBvaW50SWNvbnNba10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nVHJhbnNwb3J0LmFuaW1hdGUoeyBvcGFjaXR5OiBcIjBcIiB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBlbmQgb2YgcGF0aCBkcmF3aW5nIHRvIG5leHQgcG9pbnQgY29uZGl0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTdG9wUG9pbnRzW2N1cnJlbnRTZWN0aW9uSUQgLSAxXSArIEN1cnJlbnRQYXRoQ3VycmVudExlbmd0aCA+IFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRF0pIHsgLy9TdG9wIHBhdGggZHJhd2luZyB3aGlsZSBzZWN0aW9uIGluV2luZG93XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChwYXRoKS5jc3MoXCJzdHJva2UtZGFzaG9mZnNldFwiLCBcIlwiICsgKGxlbmd0aCAtIFN0b3BQb2ludHNbY3VycmVudFNlY3Rpb25JRF0pICsgXCJweFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsZWQoZSkge1xyXG4gICAgICAgICAgICBkcmF3UGF0aCgpO1xyXG4gICAgICAgICAgICBzZWN0aW9uQ291bnRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIHNjcm9sbGVkKTsgLy9kcmF3IGFuaW1hdGlvbiBvbiBzY3JvbGxcclxuXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgJChcIiNJRG1hcGJnXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgZ2V0U2V0dGluZ0Zyb21TdG9yYWdlKFwiYm9keUJhY2tncm91bmRDb2xvclwiKSk7IC8vc2V0IHBhZ2UgYmcgY29sb3IgZnJvbSBzZXR0aW5nc1xyXG4gICAgJChcImJvZHlcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBnZXRTZXR0aW5nRnJvbVN0b3JhZ2UoXCJib2R5QmFja2dyb3VuZENvbG9yXCIpKTtcclxuICAgIFxyXG59KTsiXX0=
